---
文章标题: "[[3_Redis多线程面试与分析]]" 
文章作者: Dakkk
文章概要: |
  文章分析了Redis 6.0引入多线程的原因，主要为了解决IO瓶颈（读取请求、发送回包），同时保持指令执行的单线程模型。它还指出多线程默认关闭，并详细解释了其在读写回包阶段的作用，采用轮询策略分配任务。该主题是Redis性能优化的重要面试知识点。
文章标签:
- "Redis"
- "多线程"
- "Redis 6.0"
- "性能优化"
- "IO多路复用"
- "面试"
- "Redis配置"
- "架构"
相关文章:
- "[[5_多线程是怎么回事（需要了解）]]"
- "[[2_Redis单线程面试与分析]]"
- "[[2_Redis是单线程，还是多线程（重点理解）]]"
- "[[5_Redis版本特性]]"
- "[[2_Pipeline]]"
文章分类: "🎉 面试"
文章路径: "11-🎉 面试/3_训练营/8_Redis面试题/2_Redis运作/3_Redis多线程面试与分析.md"
文章难度: 中级 🌳
目前阶段: ✅ 已完成
重要性: ⭐⭐⭐⭐ 核心能力
创建时间: 2024-08-11 18:15:12
修改时间: 2024-08-11 18:15:12
---

## 1 面试题

### 1.1 Redis6.0之后引入了多线程，你知道为什么吗?

分析：
- 重点是时代发展，为了应对大流量业务

回答：
- 随着时代的发展，很多业务的请求量剧增，IO操作确实成为了瓶颈，比如`读取请求、发送回包`成为了性能提升的瓶颈，所以在维持单线程框架执行Redis指令的基础上引入了多线程IO操作

### 1.2 Redis6.0的多线程是默认开启的吗？

分析：
- 基础考察

回答：
- 不是，默认是关闭的，如果想要开启需要再redis.conf配置文件中修改

### 1.3 Redis6.0的多线程主要负责命令执行的那一块

分析：
- 考察多线程的定位

回答：
- `读取并解析指令以及回包`
- 单线程模式下是一个线程完成读取、解析、执行、将回包放入客户端缓冲区；
- 多线程模式下，会将不同的client放入`clients_pending_read任务队列`中，后续会通过Round-Robin轮询负载均衡策略把这些client分给其他IO线程和主线程进行读取和解析；
- 在回包的时候，也是利用Roung-Robin轮询负载均衡策略把`等待回包队列`中的任务连续均匀地分配给IO线程各自的本地FIFO任务队列和主线程自己，主线程轮询等待所有IO线程完成回包任务。

