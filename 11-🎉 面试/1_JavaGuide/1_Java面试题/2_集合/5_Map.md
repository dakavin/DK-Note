---
æ–‡ç« æ ‡é¢˜: "[[5_Map]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« è¯¦ç»†å¯¹æ¯”äº†HashMapä¸Hashtableã€HashSetã€TreeMapçš„åŒºåˆ«ï¼Œæ¶µç›–çº¿ç¨‹å®‰å…¨ã€nullæ”¯æŒã€å®¹é‡ä¸åº•å±‚ç»“æ„ã€‚æ·±å…¥è§£æäº†HashMapçš„JDK1.8åº•å±‚å®ç°ï¼ˆæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼‰ã€2æ¬¡å¹‚å®¹é‡åŸå› ï¼Œå¹¶å‰–æäº†å…¶å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ­»å¾ªç¯å’Œæ•°æ®ä¸¢å¤±é—®é¢˜ã€‚
æ–‡ç« æ ‡ç­¾:
- "Java"
- "HashMap"
- "Hashtable"
- "HashSet"
- "TreeMap"
- "æ•°æ®ç»“æ„"
- "çº¿ç¨‹å®‰å…¨"
- "æ€§èƒ½ä¼˜åŒ–"
ç›¸å…³æ–‡ç« :
- "[[2_349.ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†]]"
- "[[2_Mapçš„æºç åˆ†æ]]"
- "[[5_é›†åˆList]]"
- "[[6_åº•å±‚ç»“æ„HASHTABLE]]"
- "[[7_é›†åˆMap]]"
æ–‡ç« åˆ†ç±»: "ğŸ‰ é¢è¯•"
æ–‡ç« è·¯å¾„: "11-ğŸ‰ é¢è¯•/1_JavaGuide/1_Javaé¢è¯•é¢˜/2_é›†åˆ/5_Map.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2024-08-11 18:15:12
---

## 1 HashMap å’Œ Hashtable çš„åŒºåˆ«ï¼Ÿ

- **çº¿ç¨‹æ˜¯å¦å®‰å…¨ï¼š** `HashMap` æ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œ`Hashtable` æ˜¯çº¿ç¨‹å®‰å…¨çš„,å› ä¸º `Hashtable` å†…éƒ¨çš„æ–¹æ³•åŸºæœ¬éƒ½ç»è¿‡`synchronized` ä¿®é¥°ã€‚ï¼ˆå¦‚æœä½ è¦ä¿è¯çº¿ç¨‹å®‰å…¨çš„è¯å°±ä½¿ç”¨ `ConcurrentHashMap` å§ï¼ï¼‰ï¼›
- **æ•ˆç‡ï¼š** å› ä¸ºçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œ`HashMap` è¦æ¯” `Hashtable` æ•ˆç‡é«˜ä¸€ç‚¹ã€‚å¦å¤–ï¼Œ`Hashtable` åŸºæœ¬è¢«æ·˜æ±°ï¼Œä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒï¼›
- **å¯¹ Null key å’Œ Null value çš„æ”¯æŒï¼š** `HashMap` å¯ä»¥å­˜å‚¨ null çš„ key å’Œ valueï¼Œä½† null ä½œä¸ºé”®åªèƒ½æœ‰ä¸€ä¸ªï¼Œnull ä½œä¸ºå€¼å¯ä»¥æœ‰å¤šä¸ªï¼›Hashtable ä¸å…è®¸æœ‰ null é”®å’Œ null å€¼ï¼Œå¦åˆ™ä¼šæŠ›å‡º `NullPointerException`ã€‚
- **åˆå§‹å®¹é‡å¤§å°å’Œæ¯æ¬¡æ‰©å……å®¹é‡å¤§å°çš„ä¸åŒï¼š** â‘  åˆ›å»ºæ—¶å¦‚æœä¸æŒ‡å®šå®¹é‡åˆå§‹å€¼ï¼Œ`Hashtable` é»˜è®¤çš„åˆå§‹å¤§å°ä¸º 11ï¼Œä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ 2n+1ã€‚`HashMap` é»˜è®¤çš„åˆå§‹åŒ–å¤§å°ä¸º 16ã€‚ä¹‹åæ¯æ¬¡æ‰©å……ï¼Œå®¹é‡å˜ä¸ºåŸæ¥çš„ 2 å€ã€‚â‘¡ åˆ›å»ºæ—¶å¦‚æœç»™å®šäº†å®¹é‡åˆå§‹å€¼ï¼Œé‚£ä¹ˆ `Hashtable` ä¼šç›´æ¥ä½¿ç”¨ä½ ç»™å®šçš„å¤§å°ï¼Œè€Œ `HashMap` ä¼šå°†å…¶æ‰©å……ä¸º 2 çš„å¹‚æ¬¡æ–¹å¤§å°ï¼ˆ`HashMap` ä¸­çš„`tableSizeFor()`æ–¹æ³•ä¿è¯ï¼Œä¸‹é¢ç»™å‡ºäº†æºä»£ç ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ `HashMap` æ€»æ˜¯ä½¿ç”¨ 2 çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°,åé¢ä¼šä»‹ç»åˆ°ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚
- **åº•å±‚æ•°æ®ç»“æ„ï¼š** JDK1.8 ä»¥åçš„ `HashMap` åœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼ˆå°†é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘å‰ä¼šåˆ¤æ–­ï¼Œå¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº 64ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©å…ˆè¿›è¡Œæ•°ç»„æ‰©å®¹ï¼Œè€Œä¸æ˜¯è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ï¼ˆåæ–‡ä¸­æˆ‘ä¼šç»“åˆæºç å¯¹è¿™ä¸€è¿‡ç¨‹è¿›è¡Œåˆ†æï¼‰ã€‚`Hashtable` æ²¡æœ‰è¿™æ ·çš„æœºåˆ¶ã€‚

**`HashMap`Â ä¸­å¸¦æœ‰åˆå§‹å®¹é‡çš„æ„é€ å‡½æ•°ï¼š**
```java
public HashMap(int initialCapacity, float loadFactor) {
	if (initialCapacity < 0)
		throw new IllegalArgumentException("Illegal initial capacity: " +
										   initialCapacity);
	if (initialCapacity > MAXIMUM_CAPACITY)
		initialCapacity = MAXIMUM_CAPACITY;
	if (loadFactor <= 0 || Float.isNaN(loadFactor))
		throw new IllegalArgumentException("Illegal load factor: " +
										   loadFactor);
	this.loadFactor = loadFactor;
	this.threshold = tableSizeFor(initialCapacity);
}
 public HashMap(int initialCapacity) {
	this(initialCapacity, DEFAULT_LOAD_FACTOR);
}
```

ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¿è¯äº† `HashMap` æ€»æ˜¯ä½¿ç”¨ 2 çš„å¹‚ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ã€‚
```java
/**
 * Returns a power of two size for the given target capacity.
 */
static final int tableSizeFor(int cap) {
	int n = cap - 1; 
	n |= n >>> 1;
	n |= n >>> 2;
	n |= n >>> 4;
	n |= n >>> 8;
	n |= n >>> 16;
	return (n < 0) ? 1 : (n >= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;
}
```

`å›ç­”æ€è·¯ï¼š`
	1. `çº¿ç¨‹å®‰å…¨`ï¼šHashMapéçº¿ç¨‹å®‰å…¨ï¼ˆæ•ˆç‡é«˜ï¼‰ï¼ŒHashtableçº¿ç¨‹å®‰å…¨ï¼ˆæ•ˆç‡ä½ï¼‰
	2. `nullæ”¯æŒ`ï¼šHashMapçš„k-véƒ½æ”¯æŒnullï¼ŒHashtableçš„k-véƒ½ä¸æ”¯æŒnull
	3. `å®¹é‡åŠæ‰©å®¹`ï¼š
		- å®¹é‡ï¼šHashMapï¼ˆé»˜è®¤16ï¼ŒæŒ‡å®šä¸ºä¸å¤§äºnçš„2æ¬¡å¹‚ï¼‰ï¼›Hashtableï¼ˆé»˜è®¤11ï¼‰
		- æ‰©å®¹ï¼šHashMapï¼ˆåŸæ¥çš„2å€ï¼‰ï¼ŒHashtableï¼ˆåŸæ¥çš„2å€åŠ 1ï¼‰
	4. `åº•å±‚æ•°æ®ç»“æ„`ï¼šHashMapä¸ºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ŒHashtableä¸ºå­—å…¸ç»“æ„
## 2 HashMap å’Œ HashSet çš„åŒºåˆ«ï¼Ÿ

å¦‚æœä½ çœ‹è¿‡ `HashSet` æºç çš„è¯å°±åº”è¯¥çŸ¥é“ï¼š`HashSet` åº•å±‚å°±æ˜¯åŸºäº `HashMap` å®ç°çš„ã€‚ï¼ˆ`HashSet` çš„æºç éå¸¸éå¸¸å°‘ï¼Œå› ä¸ºé™¤äº† `clone()`ã€`writeObject()`ã€`readObject()`æ˜¯ `HashSet` è‡ªå·±ä¸å¾—ä¸å®ç°ä¹‹å¤–ï¼Œå…¶ä»–æ–¹æ³•éƒ½æ˜¯ç›´æ¥è°ƒç”¨ `HashMap` ä¸­çš„æ–¹æ³•ã€‚

|`HashMap`|`HashSet`|
|---|---|
|å®ç°äº† `Map` æ¥å£|å®ç° `Set` æ¥å£|
|å­˜å‚¨é”®å€¼å¯¹|ä»…å­˜å‚¨å¯¹è±¡|
|è°ƒç”¨ `put()`å‘ map ä¸­æ·»åŠ å…ƒç´ |è°ƒç”¨ `add()`æ–¹æ³•å‘ `Set` ä¸­æ·»åŠ å…ƒç´ |
|`HashMap` ä½¿ç”¨é”®ï¼ˆKeyï¼‰è®¡ç®— `hashcode`|`HashSet` ä½¿ç”¨æˆå‘˜å¯¹è±¡æ¥è®¡ç®— `hashcode` å€¼ï¼Œå¯¹äºä¸¤ä¸ªå¯¹è±¡æ¥è¯´ `hashcode` å¯èƒ½ç›¸åŒï¼Œæ‰€ä»¥`equals()`æ–¹æ³•ç”¨æ¥åˆ¤æ–­å¯¹è±¡çš„ç›¸ç­‰æ€§|

`å›ç­”æ€è·¯ï¼š`
	1. HashSetåº•å±‚æ˜¯åŸºäºHashMapå®ç°çš„ï¼Œåªæ˜¯ç”¨äº†HashMapçš„Keyï¼ŒValueéƒ½ä¸ºnullï¼›
	2. å®ç°çš„æ¥å£ã€å­˜å‚¨å†…å®¹ã€æ·»åŠ å…ƒç´ çš„æ–¹æ³•ä¸åŒ
## 3 HashMap å’ŒTreeMap çš„åŒºåˆ«ï¼Ÿ

`TreeMap`Â å’Œ`HashMap`Â éƒ½ç»§æ‰¿è‡ª`AbstractMap`Â ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯`TreeMap`å®ƒè¿˜å®ç°äº†`NavigableMap`æ¥å£å’Œ`SortedMap`Â æ¥å£ã€‚![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/832073dbdd6a665ce6e415fa0421c526.png)
å®ç° `NavigableMap` æ¥å£è®© `TreeMap` æœ‰äº†å¯¹é›†åˆå†…å…ƒç´ çš„`æœç´¢çš„èƒ½åŠ›`ã€‚

å®ç°`SortedMap`æ¥å£è®© `TreeMap` æœ‰äº†å¯¹é›†åˆä¸­çš„å…ƒç´ æ ¹æ®é”®`æ’åºçš„èƒ½åŠ›`ã€‚é»˜è®¤æ˜¯æŒ‰ key çš„å‡åºæ’åºï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šæ’åºçš„æ¯”è¾ƒå™¨ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
```java
/**
 * @author shuang.kou
 * @createTime 2020å¹´06æœˆ15æ—¥ 17:02:00
 */
public class Person {
    private Integer age;

    public Person(Integer age) {
        this.age = age;
    }

    public Integer getAge() {
        return age;
    }


    public static void main(String[] args) {
        TreeMap<Person, String> treeMap = new TreeMap<>(new Comparator<Person>() {
            @Override
            public int compare(Person person1, Person person2) {
                int num = person1.getAge() - person2.getAge();
                return Integer.compare(num, 0);
            }
        });
        treeMap.put(new Person(3), "person1");
        treeMap.put(new Person(18), "person2");
        treeMap.put(new Person(35), "person3");
        treeMap.put(new Person(16), "person4");
        treeMap.entrySet().stream().forEach(personStringEntry -> {
            System.out.println(personStringEntry.getValue());
        });
    }
}
```

è¾“å‡º:

```
person1
person4
person2
person3
```

å¯ä»¥çœ‹å‡ºï¼Œ`TreeMap`Â ä¸­çš„å…ƒç´ å·²ç»æ˜¯æŒ‰ç…§Â `Person`Â çš„ age å­—æ®µçš„å‡åºæ¥æ’åˆ—äº†ã€‚

ä¸Šé¢ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ä¼ å…¥åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼å®ç°çš„ï¼Œä½ å¯ä»¥å°†ä»£ç æ›¿æ¢æˆ Lambda è¡¨è¾¾å¼å®ç°çš„æ–¹å¼ï¼š

```java
TreeMap<Person, String> treeMap = new TreeMap<>((person1, person2) -> {
  int num = person1.getAge() - person2.getAge();
  return Integer.compare(num, 0);
});
```

**ç»¼ä¸Šï¼Œç›¸æ¯”äº`HashMap`æ¥è¯´ `TreeMap` ä¸»è¦å¤šäº†å¯¹é›†åˆä¸­çš„å…ƒç´ æ ¹æ®é”®æ’åºçš„èƒ½åŠ›ä»¥åŠå¯¹é›†åˆå†…å…ƒç´ çš„æœç´¢çš„èƒ½åŠ›ã€‚**

`å›ç­”æ€è·¯ï¼š`
	1. TreeMapå’ŒHashMapéƒ½ç»§æ‰¿äº†`AbstractMap`ï¼Œä½†æ˜¯TreeMapè¿˜å®ç°äº†`NavigableMap`æ¥å£å’Œ`SortedMap`æ¥å£
	2. æ‰€ä»¥TreeMapè¿˜å…·æœ‰`å…ƒç´ æœç´¢`å’Œ`å…ƒç´ æ’åº`çš„èƒ½åŠ›
## 4 HashSet å¦‚ä½•æ£€æŸ¥é‡å¤ï¼Ÿ

`å›ç­”æ€è·¯:`
	1. å½“æŠŠå¯¹è±¡æ’å…¥HashSetçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨å¯¹è±¡çš„hashCodeæ–¹æ³•è®¡ç®—å‡ºå“ˆå¸Œå€¼ï¼Œç”¨äºç¡®å®šé›†åˆä¸­çš„ç´¢å¼•ä½ç½®
	2. å½“ç´¢å¼•å¤„æœ‰å…ƒç´ æ—¶ï¼Œä¼šè°ƒç”¨å¯¹è±¡çš„equalsæ–¹æ³•åˆ¤æ–­å¯¹è±¡(`åˆ¤æ–­çš„æ˜¯keyï¼ï¼ï¼`)æ˜¯å¦ç›¸ç­‰
	3. å½“å¯¹è±¡ç›¸ç­‰ï¼Œåˆ™æ·»åŠ å¤±è´¥ï¼Œå®Œæˆæ£€æŸ¥ï¼›
## 5 HashMapçš„åº•å±‚å®ç°

### 5.1 JDK1.8 ä¹‹å‰

JDK1.8 ä¹‹å‰ `HashMap` åº•å±‚æ˜¯ **æ•°ç»„å’Œé“¾è¡¨** ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ä¹Ÿå°±æ˜¯ **é“¾è¡¨æ•£åˆ—**ã€‚HashMap é€šè¿‡ key çš„ `hashcode` ç»è¿‡æ‰°åŠ¨å‡½æ•°å¤„ç†è¿‡åå¾—åˆ° hash å€¼ï¼Œç„¶åé€šè¿‡ `(n - 1) & hash` åˆ¤æ–­å½“å‰å…ƒç´ å­˜æ”¾çš„ä½ç½®ï¼ˆè¿™é‡Œçš„ n æŒ‡çš„æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ï¼Œå¦‚æœå½“å‰ä½ç½®å­˜åœ¨å…ƒç´ çš„è¯ï¼Œå°±åˆ¤æ–­è¯¥å…ƒç´ ä¸è¦å­˜å…¥çš„å…ƒç´ çš„ hash å€¼ä»¥åŠ key æ˜¯å¦ç›¸åŒï¼Œå¦‚æœç›¸åŒçš„è¯ï¼Œç›´æ¥è¦†ç›–ï¼Œä¸ç›¸åŒå°±é€šè¿‡æ‹‰é“¾æ³•è§£å†³å†²çªã€‚

æ‰€è°“æ‰°åŠ¨å‡½æ•°æŒ‡çš„å°±æ˜¯ HashMap çš„ `hash` æ–¹æ³•ã€‚ä½¿ç”¨ `hash` æ–¹æ³•ä¹Ÿå°±æ˜¯æ‰°åŠ¨å‡½æ•°æ˜¯ä¸ºäº†é˜²æ­¢ä¸€äº›å®ç°æ¯”è¾ƒå·®çš„ `hashCode()` æ–¹æ³• æ¢å¥è¯è¯´ä½¿ç”¨æ‰°åŠ¨å‡½æ•°ä¹‹åå¯ä»¥å‡å°‘ç¢°æ’ã€‚

**JDK 1.8 HashMap çš„ hash æ–¹æ³•æºç :**

JDK 1.8 çš„ hash æ–¹æ³• ç›¸æ¯”äº JDK 1.7 hash æ–¹æ³•æ›´åŠ ç®€åŒ–ï¼Œä½†æ˜¯åŸç†ä¸å˜ã€‚

```java
    static final int hash(Object key) {
      int h;
      // key.hashCode()ï¼šè¿”å›æ•£åˆ—å€¼ä¹Ÿå°±æ˜¯hashcode
      // ^ï¼šæŒ‰ä½å¼‚æˆ–
      // >>>:æ— ç¬¦å·å³ç§»ï¼Œå¿½ç•¥ç¬¦å·ä½ï¼Œç©ºä½éƒ½ä»¥0è¡¥é½
      return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
  }
```

å¯¹æ¯”ä¸€ä¸‹ JDK1.7 çš„ HashMap çš„ hash æ–¹æ³•æºç .

```java
static int hash(int h) {
    // This function ensures that hashCodes that differ only by
    // constant multiples at each bit position have a bounded
    // number of collisions (approximately 8 at default load factor).

    h ^= (h >>> 20) ^ (h >>> 12);
    return h ^ (h >>> 7) ^ (h >>> 4);
}
```

ç›¸æ¯”äº JDK1.8 çš„ hash æ–¹æ³• ï¼ŒJDK 1.7 çš„ hash æ–¹æ³•çš„æ€§èƒ½ä¼šç¨å·®ä¸€ç‚¹ç‚¹ï¼Œå› ä¸ºæ¯•ç«Ÿæ‰°åŠ¨äº† 4 æ¬¡ã€‚

æ‰€è°“ **â€œæ‹‰é“¾æ³•â€** å°±æ˜¯ï¼šå°†é“¾è¡¨å’Œæ•°ç»„ç›¸ç»“åˆã€‚ä¹Ÿå°±æ˜¯è¯´åˆ›å»ºä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸€æ ¼å°±æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚è‹¥é‡åˆ°å“ˆå¸Œå†²çªï¼Œåˆ™å°†å†²çªçš„å€¼åŠ åˆ°é“¾è¡¨ä¸­å³å¯ã€‚
![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/81303cf17901bbbd5074f8abc85c9eb7.png)

### 5.2 JDK1.8 ä¹‹å

ç›¸æ¯”äºä¹‹å‰çš„ç‰ˆæœ¬ï¼Œ JDK1.8 ä¹‹ååœ¨è§£å†³å“ˆå¸Œå†²çªæ—¶æœ‰äº†è¾ƒå¤§çš„å˜åŒ–ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º 8ï¼‰ï¼ˆå°†é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘å‰ä¼šåˆ¤æ–­ï¼Œå¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº 64ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©å…ˆè¿›è¡Œæ•°ç»„æ‰©å®¹ï¼Œè€Œä¸æ˜¯è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œä»¥å‡å°‘æœç´¢æ—¶é—´ã€‚
![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/147dfa0f996caead25d3f1c213afaf97.png)

> TreeMapã€TreeSet ä»¥åŠ JDK1.8 ä¹‹åçš„ HashMap åº•å±‚éƒ½ç”¨åˆ°äº†çº¢é»‘æ ‘ã€‚çº¢é»‘æ ‘å°±æ˜¯ä¸ºäº†è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘çš„ç¼ºé™·ï¼Œå› ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘åœ¨æŸäº›æƒ…å†µä¸‹ä¼šé€€åŒ–æˆä¸€ä¸ªçº¿æ€§ç»“æ„ã€‚

æˆ‘ä»¬æ¥ç»“åˆæºç åˆ†æä¸€ä¸‹ `HashMap` é“¾è¡¨åˆ°çº¢é»‘æ ‘çš„è½¬æ¢ã€‚

**1ã€ `putVal` æ–¹æ³•ä¸­æ‰§è¡Œé“¾è¡¨è½¬çº¢é»‘æ ‘çš„åˆ¤æ–­é€»è¾‘ã€‚**

é“¾è¡¨çš„é•¿åº¦å¤§äº 8 çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œ `treeifyBin` ï¼ˆè½¬æ¢çº¢é»‘æ ‘ï¼‰çš„é€»è¾‘ã€‚

```java
// éå†é“¾è¡¨
for (int binCount = 0; ; ++binCount) {
    // éå†åˆ°é“¾è¡¨æœ€åä¸€ä¸ªèŠ‚ç‚¹
    if ((e = p.next) == null) {
        p.next = newNode(hash, key, value, null);
        // å¦‚æœé“¾è¡¨å…ƒç´ ä¸ªæ•°å¤§äºç­‰äºTREEIFY_THRESHOLDï¼ˆ8ï¼‰
        if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st
            // çº¢é»‘æ ‘è½¬æ¢ï¼ˆå¹¶ä¸ä¼šç›´æ¥è½¬æ¢æˆçº¢é»‘æ ‘ï¼‰
            treeifyBin(tab, hash);
        break;
    }
    if (e.hash == hash &&
        ((k = e.key) == key || (key != null && key.equals(k))))
        break;
    p = e;
}
```

**2ã€`treeifyBin`Â æ–¹æ³•ä¸­åˆ¤æ–­æ˜¯å¦çœŸçš„è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚**

```java
final void treeifyBin(Node<K,V>[] tab, int hash) {
    int n, index; Node<K,V> e;
    // åˆ¤æ–­å½“å‰æ•°ç»„çš„é•¿åº¦æ˜¯å¦å°äº 64
    if (tab == null || (n = tab.length) < MIN_TREEIFY_CAPACITY)
        // å¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº 64ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©å…ˆè¿›è¡Œæ•°ç»„æ‰©å®¹
        resize();
    else if ((e = tab[index = (n - 1) & hash]) != null) {
        // å¦åˆ™æ‰å°†åˆ—è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘

        TreeNode<K,V> hd = null, tl = null;
        do {
            TreeNode<K,V> p = replacementTreeNode(e, null);
            if (tl == null)
                hd = p;
            else {
                p.prev = tl;
                tl.next = p;
            }
            tl = p;
        } while ((e = e.next) != null);
        if ((tab[index] = hd) != null)
            hd.treeify(tab);
    }
}
```

å°†é“¾è¡¨è½¬æ¢æˆçº¢é»‘æ ‘å‰ä¼šåˆ¤æ–­ï¼Œå¦‚æœå½“å‰æ•°ç»„çš„é•¿åº¦å°äº 64ï¼Œé‚£ä¹ˆä¼šé€‰æ‹©å…ˆè¿›è¡Œæ•°ç»„æ‰©å®¹ï¼Œè€Œä¸æ˜¯è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚

`å›ç­”æ€è·¯ï¼š`
	1. HashMapçš„åº•å±‚æ˜¯ `ä¸€ç»´æ•°ç»„ + å•å‘é“¾è¡¨ + çº¢é»‘æ ‘`
	2. æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨
	3. å½“é“¾è¡¨çš„é•¿åº¦å¤§äºé˜ˆå€¼ï¼ˆé»˜è®¤ä¸º8ï¼‰æ—¶ï¼Œä¸”æ•°ç»„é•¿åº¦å¤§äº64ï¼Œé“¾è¡¨ä¼šè½¬æ¢ä¸ºçº¢é»‘æ•°
	4. å½“çº¢é»‘æ ‘çš„å…ƒç´ å°äº6æ—¶ï¼Œçº¢é»‘æ ‘ä¼šé€€åŒ–ä¸ºå•å‘é“¾è¡¨
## 6 HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯2çš„å¹‚æ¬¡æ–¹ï¼Ÿ

ä¸ºäº†èƒ½è®© HashMap å­˜å–é«˜æ•ˆï¼Œå°½é‡è¾ƒå°‘ç¢°æ’ï¼Œä¹Ÿå°±æ˜¯è¦å°½é‡æŠŠæ•°æ®åˆ†é…å‡åŒ€ã€‚æˆ‘ä»¬ä¸Šé¢ä¹Ÿè®²åˆ°äº†è¿‡äº†ï¼ŒHash å€¼çš„èŒƒå›´å€¼-2147483648 åˆ° 2147483647ï¼Œå‰ååŠ èµ·æ¥å¤§æ¦‚ 40 äº¿çš„æ˜ å°„ç©ºé—´ï¼Œåªè¦å“ˆå¸Œå‡½æ•°æ˜ å°„å¾—æ¯”è¾ƒå‡åŒ€æ¾æ•£ï¼Œä¸€èˆ¬åº”ç”¨æ˜¯å¾ˆéš¾å‡ºç°ç¢°æ’çš„ã€‚ä½†é—®é¢˜æ˜¯ä¸€ä¸ª 40 äº¿é•¿åº¦çš„æ•°ç»„ï¼Œå†…å­˜æ˜¯æ”¾ä¸ä¸‹çš„ã€‚æ‰€ä»¥è¿™ä¸ªæ•£åˆ—å€¼æ˜¯ä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨çš„ã€‚ç”¨ä¹‹å‰è¿˜è¦å…ˆåšå¯¹æ•°ç»„çš„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œå¾—åˆ°çš„ä½™æ•°æ‰èƒ½ç”¨æ¥è¦å­˜æ”¾çš„ä½ç½®ä¹Ÿå°±æ˜¯å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ã€‚è¿™ä¸ªæ•°ç»„ä¸‹æ ‡çš„è®¡ç®—æ–¹æ³•æ˜¯â€œ `(n - 1) & hash`â€ã€‚ï¼ˆn ä»£è¡¨æ•°ç»„é•¿åº¦ï¼‰ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚

**è¿™ä¸ªç®—æ³•åº”è¯¥å¦‚ä½•è®¾è®¡å‘¢ï¼Ÿ**

æˆ‘ä»¬é¦–å…ˆå¯èƒ½ä¼šæƒ³åˆ°é‡‡ç”¨%å–ä½™çš„æ“ä½œæ¥å®ç°ã€‚ä½†æ˜¯ï¼Œé‡ç‚¹æ¥äº†ï¼š**â€œå–ä½™(%)æ“ä½œä¸­å¦‚æœé™¤æ•°æ˜¯ 2 çš„å¹‚æ¬¡åˆ™ç­‰ä»·äºä¸å…¶é™¤æ•°å‡ä¸€çš„ä¸(&)æ“ä½œï¼ˆä¹Ÿå°±æ˜¯è¯´ hash%length`==`hash&(length-1)çš„å‰ææ˜¯ length æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼›ï¼‰ã€‚â€** å¹¶ä¸” **é‡‡ç”¨äºŒè¿›åˆ¶ä½æ“ä½œ &ï¼Œç›¸å¯¹äº%èƒ½å¤Ÿæé«˜è¿ç®—æ•ˆç‡ï¼Œè¿™å°±è§£é‡Šäº† HashMap çš„é•¿åº¦ä¸ºä»€ä¹ˆæ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚**
![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/8996442899bc394a8dec416473b8ebc2.png)

`å›ç­”æ€è·¯ï¼š`
	1. hashå€¼æœ¬èº«çš„èŒƒå›´å¾ˆå¤§ï¼Œä½†æ˜¯40äº¿çš„èŒƒå›´ï¼Œå†…å­˜æ”¾ä¸ä¸‹
	2. hashæœ¬èº«ä¸æ˜¯ç›´æ¥æ‹¿æ¥ç”¨çš„ï¼Œè€Œæ˜¯å…ˆå’Œå†…ç½®æ•°ç»„è¿›è¡Œå–ä½™è¿ç®—ï¼Œè·å¾—keyçš„ç´¢å¼•ä½ç½®
	3. å–ä½™è¿ç®—ï¼ˆn%lengthï¼‰ å¯ä»¥ä¼˜åŒ–ä¸º ä¸”è¿ç®—ï¼ˆhash&(length-1)ï¼‰
	4. ä½†æ˜¯ä¸”è¿ç®—è¦æ±‚lengthå¿…é¡»æ˜¯2çš„å¹‚æ¬¡æ–¹
	5. æ‰€ä»¥HashMapçš„é•¿åº¦æ˜¯2çš„å¹‚æ¬¡æ–¹
## 7 HashMap å¤šçº¿ç¨‹æ“ä½œå¯¼è‡´æ­»å¾ªç¯é—®é¢˜

JDK1.7 åŠä¹‹å‰ç‰ˆæœ¬çš„ `HashMap` åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ‰©å®¹æ“ä½œå¯èƒ½å­˜åœ¨æ­»å¾ªç¯é—®é¢˜ï¼Œè¿™æ˜¯ç”±äºå½“ä¸€ä¸ªæ¡¶ä½ä¸­æœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿›è¡Œæ‰©å®¹æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹é“¾è¡¨è¿›è¡Œæ“ä½œï¼Œå¤´æ’æ³•å¯èƒ½ä¼šå¯¼è‡´é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æŒ‡å‘é”™è¯¯çš„ä½ç½®ï¼Œä»è€Œå½¢æˆä¸€ä¸ªç¯å½¢é“¾è¡¨ï¼Œè¿›è€Œä½¿å¾—æŸ¥è¯¢å…ƒç´ çš„æ“ä½œé™·å…¥æ­»å¾ªç¯æ— æ³•ç»“æŸã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJDK1.8 ç‰ˆæœ¬çš„ HashMap é‡‡ç”¨äº†å°¾æ’æ³•è€Œä¸æ˜¯å¤´æ’æ³•æ¥é¿å…é“¾è¡¨å€’ç½®ï¼Œä½¿å¾—æ’å…¥çš„èŠ‚ç‚¹æ°¸è¿œéƒ½æ˜¯æ”¾åœ¨é“¾è¡¨çš„æœ«å°¾ï¼Œé¿å…äº†é“¾è¡¨ä¸­çš„ç¯å½¢ç»“æ„ã€‚ä½†æ˜¯è¿˜æ˜¯ä¸å»ºè®®åœ¨å¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ `HashMap`ï¼Œå› ä¸ºå¤šçº¿ç¨‹ä¸‹ä½¿ç”¨ `HashMap` è¿˜æ˜¯ä¼šå­˜åœ¨æ•°æ®è¦†ç›–çš„é—®é¢˜ã€‚å¹¶å‘ç¯å¢ƒä¸‹ï¼Œæ¨èä½¿ç”¨ `ConcurrentHashMap` ã€‚

ä¸€èˆ¬é¢è¯•ä¸­è¿™æ ·ä»‹ç»å°±å·®ä¸å¤šï¼Œä¸éœ€è¦è®°å„ç§ç»†èŠ‚ï¼Œä¸ªäººè§‰å¾—ä¹Ÿæ²¡å¿…è¦è®°ã€‚å¦‚æœæƒ³è¦è¯¦ç»†äº†è§£ `HashMap` æ‰©å®¹å¯¼è‡´æ­»å¾ªç¯é—®é¢˜ï¼Œå¯ä»¥çœ‹çœ‹è€—å­å”çš„è¿™ç¯‡æ–‡ç« ï¼š[Java HashMap çš„æ­»å¾ªç¯open in new window](https://coolshell.cn/articles/9606.html)ã€‚

`å›ç­”æ€è·¯ï¼š`
	1. JDK1.7ç‰ˆæœ¬ï¼šé“¾è¡¨æ’å…¥å…ƒç´ çš„æ—¶å€™æ˜¯å¤´æ’æ³•ï¼Œåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ·»åŠ å…ƒç´ ä¸”å‡ºç°æ‰©å®¹ï¼ˆrehashï¼‰ï¼Œå®¹æ˜“å‡ºç°èŠ‚ç‚¹æŒ‡å‘é”™è¯¯çš„ä½ç½®ï¼Œå½¢æˆç¯å½¢é“¾è¡¨ï¼Œä»è€Œåœ¨æŸ¥è¯¢å…ƒç´ çš„æ—¶å€™é™·å…¥æ­»å¾ªç¯ï¼›
	2. JDK1.8ç‰ˆæœ¬ï¼šé‡‡ç”¨äº†å°¾æ’æ³•ï¼Œé¿å…äº†å¾ªç¯é“¾è¡¨ï¼Œä½†æ˜¯ä¸å»ºè®®å¤šçº¿ç¨‹æƒ…å†µä¸‹ä½¿ç”¨HashMapï¼Œå®¹æ˜“å‡ºç°æ•°æ®è¦†ç›–(ä¸¢å¤±)é—®é¢˜
	3. å»ºè®®ä½¿ç”¨ConcurrentHashMap
## 8 HashMap ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ï¼Ÿ

JDK1.7 åŠä¹‹å‰ç‰ˆæœ¬ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œ`HashMap` æ‰©å®¹æ—¶ä¼šé€ æˆæ­»å¾ªç¯å’Œæ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚

æ•°æ®ä¸¢å¤±è¿™ä¸ªåœ¨ JDK1.7 å’Œ JDK 1.8 ä¸­éƒ½å­˜åœ¨ï¼Œè¿™é‡Œä»¥ JDK 1.8 ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚

JDK 1.8 åï¼Œåœ¨ `HashMap` ä¸­ï¼Œå¤šä¸ªé”®å€¼å¯¹å¯èƒ½ä¼šè¢«åˆ†é…åˆ°åŒä¸€ä¸ªæ¡¶ï¼ˆbucketï¼‰ï¼Œå¹¶ä»¥é“¾è¡¨æˆ–çº¢é»‘æ ‘çš„å½¢å¼å­˜å‚¨ã€‚å¤šä¸ªçº¿ç¨‹å¯¹ `HashMap` çš„ `put` æ“ä½œä¼šå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ï¼Œå…·ä½“æ¥è¯´ä¼šæœ‰æ•°æ®è¦†ç›–çš„é£é™©ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š
- ä¸¤ä¸ªçº¿ç¨‹ 1,2 åŒæ—¶è¿›è¡Œ put æ“ä½œï¼Œå¹¶ä¸”å‘ç”Ÿäº†å“ˆå¸Œå†²çªï¼ˆhash å‡½æ•°è®¡ç®—å‡ºçš„æ’å…¥ä¸‹æ ‡æ˜¯ç›¸åŒçš„ï¼‰ã€‚
- ä¸åŒçš„çº¿ç¨‹å¯èƒ½åœ¨ä¸åŒçš„æ—¶é—´ç‰‡è·å¾— CPU æ‰§è¡Œçš„æœºä¼šï¼Œå½“å‰çº¿ç¨‹ 1 æ‰§è¡Œå®Œå“ˆå¸Œå†²çªåˆ¤æ–­åï¼Œç”±äºæ—¶é—´ç‰‡è€—å°½æŒ‚èµ·ã€‚çº¿ç¨‹ 2 å…ˆå®Œæˆäº†æ’å…¥æ“ä½œã€‚
- éšåï¼Œçº¿ç¨‹ 1 è·å¾—æ—¶é—´ç‰‡ï¼Œç”±äºä¹‹å‰å·²ç»è¿›è¡Œè¿‡ hash ç¢°æ’çš„åˆ¤æ–­ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šç›´æ¥è¿›è¡Œæ’å…¥ï¼Œè¿™å°±å¯¼è‡´çº¿ç¨‹ 2 æ’å…¥çš„æ•°æ®è¢«çº¿ç¨‹ 1 è¦†ç›–äº†ã€‚
```java
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}

final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
                   boolean evict) {
    // ...
    // åˆ¤æ–­æ˜¯å¦å‡ºç° hash ç¢°æ’
    // (n - 1) & hash ç¡®å®šå…ƒç´ å­˜æ”¾åœ¨å“ªä¸ªæ¡¶ä¸­ï¼Œæ¡¶ä¸ºç©ºï¼Œæ–°ç”Ÿæˆç»“ç‚¹æ”¾å…¥æ¡¶ä¸­(æ­¤æ—¶ï¼Œè¿™ä¸ªç»“ç‚¹æ˜¯æ”¾åœ¨æ•°ç»„ä¸­)
    if ((p = tab[i = (n - 1) & hash]) == null)
        tab[i] = newNode(hash, key, value, null);
    // æ¡¶ä¸­å·²ç»å­˜åœ¨å…ƒç´ ï¼ˆå¤„ç†hashå†²çªï¼‰
    else {
    // ...
}
```

è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯è¿™ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ `put` æ“ä½œå¯¼è‡´ `size` çš„å€¼ä¸æ­£ç¡®ï¼Œè¿›è€Œå¯¼è‡´æ•°æ®è¦†ç›–çš„é—®é¢˜ï¼š

1. çº¿ç¨‹ 1 æ‰§è¡Œ `if(++size > threshold)` åˆ¤æ–­æ—¶ï¼Œå‡è®¾è·å¾— `size` çš„å€¼ä¸º 10ï¼Œç”±äºæ—¶é—´ç‰‡è€—å°½æŒ‚èµ·ã€‚
2. çº¿ç¨‹ 2 ä¹Ÿæ‰§è¡Œ `if(++size > threshold)` åˆ¤æ–­ï¼Œè·å¾— `size` çš„å€¼ä¹Ÿä¸º 10ï¼Œå¹¶å°†å…ƒç´ æ’å…¥åˆ°è¯¥æ¡¶ä½ä¸­ï¼Œå¹¶å°† `size` çš„å€¼æ›´æ–°ä¸º 11ã€‚
3. éšåï¼Œçº¿ç¨‹ 1 è·å¾—æ—¶é—´ç‰‡ï¼Œå®ƒä¹Ÿå°†å…ƒç´ æ”¾å…¥æ¡¶ä½ä¸­ï¼Œå¹¶å°† size çš„å€¼æ›´æ–°ä¸º 11ã€‚
4. çº¿ç¨‹ 1ã€2 éƒ½æ‰§è¡Œäº†ä¸€æ¬¡ `put` æ“ä½œï¼Œä½†æ˜¯ `size` çš„å€¼åªå¢åŠ äº† 1ï¼Œä¹Ÿå°±å¯¼è‡´å®é™…ä¸Šåªæœ‰ä¸€ä¸ªå…ƒç´ è¢«æ·»åŠ åˆ°äº† `HashMap` ä¸­ã€‚
```java
public V put(K key, V value) {
    return putVal(hash(key), key, value, false, true);
}

final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
                   boolean evict) {
    // ...
    // å®é™…å¤§å°å¤§äºé˜ˆå€¼åˆ™æ‰©å®¹
    if (++size > threshold)
        resize();
    // æ’å…¥åå›è°ƒ
    afterNodeInsertion(evict);
    return null;
}
```

`å›ç­”æ€è·¯ï¼š`
	1. å¹¶å‘çš„æƒ…å†µä¸‹å®¹æ˜“å‡ºç°æ­»å¾ªç¯å’Œæ•°æ®ä¸¢å¤±çš„é—®é¢˜ï¼›
	2. æ­»å¾ªç¯ï¼šJDK1.7 é“¾è¡¨å¤´æ’æ³•+æ‰©å®¹å¯¼è‡´çš„
	3. æ•°æ®ä¸¢å¤±ï¼šæ•°æ®è¦†ç›–ã€sizeé”™è¯¯
## 9 HashMap å¸¸è§çš„éå†æ–¹å¼ï¼Ÿ

[HashMap çš„ 7 ç§éå†æ–¹å¼ä¸æ€§èƒ½åˆ†æï¼](https://mp.weixin.qq.com/s/zQBN3UvJDhRTKP6SzcZFKw)

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/385995b3a99713e50247bccbe36f50e3.png)

HashMapÂ **éå†ä»å¤§çš„æ–¹å‘æ¥è¯´ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹ 4 ç±»**ï¼š

1. è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ–¹å¼éå†ï¼›
2. For Each æ–¹å¼éå†ï¼›
3. Lambda è¡¨è¾¾å¼éå†ï¼ˆJDK 1.8+ï¼‰;
4. Streams API éå†ï¼ˆJDK 1.8+ï¼‰ã€‚
    

ä½†æ¯ç§ç±»å‹ä¸‹åˆæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œå› æ­¤å…·ä½“çš„éå†æ–¹å¼åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 7 ç§ï¼š

1. ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›
2. ä½¿ç”¨è¿­ä»£å™¨ï¼ˆIteratorï¼‰KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›
3. ä½¿ç”¨ For Each EntrySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›
4. ä½¿ç”¨ For Each KeySet çš„æ–¹å¼è¿›è¡Œéå†ï¼›
5. ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„æ–¹å¼è¿›è¡Œéå†ï¼›
6. ä½¿ç”¨ Streams API å•çº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ï¼›
7. ä½¿ç”¨ Streams API å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œéå†ã€‚

å…·ä½“è§ï¼š[9_HashMapçš„7ç§éå†æ–¹å¼](9_HashMapçš„7ç§éå†æ–¹å¼.md)
## 10 ConcurrentHashMap å’Œ Hashtable çš„åŒºåˆ«ï¼Ÿ


## 11 ConcurrentHashMap çº¿ç¨‹å®‰å…¨çš„å…·ä½“å®ç°æ–¹å¼/åº•å±‚å…·ä½“å®ç°


## 12 JDK 1.7 å’Œ 1.8 çš„ConcurrentHashMap å®ç°æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ


## 13 ConcurrentHashMap ä¸ºä»€ä¹ˆkeyå’Œvalueä¸èƒ½ä¸ºnullï¼Ÿ


## 14 å¦‚ä½•ä¿è¯ ConcurrentHashMap å¤åˆæ“ä½œçš„åŸå­æ€§å‘¢ï¼Ÿ

