---
文章标题: "[[4_变量]]" 
文章作者: Dakkk
文章概要: |
  文章详细阐述了Java中成员变量与局部变量在语法、存储、生存期及默认值上的核心区别，并解释了成员变量为何有默认值。同时，探讨了静态变量的作用，强调其共享性和内存节省优势，并对比了字符型常量和字符串常量在形式、含义及内存占用上的不同。
文章标签:
- "Java"
- "变量"
- "成员变量"
- "局部变量"
- "静态变量"
- "常量"
- "内存管理"
- "数据类型"
相关文章:
- "[[1_Java基本数据类型]]"
- "[[2_变量与进制]]"
- "[[2_变量与运算符]]"
- "[[0_链表理论基础]]"
- "[[0_C语言提纲]]"
文章分类: "🎉 面试"
文章路径: "11-🎉 面试/1_JavaGuide/1_Java面试题/1_Java基础常见面试题/4_变量.md"
文章难度: 入门 🌱
目前阶段: ✅ 已完成
重要性: ⭐⭐⭐⭐⭐ 精通必备
创建时间: 2024-08-11 18:15:12
修改时间: 2024-08-11 18:15:12
---

## 1 成员变量和局部变量的区别

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/509b97f0f6980479fd33189f9f17bad3.png)

- **语法形式**：从语法形式上看，成员变量是属于类的，而局部变量是在代码块或方法中定义的变量或是方法的参数；成员变量可以被 `public`,`private`,`static` 等修饰符所修饰，而局部变量不能被访问控制修饰符及 `static` 所修饰；但是，成员变量和局部变量都能被 `final` 所修饰。
- **存储方式**：从变量在内存中的存储方式来看，如果成员变量是使用 `static` 修饰的，那么这个成员变量是属于类的，如果没有使用 `static` 修饰，这个成员变量是属于实例的。而对象存在于堆内存，局部变量则存在于栈内存。
- **生存时间**：从变量在内存中的生存时间上看，成员变量是对象的一部分，它随着对象的创建而存在，而局部变量随着方法的调用而自动生成，随着方法的调用结束而消亡。
- **默认值**：从变量是否有默认值来看，成员变量如果没有被赋初始值，则会自动以类型的默认值而赋值（一种情况例外:被 `final` 修饰的成员变量也必须显式地赋值），而局部变量则不会自动赋值。

**为什么成员变量有默认值？**

1. 先不考虑变量类型，如果没有默认值会怎样？变量存储的是内存地址对应的任意随机值，程序读取该值运行会出现意外。
    
2. 默认值有两种设置方式：手动和自动，根据第一点，没有手动赋值一定要自动赋值。成员变量在运行时可借助反射等方法手动赋值，而局部变量不行。
    
3. 对于编译器（javac）来说，局部变量没赋值很好判断，可以直接报错。而成员变量可能是运行时赋值，无法判断，误报“没默认值”又会影响用户体验，所以采用自动赋默认值。
    

成员变量与局部变量代码示例：
```java
public class VariableExample {

    // 成员变量
    private String name;
    private int age;

    // 方法中的局部变量
    public void method() {
        int num1 = 10; // 栈中分配的局部变量
        String str = "Hello, world!"; // 栈中分配的局部变量
        System.out.println(num1);
        System.out.println(str);
    }

    // 带参数的方法中的局部变量
    public void method2(int num2) {
        int sum = num2 + 10; // 栈中分配的局部变量
        System.out.println(sum);
    }

    // 构造方法中的局部变量
    public VariableExample(String name, int age) {
        this.name = name; // 对成员变量进行赋值
        this.age = age; // 对成员变量进行赋值
        int num3 = 20; // 栈中分配的局部变量
        String str2 = "Hello, " + this.name + "!"; // 栈中分配的局部变量
        System.out.println(num3);
        System.out.println(str2);
    }
}


```

`回答思路：`
	语存生默 --- 雨成生默
	1. 语法：成员**属于**类，局部是**在**代码块内部、方法形参、方法内部；成员可以被权限修饰符和static**修饰**，局部不行；都能被final修饰
	2. 存储：static修饰的成员**属于类**（类在方法区），没有static修饰的成员**属于实例**（实例在堆）；局部**存于栈内存**
	3. 生存：成员变量随着对象创建和消失；局部变量随着方法调用而创建和消失；
	4. 默认：成员有默认值，局部没有默认值；
	5. 补充：**为什么成员需要默认值？**
		- 假设没有（程序会出现意外）；
		- 根据上述，没有手动赋值则会自动赋值，还可以通过反射赋值；
		- 对于javac来说，成员变量可能是运行时赋值，无法判断；
## 2 静态变量有什么作用？

静态变量也就是被 `static` 关键字修饰的变量。它可以被类的所有实例共享，无论一个类创建了多少个对象，它们都共享同一份静态变量。也就是说，静态变量只会被分配一次内存，即使创建多个对象，这样可以节省内存。

静态变量是通过类名来访问的，例如`StaticVariableExample.staticVar`（如果被 `private`关键字修饰就无法这样访问了）。

```java
public class StaticVariableExample {
    // 静态变量
    public static int staticVar = 0;
}
```

通常情况下，静态变量会被 `final` 关键字修饰成为常量。

```java
public class ConstantVariableExample {
    // 常量
    public static final int constantVar = 0;
}
```

`回答思路：`
	1. 被static修饰的变量，称为静态变量；
	2. 静态变量在一个类中，只有一份，且被多个对象共享；
	3. 静态变量只能通过类名来访问；
	4. 加上final修饰的话，就变成了常量

## 3 字符型常量和字符串常量的区别？

- **形式** : 字符常量是单引号引起的一个字符，字符串常量是双引号引起的 0 个或若干个字符。
- **含义** : 字符常量相当于一个整型值( ASCII 值),可以参加表达式运算; 字符串常量代表一个地址值(该字符串在内存中存放位置)。
- **占内存大小**：字符常量只占 2 个字节; 字符串常量占若干个字节。

⚠️ 注意 `char` 在 Java 中占两个字节。

字符型常量和字符串常量代码示例：

```java
public class StringExample {
    // 字符型常量
    public static final char LETTER_A = 'A';

    // 字符串常量
    public static final String GREETING_MESSAGE = "Hello, world!";
    public static void main(String[] args) {
        System.out.println("字符型常量占用的字节数为："+Character.BYTES);
        System.out.println("字符串常量占用的字节数为："+GREETING_MESSAGE.getBytes().length);
    }
}
```

输出：

```plain
字符型常量占用的字节数为：2
字符串常量占用的字节数为：13
```

`回答思路：`
	1. 一个字符和多个字符的区别；
	2. 一个整型值（ASCII码）和一个地址值的区别；
	3. 2个字节和多个字节的区别；
