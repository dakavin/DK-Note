在设备树（Device Tree）中，中断相关属性用于描述设备的中断配置及其与中断控制器的关系。以下是四个关键属性的详细说明：

---

### 1. **interrupts 属性**
- **作用**：指定设备产生的中断类型和参数，如中断号、触发方式等。
- **格式**：由父中断控制器的 `interrupt-cells` 决定。例如：
  ```dts
  interrupts = <IRQ_NUM TRIGGER_TYPE>;
  ```
  - **示例**：`interrupts = <5 2>;` 表示中断号为5，触发类型为上升沿触发。
  - **依赖**：每个值的含义由父中断控制器的定义决定。例如，某些控制器可能需要3个cell（如中断号、优先级、触发类型）。

---

### 2. **interrupt-controller 属性**
- **作用**：声明当前节点是一个中断控制器，能够接收和处理子设备的中断请求。
- **类型**：布尔属性（无值），存在即表示有效。
- **示例**：
  ```dts
  gic: interrupt-controller {
      compatible = "arm,gic";
      interrupt-controller;  // 声明为中断控制器
      #interrupt-cells = <3>;
  };
  ```
  - **应用场景**：如GIC、GPIO控制器等具备中断管理能力的硬件。

---

### 3. **interrupt-parent 属性**
- **作用**：指定设备的中断父控制器，即中断信号的物理连接目标。
- **值类型**：指向中断控制器节点的 **phandle**。
- **继承规则**：若未显式指定，则继承父节点的 `interrupt-parent`。
- **示例**：
  ```dts
  uart0: serial@1000 {
      compatible = "ns16550a";
      interrupt-parent = <&gic>;  // 指向GIC控制器
      interrupts = <10 1>;
  };
  ```
  - **注意**：层级中断控制器需逐级指向（如GPIO中断控制器→GIC）。

---

### 4. **interrupt-cells 属性**
- **作用**：定义描述该控制器管理的中断所需的 **cell 数量**（即参数个数）。
- **位置**：仅出现在中断控制器节点中。
- **示例**：
  ```dts
  gpio0: gpio-controller {
      interrupt-controller;
      #interrupt-cells = <2>;  // 每个中断用2个cell描述
  };
  ```
  - **典型值**：
    - **2 cells**：中断号 + 触发类型（如 `0x1` 表示边沿触发）。
    - **3 cells**：可能包含优先级或额外标志（如ARM GIC）。

---

### **总结与关系**
- **层级结构**：设备的中断通过 `interrupt-parent` 指向控制器，控制器通过 `#interrupt-cells` 定义参数格式，设备用 `interrupts` 提供具体值。
- **示例拓扑**：
  ```dts
  // 顶级中断控制器（如GIC）
  gic: interrupt-controller {
      interrupt-controller;
      #interrupt-cells = <3>;
  };

  // 次级中断控制器（如GPIO）
  gpio0: gpio-controller {
      interrupt-controller;
      #interrupt-cells = <2>;
      interrupt-parent = <&gic>;  // 自身中断上报至GIC
      interrupts = <0 10 4>;      // 参数格式由GIC的3 cells决定
  };

  // 终端设备
  button {
      interrupt-parent = <&gpio0>;  // 指向GPIO控制器
      interrupts = <3 1>;          // 参数格式由GPIO的2 cells决定
  };
  ```

通过合理配置这些属性，设备树能够精确描述复杂的中断拓扑关系，确保操作系统正确初始化中断处理逻辑。