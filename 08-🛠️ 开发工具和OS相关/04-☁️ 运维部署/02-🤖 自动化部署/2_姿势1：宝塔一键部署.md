---
æ–‡ç« æ ‡é¢˜: "[[2_å§¿åŠ¿1ï¼šå®å¡”ä¸€é”®éƒ¨ç½²]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« è¯¦ç»†æŒ‡å¯¼å¦‚ä½•ä½¿ç”¨å®å¡”é¢æ¿ä¸€é”®éƒ¨ç½²å‰ç«¯ï¼ˆæ— åŸŸå/å¸¦åŸŸåSSLï¼‰å’Œåç«¯Javaï¼ˆæ— åŸŸå/å¸¦åŸŸåSSLï¼‰é¡¹ç›®ã€‚é€šè¿‡å›¾æ–‡å¹¶èŒ‚çš„æ­¥éª¤ï¼Œæ¶µç›–äº†Nginxå¯åŠ¨ã€ç«™ç‚¹æ·»åŠ ã€æ–‡ä»¶ä¸Šä¼ ã€åŸŸåé…ç½®ã€SSLè¯ä¹¦å®‰è£…åŠåå‘ä»£ç†è®¾ç½®ï¼Œå®ç°å¤šé¡¹ç›®å¿«é€Ÿéƒ¨ç½²ã€‚
tags:
- "å®å¡”é¢æ¿"
- "Webéƒ¨ç½²"
- "å‰ç«¯éƒ¨ç½²"
- "åç«¯éƒ¨ç½²"
- "Nginx"
- "SSLè¯ä¹¦"
- "åŸŸåé…ç½®"
- "Java"
ç›¸å…³æ–‡ç« :
- "[[7_Part5ï¼ˆéƒ¨ç½²ï¼‰]]"
- "[[4_å§¿åŠ¿3ï¼šä½¿ç”¨ GitHub Actionï¼ˆå‰ç«¯é¡¹ç›®ï¼‰]]"
- "[[0_åŸºç¡€åŠ å¼º]]"
- "[[0_å‰ç½®çŸ¥è¯†å¿«é€Ÿå›é¡¾]]"
- "[[0_try catch finallyåŸç†]]"
æ–‡ç« åˆ†ç±»: "ğŸ› ï¸ å¼€å‘å·¥å…·å’ŒOSç›¸å…³"
æ–‡ç« è·¯å¾„: "08-ğŸ› ï¸ å¼€å‘å·¥å…·å’ŒOSç›¸å…³/04-â˜ï¸ è¿ç»´éƒ¨ç½²/02-ğŸ¤– è‡ªåŠ¨åŒ–éƒ¨ç½²/2_å§¿åŠ¿1ï¼šå®å¡”ä¸€é”®éƒ¨ç½².md"
æ–‡ç« éš¾åº¦: å…¥é—¨ ğŸŒ±
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-28 01:03:09
---

**éœ€è¦è¿è¡Œæœ¬åœ°çš„nginxæœåŠ¡ï¼Œå…³é—­Dockerçš„nginxå®¹å™¨!!!**
## 1 å•ä¸ªé¡¹ç›®éƒ¨ç½²

### 1.1 å‰ç«¯ï¼ˆæ— åŸŸåï¼‰

**æ‰“å¼€Linuxæœ¬åœ°çš„nginxæœåŠ¡**

æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨å®å¡”ç•Œé¢æ‰“å¼€
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/29b72f1cdcc58b76e4252d2204c8e5e3.png)

æ–¹å¼äºŒï¼šåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ‰“å¼€ï¼ˆç¡®ä¿æœ¬åœ°nginxå·²ç»å®‰è£…ï¼‰
```shell
# æ£€æŸ¥nginxæ˜¯å¦å·²å®‰è£…
nginx -v
# å¯åŠ¨nginxæœåŠ¡
sudo systemctl start nginx
# æ£€æŸ¥nginxæœåŠ¡çŠ¶æ€
sudo systemctl status nginx
```

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/3c7cca99f9859a9944fd391ed8e81740.png)

---

**å›åˆ°å®å¡”é¢æ¿ï¼Œç‚¹å‡»æ·»åŠ ç«™ç‚¹**

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/35e9c23531f858104eafe75c5b666fd6.png)

> æ³¨æ„ï¼šå°†`1.1.1.1` æ”¹æˆè‡ªå·±çš„æœåŠ¡å™¨ipåœ°å€ï¼ï¼ï¼

> è¡¥å……ï¼šå› ä¸ºè®¾ç½®äº†è‡ªå·±çš„æœåŠ¡å™¨ipåœ°å€ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼åªèƒ½éƒ¨ç½²ä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œåªæœ‰ç»™æ¯ä¸ªå‰ç«¯é¡¹ç›®è®¾ç½®å•ç‹¬çš„åŸŸååï¼Œæ‰èƒ½éƒ¨ç½²å¤šä¸ªå‰ç«¯é¡¹ç›®


**è¿›å…¥åˆ°ç«™ç‚¹çš„ç›®å½•**

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/bf198b7834d3917a2990959dee21cf2c.png)


**å…¨é€‰æ–‡ä»¶åˆ é™¤æ‰æ— ç”¨æ–‡ä»¶ï¼**

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/da82fa1218619434a02fd5f207ad3749.png)


ç„¶åç›´æ¥æŠŠå‰ç«¯æ‰“åŒ…å¥½çš„é¡¹ç›®distï¼Œæ‰”è¿›å»ï¼

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/7409d36a413ffde62aebdc06393e5389.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/821e804e75d8d235f4e539fd34c0f804.png)


ç›´æ¥åœ¨æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨ipåœ°å€ï¼Œè®¿é—®ã€‚å¯ä»¥çœ‹åˆ°è®¿é—®æˆåŠŸ

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/ead75f6bd2ce65c7cf137067980f3199.png)


### 1.2 å‰ç«¯ï¼ˆé…ç½®åŸŸåå’ŒSSLè¯ä¹¦ï¼‰

å…³äºåŸŸåå’ŒSSLè¯ä¹¦çš„ç”³è¯·ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ï¼Œå„ä½å¯ä»¥è‡ªè¡Œç™¾åº¦æˆ–è€…åœ¨å¯¹åº”çš„äº‘å‚å•†æœç´¢æ•™ç¨‹ï¼

é¦–å…ˆï¼Œå®Œæˆè‡ªå·±çš„åŸŸåè§£æ

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/378efd949153b0b894005da46172b954.png)

- www.dakkk.top å’Œ dakkk.top è¿™ä¸¤ä¸ªåŸŸåï¼Œä½œä¸ºhomeå‰ç«¯é¡¹ç›®çš„åŸŸå
- usercenter.dakkk.top è¿™ä¸ªåŸŸåï¼Œä½œä¸ºusercenterå‰ç«¯é¡¹ç›®çš„åŸŸå
- usercenter-backend è¿™ä¸ªåŸŸåï¼Œä½œä¸ºusercenter-backendåç«¯é¡¹ç›®çš„åŸŸå

ç„¶åï¼Œç”³è¯·SSLè¯ä¹¦ï¼Œç”³è¯·å®Œæˆåçš„æˆªå›¾å¦‚ä¸‹
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/5de28beb80ac762794fdb84448025658.png)

---

**ç»™homeé¡¹ç›®ï¼Œæ·»åŠ åŸŸå**

è¿˜æ˜¯å®å¡”ç•Œé¢ï¼Œç‚¹å‡»åé¢çš„è®¾ç½®é€‰é¡¹ï¼Œç„¶ååœ¨åŸŸåç®¡ç†ä¸­æ·»åŠ åŸŸå

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/bb5752381cc4226aaaf7e19278f625c7.png)


åˆ é™¤ä¹‹å‰çš„æœåŠ¡å™¨ipåœ°å€ä½œä¸ºåŸŸåçš„é€‰é¡¹

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/68f0019ec9f61283427a7945b23c00aa.png)

å°è¯•åŸŸåè®¿é—®ï¼Œå¯ä»¥å‘ç°ä½¿ç”¨åŸŸåå¯ä»¥å®Œæˆè®¿é—®ï¼Œä¸è¿‡é¡µé¢æ˜¾ç¤ºä¸å®‰å…¨çš„

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/5d42c76494d7182c4a3cc4e302e80086.png)

---

ç»™homeé¡¹ç›®ï¼Œæ·»åŠ SSLè¯ä¹¦

åœ¨å¯¹åº”äº‘æœåŠ¡å‚å•†çš„è¯ä¹¦é¡µé¢ï¼Œç‚¹å‡»ä¸‹è½½è¯ä¹¦
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/67d41f1e1cc4f50fa8d770fc657379d4.png)

ä¸‹è½½åå¦‚ä¸‹å›¾æ‰€ç¤º

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/313882faff2874936135fc8e3a9a91f1.png)

è¿˜æ˜¯å›åˆ°å®å¡”ç•Œé¢ï¼Œè®¾ç½®é¡¹ï¼Œé€‰æ‹©SSLï¼Œå½“å‰è¯ä¹¦é€‰é¡¹ï¼Œç„¶åå°†ç§˜é’¥Key å’Œ pemæ–‡ä»¶çš„å†…å®¹å…¨é€‰å¤åˆ¶è¿‡å»å³å¯

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/2a42363d309e7f0c293710eae2898775.png)

å†æ¬¡è®¿é—®ï¼Œå¯ä»¥å‘ç°ï¼Œç«™ç‚¹å˜æˆå®‰å…¨çš„äº†

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/4669ddd6490b616e031c88239d0ab60d.png)


### 1.3 åç«¯ï¼ˆæ— åŸŸåï¼‰

æ‰¾åˆ°ä¾§è¾¹æ çš„æ–‡ä»¶ï¼Œæ¥åˆ°wwwrootç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªusercenter-backendç›®å½•ï¼Œç”¨äºå­˜æ”¾æˆ‘ä»¬åç«¯é¡¹ç›®

![image.png|200|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/2a31961742c4773fcb51fdac5187551c.png)

è¿›å…¥è¿™ä¸ªé¡¹ç›®ï¼ŒæŠŠä¹‹å‰æ‰“åŒ…å¥½çš„jaråŒ…ï¼Œæ”¾è¿›å»

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/bfec7dea537189d9ff90daa23e259b29.png)

å¤åˆ¶è¯¥jaråŒ…æ‰€åœ¨çš„è·¯å¾„ï¼Œç„¶ååœ¨å®å¡”ç•Œé¢ç½‘ç«™-Javaé¡¹ç›®-æ·»åŠ Javaé¡¹ç›®

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/66383a7dfb758bb5e7873a2bfeb30a1d.png)

- é¡¹ç›®æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼šï¼ˆå¯ä»¥æ ¹æ®è‡ªå·±çš„è¦æ±‚è°ƒæ•´ï¼‰
```shell
/usr/bin/java  -jar -Xmx1024M -Xms256M  /www/wwwroot/usercenter-backend/usercenter-backend-0.0.1-SNAPSHOT.jar --server.port=8080 --spring.profiles.active=prod
```


> å¦‚æœå‘ç°é¡¹ç›®è¿è¡Œä¸­ï¼Œä½†æ˜¯ç«¯å£è¿˜æ²¡æœ‰æ”¾è¡Œ![image.png|200|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/cee8f76b84d00a27065c76b9334edeb0.png)
  åˆ™éœ€è¦å…ˆæŠŠtomcatåœæ‰ï¼Œå¦åˆ™tomcatå ç”¨8080ç«¯å£![image.png|200|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/a17e9afe5b67f2818e176d721a63fa03.png)
  è¿˜éœ€è¦é˜²ç«å¢™ï¼ŒæŠŠ8080ç«¯å£æ”¾è¡Œ![image.png|200|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/bb8be2b7170adf61486e8cd661f3aaa1.png)

è®¿é—®ä¸€ä¸‹`æœåŠ¡å™¨ipï¼š8080`ï¼Œå¯ä»¥å‘ç°æ­£å¸¸è®¿é—®

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/35905b662e0d8e473342e97908efcfed.png)

> å¦‚æœå‘ç°ï¼Œé¡¹ç›®æ— æ³•è®¿é—®ï¼Œå¯ä»¥åœ¨é¡¹ç›®çš„ application-prod.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®
> ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/0686b34ae204e0b0ddfff3be83ce4af0.png)
> è§£é‡Šï¼šå…è®¸ä»»ä½•å¯ä»¥è®¿é—®äº‘æœåŠ¡å™¨çš„å¤–éƒ¨è®¾å¤‡æˆ–æœåŠ¡è¿æ¥åˆ°è¯¥åç«¯é¡¹ç›®

### 1.4 åç«¯ï¼ˆå¸¦åŸŸåå’ŒSSLï¼‰

æˆ‘ä»¬å¯ä»¥ç»™åç«¯é¡¹ç›®æ·»åŠ ä¸€ä¸ªåŸŸå

è¿˜æ˜¯é¡¹ç›®è®¾ç½®-åŸŸåç®¡ç†

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/243c8f5ba66f8a41807a06172992c4df.png)

å¯ä»¥å‘ç°ï¼Œé€šè¿‡åŸŸåä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®åç«¯é¡¹ç›®

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/1663b49bcfc6dc42a6e02d7c5848f88d.png)

ç”±äºå¸¦ä¸ª8080ç«¯å£å·ï¼Œä¸å¥½çœ‹ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸‹åå‘ä»£ç†

è¿˜æ˜¯å®å¡”è®¾ç½®ç•Œé¢ï¼Œç„¶åå¼€å¯å¤–ç½‘æ˜ å°„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/2b6ee6ef914061755d6202d1eddc47fa.png)

ç‚¹å‡»é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å‘ç°ï¼Œå®å¡”è‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®äº†åå‘ä»£ç†

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/c3a6474b85a47e93721d1f6de2dfb752.png)

è¯ä¹¦çš„è®¾ç½®è¿˜æ˜¯è€åŠæ³•ï¼Œåœ¨å®å¡”åç«¯é¡¹ç›®è®¾ç½®é¡µé¢ï¼Œé€‰æ‹©SSLï¼Œå¤åˆ¶å¯¹åº”çš„KEYå’ŒPEMå³å¯

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/f0d3bff6c340b1f662b54c97ac038a68.png)

å†æ¬¡è®¿é—®ï¼Œå¯ä»¥å‘ç°ç«™ç‚¹æ˜¯å®‰å…¨çš„äº†

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/619d9c83f878a53ba5f0db2b56bc030c.png)

## 2 å¤šä¸ªé¡¹ç›®éƒ¨ç½²

åœ¨æ“ä½œå®å¡”ç•Œé¢éƒ¨ç½²å‰ç«¯é¡¹ç›®çš„æ—¶å€™ï¼Œåº•å±‚å·²ç»å¸®æˆ‘ä»¬ç¼–å†™å¥½nginxé…ç½®æ–‡ä»¶äº†

æ‰€ä»¥ï¼Œæˆ‘ä»¬**ç»§ç»­éƒ¨ç½²usercenterå‰ç«¯é¡¹ç›®**çš„æ—¶å€™ï¼Œç›´æ¥æŒ‰ç…§ä¸Šé¢homeé¡¹ç›®çš„éƒ¨ç½²æ–¹å¼éƒ¨ç½²å³å¯

ä¸‹é¢ï¼Œæˆ‘ä»¬ç›´æ¥éƒ¨ç½²usercenter

---

é€‰æ‹©PHPé¡¹ç›®ï¼Œç›´æ¥æ·»åŠ ç«™ç‚¹ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼ˆç›´æ¥å°†åŸŸåä¹Ÿå†™å¥½ï¼‰

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/6692529a0a643564d959cfaf125dbeed.png)

è¿›å…¥ `/www/wwwroot/usercenter` ç›®å½•ï¼Œåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œç”Ÿæˆusercenterå‰ç«¯é¡¹ç›®ï¼Œæ‰“åŒ…å¥½çš„distæ–‡ä»¶

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/c62bdb7e3fa9ec2c4216bb4aacba050c.png)

ç›´æ¥å°†SSLè¯ä¹¦ä¹Ÿé…å¥½

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/fa02ab354f2a8dbfcf18da8c55f824e0.png)

è®¿é—® usercenter.dakkk.top ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®ï¼Œå¹¶ä¸”ç«™ç‚¹æ˜¯å®‰å…¨çš„

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/6d8ba7aea70729207cfa484beced5ce0.png)

## æ€»ç»“

æ­¤æ—¶æˆ‘ä»¬å·²ç»å®Œæˆäº† 2ä¸ªå‰ç«¯é¡¹ç›® å’Œ 1ä¸ªåç«¯é¡¹ç›® çš„éƒ¨ç½²å·¥ä½œå•¦

å¹¶ä¸”å¯¹æ¯ä¸ªé¡¹ç›®éƒ½é…ç½®äº†åŸŸåå’ŒSSLè¯ä¹¦

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/fe55bf161aee3c8d477b6edbeb45afef.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/85cd770abddb21562f5ceae080bd40f9.png)

ä½¿ç”¨å®å¡”æ˜¯æœ€ç®€å•çš„ï¼Œä¸éœ€è¦ç†è§£nginxçš„å…·ä½“åŸç†ï¼Œåªéœ€è¦æŒ‰ç…§å®å¡”çš„å¯è§†åŒ–æ“ä½œå³å¯

ä¸è¿‡åšä¸»è§‰å¾—éƒ¨ç½²çš„æ—¶å€™ï¼Œè¿˜è¦ä¸Šä¼ å¯¹åº”çš„distæ–‡ä»¶å¤¹å’ŒjaråŒ…ï¼Œæ„Ÿè§‰å¤ªéº»çƒ¦äº†ï¼Œä¹Ÿä¸åˆ©äºåæœŸç»´æŠ¤å’Œéƒ¨ç½²ï¼Œæ‰€ä»¥åç»­æˆ‘ä»¬å°†ä½¿ç”¨Dockeræ¥å°è¯•å°è¯•éƒ¨ç½²è¿™äº›é¡¹ç›®