---
æ–‡ç« æ ‡é¢˜: "[[6_ğŸ“•æ–‡ç« ç®¡ç†ï¼šè·å–æ–‡ç« è¯¦æƒ…æ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« è¯¦ç»†é˜è¿°äº†æ–‡ç« ç®¡ç†æ¨¡å—ä¸­â€œè·å–æ–‡ç« è¯¦æƒ…â€æ¥å£çš„åç«¯å¼€å‘è¿‡ç¨‹ã€‚å†…å®¹æ¶µç›–UIåŸå‹åˆ†æã€æ¥å£å‡ºå…¥å‚å®šä¹‰ã€Java VOå®ä½“åˆ›å»ºã€Mapperæ–¹æ³•å°è£…ã€MapStructæ•°æ®è½¬æ¢ã€Serviceå±‚ä¸šåŠ¡é€»è¾‘å®ç°åŠControlleræ¥å£æš´éœ²ï¼Œå¹¶è¿›è¡Œäº†æµ‹è¯•éªŒè¯ã€‚
æ–‡ç« æ ‡ç­¾:
- "APIå¼€å‘"
- "Java"
- "Spring Boot"
- "RESTfulæ¥å£"
- "åç«¯å¼€å‘"
- "æ–‡ç« ç®¡ç†"
- "MyBatis-Plus"
- "MapStruct"
ç›¸å…³æ–‡ç« :
- "[[4_ğŸ“•æ–‡ç« ç®¡ç†ï¼šæ–‡ç« åˆ é™¤æ¥å£å¼€å‘]]"
- "[[2_ğŸ“•æ–‡ç« ç®¡ç†ï¼šæ–‡ç« å‘å¸ƒæ¥å£å¼€å‘ï¼ˆ1ï¼‰]]"
- "[[6_ğŸ“•åšå®¢è®¾ç½®ï¼šè·å–è¯¦æƒ…æ¥å£å¼€å‘]]"
- "[[4_ğŸ“•åšå®¢è®¾ç½®ï¼šæ›´æ–°æ¥å£å¼€å‘]]"
- "[[0_å¯¼è¯»]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/8_ç®¡ç†åå°ï¼šæ–‡ç« æ¨¡å—å¼€å‘/6_ğŸ“•æ–‡ç« ç®¡ç†ï¼šè·å–æ–‡ç« è¯¦æƒ…æ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-04-30 14:41:15
ä¿®æ”¹æ—¶é—´: 2025-05-27 00:58:05
---

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠæ–‡ç« ç®¡ç†æ¨¡å—çš„ç¬¬å››ä¸ªæ¥å£å¼€å‘å®Œæˆ â€”â€”Â _è·å–æ–‡ç« è¯¦æƒ…æ¥å£_ã€‚

## 1 UI åŸå‹å›¾

åŸå‹å›¾å¦‚ä¸‹ï¼Œå½“æˆ‘ä»¬ç¼–è¾‘æŸç¯‡æ–‡ç« æ—¶ï¼Œå‰ç«¯éœ€è¦è¯·æ±‚è¯¥æ¥å£ï¼Œè·å–æ–‡ç« è¯¦æƒ…æ•°æ®æ¸²æŸ“åˆ°ç¼–è¾‘å¯¹è¯æ¡†ä¸­ï¼Œä¾›ç”¨æˆ·ä¿®æ”¹ã€‚

![](https://img.quanxiaoha.com/quanxiaoha/169728226624634)

## 2 æ¥å£ã€å‡ºå…¥å‚æ ¼å¼å®šä¹‰

çœ‹äº†Â `UI`Â åŸå‹å›¾åï¼Œæˆ‘ä»¬å¤§è‡´çŸ¥é“äº†åç«¯æ¥å£éœ€è¦è¿”å›å“ªäº›æ•°æ®ç»™å‰ç«¯ã€‚ä»¥æ­¤æ¥è®¾è®¡è·å–æ–‡ç« è¯¦æƒ…æ¥å£çš„å‡ºå…¥å‚æ•°æ®ï¼š

### 2.1 æ¥å£è·¯å¾„

```http
POST /admin/article/detail
```

### 2.2 å…¥å‚

å…¥å‚Â `JSON`Â æ ¼å¼ï¼š

```json
{
  "id": 1 // æ–‡ç«  ID
}
```

### 2.3 å‡ºå‚

å‡ºå‚Â `JSON`Â æ ¼å¼ï¼š

```json
{
  "success": true,
  "message": null,
  "errorCode": null,
  "data": {
      "id": 12, // æ–‡ç«  ID
      "title": "", // æ–‡ç« æ ‡é¢˜
      "cover": "", // æ–‡ç« å°é¢
      "content": "", // æ–‡ç« å†…å®¹
      "summary": "", // æ–‡ç« æ‘˜è¦
      "categoryId": 1, // åˆ†ç±» ID
      "tagIds": [1, 2, 3], // æ ‡ç­¾ ID é›†åˆ
  }
}
```

æ³¨æ„åœ¨è¿”å‚ä¸­ï¼Œé’ˆå¯¹æ–‡ç« æ‰€å±çš„åˆ†ç±»ï¼Œä»¥åŠæ‰€æ‰“çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬åªéœ€è¦è¿”å›å¯¹åº”çš„Â `ID`Â å³å¯ï¼Œå‰ç«¯è¿˜éœ€è¦å¦å¤–è¯·æ±‚è·å–åˆ†ç±»Â `Select`Â åˆ—è¡¨æ•°æ®æ¥å£ï¼Œä»¥åŠè·å–æ‰€æœ‰æ ‡ç­¾Â `Select`Â æ•°æ®æ¥å£ï¼Œç„¶åé€šè¿‡Â `ID`Â æ¥åˆ¤æ–­è¦é€‰ä¸­å“ªä¸ªåˆ†ç±»ï¼Œå“ªäº›ä¸ªæ ‡ç­¾ã€‚

## 3 åˆ›å»ºå‡ºå…¥å‚ VO

![](https://img.quanxiaoha.com/quanxiaoha/169729605633875)

å‡ºå…¥å‚Â `JSON`Â æ ¼å¼çŸ¥é“å, æˆ‘ä»¬æ¥åˆ›å»ºå¯¹åº”çš„Â `VO`Â å®ä½“ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

### 3.1 å…¥å‚ VO

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@ApiModel(value = "æŸ¥è¯¢æ–‡ç« è¯¦æƒ…å…¥å‚ VO")
public class FindArticleDetailReqVO {

    /**
     * æ–‡ç«  ID
     */
    @NotNull(message = "æ–‡ç«  ID ä¸èƒ½ä¸ºç©º")
    private Long id;

}
```

### 3.2 å‡ºå‚ VO

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class FindArticleDetailRspVO {

    /**
     * æ–‡ç«  ID
     */
    private Long id;

    /**
     * æ–‡ç« æ ‡é¢˜
     */
    private String title;

    /**
     * æ–‡ç« å°é¢
     */
    private String cover;

    /**
     * æ–‡ç« å†…å®¹
     */
    private String content;

    /**
     * åˆ†ç±» ID
     */
    private Long categoryId;

    /**
     * æ ‡ç­¾ ID é›†åˆ
     */
    private List<Long> tagIds;
	
	/**
     * æ‘˜è¦
     */
    private String summary;

}
```

## 4 å°è£… Mapper æ–¹æ³•

è¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦ç»™å‡ ä¸ªÂ `Mapper`Â æ¥å£å°è£…å‡ ä¸ªæ ¹æ®æ–‡ç« Â `ID`Â æŸ¥è¯¢æ•°æ®çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æ–‡ç« å†…å®¹ã€æ–‡ç« -åˆ†ç±»å…³è”å…³ç³»ã€æ–‡ç« -æ ‡ç­¾å…³è”å…³ç³»ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface ArticleContentMapper extends BaseMapper<ArticleContentDO> {

	// çœç•¥...

    /**
     * æ ¹æ®æ–‡ç«  ID æŸ¥è¯¢
     * @param articleId
     * @return
     */
    default ArticleContentDO selectByArticleId(Long articleId) {
        return selectOne(Wrappers.<ArticleContentDO>lambdaQuery()
                .eq(ArticleContentDO::getArticleId, articleId));
    }
}
```

```java
public interface ArticleCategoryRelMapper extends BaseMapper<ArticleCategoryRelDO> {

	// çœç•¥...

    /**
     * æ ¹æ®æ–‡ç«  ID æŸ¥è¯¢
     * @param articleId
     * @return
     */
    default ArticleCategoryRelDO selectByArticleId(Long articleId) {
        return selectOne(Wrappers.<ArticleCategoryRelDO>lambdaQuery()
                .eq(ArticleCategoryRelDO::getArticleId, articleId));
    }
}
```

```java
public interface ArticleTagRelMapper extends InsertBatchMapper<ArticleTagRelDO> {

	// çœç•¥...

    /**
     * æ ¹æ®æ–‡ç«  ID æ¥æŸ¥è¯¢
     * @param articleId
     * @return
     */
    default List<ArticleTagRelDO> selectByArticleId(Long articleId) {
        return selectList(Wrappers.<ArticleTagRelDO>lambdaQuery()
                .eq(ArticleTagRelDO::getArticleId, articleId));
    }
}
```

## 5 æ–°å»º Mapstruct è½¬æ¢æ¥å£

æ¥ç€ï¼Œæˆ‘ä»¬å†å°è£…ä¸€ä¸ªÂ `Mapstruct`Â è½¬æ¢æ¥å£ï¼Œåœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `/convert`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `ArticleDetailConvert`Â æ¥å£ï¼Œç”¨äºå°†æ•°æ®åº“Â `DO`Â ç±»è½¬æ¢ä¸ºÂ `VO`Â è§†å›¾ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169729499454515)

```java
// æ³¨æ„æ˜¯ org.mapstruct.Mapper è¿™ä¸ªåŒ…ä¸‹çš„Mapperæ³¨è§£
@Mapper
public interface ArticleDetailConvert {
    /**
     * åˆå§‹åŒ– convert å®ä¾‹
     */
    ArticleDetailConvert INSTANCE = Mappers.getMapper(ArticleDetailConvert.class);

    /**
     * å°† DO è½¬åŒ–ä¸º VO
     * @param bean
     * @return
     */
    FindArticleDetailRspVO convertDO2VO(ArticleDO bean);

}
```

## 6 æ·»åŠ  service å±‚ä¸šåŠ¡æ–¹æ³•

ç„¶åï¼Œåœ¨Â `AdminArticleService`Â ä¸šåŠ¡å±‚æ¥å£ä¸­ï¼Œå£°æ˜ä¸€ä¸ªæŸ¥è¯¢æ–‡ç« è¯¦æƒ…çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface AdminArticleService {

	// çœç•¥...

    /**
     * æŸ¥è¯¢æ–‡ç« è¯¦æƒ…
     * @param findArticleDetailReqVO
     * @return
     */
    Response findArticleDetail(FindArticleDetailReqVO findArticleDetailReqVO);
}
```

åœ¨å…¶å®ç°ç±»Â `AdminArticleServiceImpl`Â ä¸­å®ç°è¯¥æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
    /**
     * æŸ¥è¯¢æ–‡ç« è¯¦æƒ…
     *
     * @param findArticlePageListReqVO
     * @return
     */
    @Override
    public Response findArticleDetail(FindArticleDetailReqVO findArticleDetailReqVO) {
        Long articleId = findArticleDetailReqVO.getId();

        ArticleDO articleDO = articleMapper.selectById(articleId);

        if (Objects.isNull(articleDO)) {
            log.warn("==> æŸ¥è¯¢çš„æ–‡ç« ä¸å­˜åœ¨ï¼ŒarticleId: {}", articleId);
            throw new BizException(ResponseCodeEnum.ARTICLE_NOT_FOUND);
        }

        ArticleContentDO articleContentDO = articleContentMapper.selectByArticleId(articleId);

        // æ‰€å±åˆ†ç±»
        ArticleCategoryRelDO articleCategoryRelDO = articleCategoryRelMapper.selectByArticleId(articleId);

        // å¯¹åº”æ ‡ç­¾
        List<ArticleTagRelDO> articleTagRelDOS = articleTagRelMapper.selectByArticleId(articleId);
        // è·å–å¯¹åº”æ ‡ç­¾ ID é›†åˆ
        List<Long> tagIds = articleTagRelDOS.stream().map(ArticleTagRelDO::getTagId).collect(Collectors.toList());

        // DO è½¬ VO
        FindArticleDetailRspVO vo = ArticleDetailConvert.INSTANCE.convertDO2VO(articleDO);
        vo.setContent(articleContentDO.getContent());
        vo.setCategoryId(articleCategoryRelDO.getCategoryId());
        vo.setTagIds(tagIds);

        return Response.success(vo);
    }
```

ä¸Šè¿°æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡æ–‡ç« Â `ID`Â å»æŸ¥è¯¢æ–‡ç« ï¼Œè‹¥æ–‡ç« ä¸å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªä¸šåŠ¡å¼‚å¸¸ï¼Œæç¤ºæ–‡ç« ä¸å­˜åœ¨çš„é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœæ–‡ç« å­˜åœ¨ï¼Œåˆ™ç»§ç»­æŸ¥è¯¢åç»­çš„æ•°æ®ï¼Œå¦‚æ–‡ç« å†…å®¹ã€æ–‡ç« æ‰€å±åˆ†ç±»ã€å¯¹åº”çš„æ ‡ç­¾ç­‰ï¼Œæœ€ç»ˆé€šè¿‡Â `ArticleDetailConvert.INSTANCE.convertDO2VO()`Â æ–¹æ³•å°†Â `DO`Â ç±»è½¬æ¢ä¸ºÂ `VO`Â è§†å›¾ç±»ï¼Œå¹¶è¿”å›ä¸€ä¸ªæˆåŠŸå“åº”ã€‚

### 6.1 æ·»åŠ å…¨å±€å¼‚å¸¸æšä¸¾

åˆ«å¿˜äº†åœ¨Â `ResponseCodeEnum`Â å…¨å±€æšä¸¾ä¸­ï¼Œæ·»åŠ Â _è¯¥æ–‡ç« ä¸å­˜åœ¨ï¼_Â çš„æšä¸¾å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
ARTICLE_NOT_FOUND("20010", "è¯¥æ–‡ç« ä¸å­˜åœ¨ï¼"),
```

## 7 æ·»åŠ  controller æ¥å£

æœ€åï¼Œæˆ‘ä»¬åœ¨Â `AdminArticleController`Â æ§åˆ¶å™¨ä¸­ï¼Œæ·»åŠ Â `admin/article/detail`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
    @PostMapping("/detail")
    @ApiOperation(value = "æŸ¥è¯¢æ–‡ç« è¯¦æƒ…")
    @ApiOperationLog(description = "æŸ¥è¯¢æ–‡ç« è¯¦æƒ…")
    public Response findArticleDetail(@RequestBody @Validated FindArticleDetailReqVO findArticlePageListReqVO) {
        return articleService.findArticleDetail(findArticlePageListReqVO);
    }
```

## 8 æµ‹è¯•çœ‹çœ‹

æ¥å£å¼€å‘å®Œæ¯•åï¼Œé‡å¯é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®Â `/doc.html`, è°ƒè¯•ä¸€æ³¢è¯¥æ¥å£ï¼Œçœ‹çœ‹åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚

### 8.1 æŸ¥è¯¢ä¸€ç¯‡ä¸å­˜åœ¨çš„æ–‡ç« 

å…¥å‚ï¼š

```java
{
  "id": 0
}
```

![](https://img.quanxiaoha.com/quanxiaoha/169729552184627)

å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ç¯‡è¡¨ä¸­ä¸å­˜åœ¨çš„æ–‡ç« æ—¶ï¼ŒæˆåŠŸå“åº”ç›¸å…³é”™è¯¯æç¤ºã€‚

### 8.2 æŸ¥è¯¢ä¸€ç¯‡å­˜åœ¨çš„æ–‡ç« 

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥æµ‹è¯•ä¸€ä¸‹æŸ¥è¯¢è¡¨ä¸­å­˜åœ¨çš„æ–‡ç« ï¼Œå…¥å‚ï¼š

```java
{
  "id": 11
}
```

![](https://img.quanxiaoha.com/quanxiaoha/169729570972691)

å¯¹äºè¡¨ä¸­å­˜åœ¨çš„æ–‡ç« ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸è¿”å›å¯¹åº”çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡ç« æ ‡é¢˜ã€å†…å®¹ã€å°é¢ã€åˆ†ç±»Â `ID`Â ä»¥åŠæ ‡ç­¾é›†åˆã€‚

## 9 ç»“è¯­

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬æŠŠæ–‡ç« ç®¡ç†æ¨¡å—çš„ç¬¬å››ä¸ªæ¥å£å¼€å‘å®Œæˆäº† â€”â€”Â _è·å–æ–‡ç« è¯¦æƒ…æ¥å£_ã€‚è¯¥æ¥å£ä¸»è¦ç”¨äºå½“ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘æ–‡ç« æŒ‰é’®åï¼Œå‰ç«¯éœ€è¦æ‹¿åˆ°æ–‡ç« è¯¦æƒ…æ•°æ®ï¼Œå¹¶æ¸²æŸ“åˆ°ç¼–è¾‘æ¡†ä¸­ï¼Œä¾›ç”¨æˆ·ä¿®æ”¹ä½¿ç”¨ã€‚