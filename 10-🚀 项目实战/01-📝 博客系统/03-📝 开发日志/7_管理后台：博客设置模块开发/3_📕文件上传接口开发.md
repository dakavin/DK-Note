---
æ–‡ç« æ ‡é¢˜: "[[3_ğŸ“•æ–‡ä»¶ä¸Šä¼ æ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æœ¬æ–‡è¯¦ç»†æŒ‡å¯¼åœ¨Spring Booté¡¹ç›®ä¸­é›†æˆMinioå¯¹è±¡å­˜å‚¨ï¼Œå®ç°åç«¯æ–‡ä»¶ä¸Šä¼ æ¥å£ã€‚å†…å®¹æ¶µç›–Minioä¾èµ–é…ç½®ã€å®¢æˆ·ç«¯åˆå§‹åŒ–ã€æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»å°è£…ã€Serviceä¸Controllerå±‚å¼€å‘ï¼Œå¹¶è§£å†³å¤§æ–‡ä»¶ä¸Šä¼ é™åˆ¶ï¼Œæä¾›äº†å®Œæ•´çš„Minioæ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆã€‚
æ–‡ç« æ ‡ç­¾:
- "Minio"
- "æ–‡ä»¶ä¸Šä¼ "
- "Spring Boot"
- "å¯¹è±¡å­˜å‚¨"
- "Java"
- "åç«¯å¼€å‘"
- "RESTful API"
ç›¸å…³æ–‡ç« :
- "[[16_ğŸ“•è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯æ¥å£å¼€å‘]]"
- "[[4_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šåˆ é™¤æ¥å£å¼€å‘]]"
- "[[2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘]]"
- "[[3_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šåˆ†é¡µæ¥å£å¼€å‘]]"
- "[[5_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šåˆ†ç±»Selectä¸‹æ‹‰åˆ—è¡¨æ¥å£å¼€å‘]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/7_ç®¡ç†åå°ï¼šåšå®¢è®¾ç½®æ¨¡å—å¼€å‘/3_ğŸ“•æ–‡ä»¶ä¸Šä¼ æ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-05-04 21:42:15
ä¿®æ”¹æ—¶é—´: 2024-05-07 18:12:52
---


ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°æ­å»ºå¥½äº†Â `Minio`Â å¯¹è±¡å­˜å‚¨çš„ç¯å¢ƒã€‚æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±æ¥ä¸ºåç«¯æœåŠ¡æ·»åŠ ä¸€ä¸ª â€”â€” æ–‡ä»¶ä¸Šä¼ æ¥å£ã€‚
## 1 æ·»åŠ  Minio ä¾èµ–

é¦–å…ˆï¼Œåœ¨çˆ¶é¡¹ç›®çš„Â `pom.xml`Â æ–‡ä»¶ä¸­æ·»åŠ Â `Minio`Â ç‰ˆæœ¬ç®¡ç†å£°æ˜ï¼š

```xml
	<!-- ç‰ˆæœ¬å·ç»Ÿä¸€ç®¡ç† -->
	<properties>
	// çœç•¥...
	<minio.version>8.2.1</minio.version>
	</properties>
	
	<!-- ç»Ÿä¸€ä¾èµ–ç®¡ç† -->
	<dependencyManagement>
<dependencies>
// çœç•¥...

<!-- å¯¹è±¡å­˜å‚¨ Minio -->
<dependency>
	<groupId>io.minio</groupId>
	<artifactId>minio</artifactId>
	<version>${minio.version}</version>
</dependency>

</dependencies>
</dependencyManagement>
```

ç„¶åï¼Œåœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `pom.xml`Â æ–‡ä»¶ä¸­ï¼Œæ·»åŠ è¯¥ä¾èµ–ï¼š

```
<!-- å¯¹è±¡å­˜å‚¨ Minio -->
<dependency>
	<groupId>io.minio</groupId>
	<artifactId>minio</artifactId>
</dependency>
```

## 2 æ·»åŠ  Minio é…ç½®

ç¼–è¾‘Â `applicaiton-dev.yml`Â é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ Â `minio`Â ç›¸å…³çš„é…ç½®é¡¹ï¼š

```
#=================================================================
# minio
#=================================================================
minio:  
    endpoint: http://127.0.0.1:9000  
    accessKey: dakkk  
    secretKey: abc123456  
    bucketName: dkblog
```

è§£é‡Šä¸€ä¸‹è¿™äº›é…ç½®éƒ½æ˜¯å¹²å•¥çš„ï¼š

1. **`endpoint: http://127.0.0.1:9000`**ï¼šæŒ‡å®š MinIO æœåŠ¡å™¨çš„åœ°å€ã€‚å®é™…éƒ¨ç½²æ—¶ï¼Œæ‚¨éœ€è¦å°†å®ƒæ›¿æ¢ä¸ºæ‚¨ MinIO æœåŠ¡å™¨çš„åœ°å€ã€‚
2. **`accessKey: quanxiaoha`**ï¼šè¿è¡Œå®¹å™¨æ—¶ï¼ŒæŒ‡å®šçš„æ¥å…¥Â `key`ã€‚
3. **`secretKey: quanxiaoha`**ï¼šè¿è¡Œå®¹å™¨æ—¶ï¼ŒæŒ‡å®šçš„ç§˜é’¥Â `key`ã€‚
4. **`bucketName: weblog`**ï¼šå­˜å‚¨æ¡¶ï¼ˆbucketï¼‰çš„åç§°ã€‚

## 3 æ–°å¢ Minio é…ç½®ç±»

æ¥ç€ï¼Œåœ¨Â `weblog-module-admin`Â å­æ¨¡å—çš„Â `/config`Â åŒ…ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªÂ `MinioProperties`Â é…ç½®ç±»ï¼Œç”¨æ¥è¯»å–åˆšåˆšæ‰‹åŠ¨é…ç½®çš„Â `Minio`Â é€‰é¡¹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169664924538554)

```java
@ConfigurationProperties(prefix = "minio")  
@Component  
@Data  
public class MinioProperties {  
    private String endpoint;  
    private String accessKey;  
    private String secretKey;  
    private String bucketName;  
}
```

> âš ï¸ æ³¨æ„ï¼šé…ç½®ç±»çš„å‰ç¼€éœ€è¦æŒ‡å®šä¸ºÂ `minio`, ä¸”å­—æ®µåè¦ä¸é…ç½®é¡¹åç§°ä¿æŒä¸€è‡´ã€‚

## 4 æ–°å¢ Minio å®¢æˆ·ç«¯é…ç½®

ç»§ç»­åœ¨Â `/config`Â åŒ…ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªÂ `MinioConfig`Â å®¢æˆ·ç«¯é…ç½®ç±»ï¼š

```java
@Configuration  
public class MinioConfig {  
    @Autowired  
    private MinioProperties minioProperties;  
  
    @Bean  
    public MinioClient minioClient(){  
        // æ„å»ºminioå®¢æˆ·ç«¯  
        return MinioClient.builder()  
                .endpoint(minioProperties.getEndpoint())  
                .credentials(minioProperties.getAccessKey(), minioProperties.getSecretKey())  
                .build();  
    }  
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªÂ `MinioClient`Â å®¢æˆ·ç«¯ï¼Œå¹¶ä½¿ç”¨Â `@Bean`Â æ³¨è§£æ³¨å…¥åˆ°äº†Â `Spring`Â å®¹å™¨ä¸­ã€‚

## 5 å°è£…å›¾ç‰‡ä¸Šä¼ å·¥å…·ç±»

åˆå§‹åŒ–å¥½Â `Minio`Â å®¢æˆ·ç«¯åï¼Œåœ¨Â `weblog-module-admin`Â å­æ¨¡å—ä¸­ï¼Œæ–°å¢ä¸€ä¸ªÂ `/utils`Â å·¥å…·åŒ…ï¼Œç„¶åï¼Œæ–°å»ºÂ `MinioUtil`Â å·¥å…·ç±»ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/7ad246cf6b98697682bb09c056fe142e.png)


```java
@Component
@Slf4j
public class MinioUtil {

    @Autowired
    private MinioProperties minioProperties;

    @Autowired
    private MinioClient minioClient;

    /**
     * ä¸Šä¼ æ–‡ä»¶
     * @param file
     * @return
     * @throws Exception
     */
    public String uploadFile(MultipartFile file) throws Exception {
        // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºç©º
        if (file == null || file.getSize() == 0) {
            log.error("==> ä¸Šä¼ æ–‡ä»¶å¼‚å¸¸ï¼šæ–‡ä»¶å¤§å°ä¸ºç©º ...");
            throw new RuntimeException("æ–‡ä»¶å¤§å°ä¸èƒ½ä¸ºç©º");
        }

        // æ–‡ä»¶çš„åŸå§‹åç§°
        String originalFileName = file.getOriginalFilename();
        // æ–‡ä»¶çš„ Content-Type
        String contentType = file.getContentType();

        // ç”Ÿæˆå­˜å‚¨å¯¹è±¡çš„åç§°ï¼ˆå°† UUID å­—ç¬¦ä¸²ä¸­çš„ - æ›¿æ¢æˆç©ºå­—ç¬¦ä¸²ï¼‰
        String key = UUID.randomUUID().toString().replace("-", "");
        // è·å–æ–‡ä»¶çš„åç¼€ï¼Œå¦‚ .jpg
        String suffix = originalFileName.substring(originalFileName.lastIndexOf("."));

        // æ‹¼æ¥ä¸Šæ–‡ä»¶åç¼€ï¼Œå³ä¸ºè¦å­˜å‚¨çš„æ–‡ä»¶å
        String objectName = String.format("%s%s", key, suffix);

        log.info("==> å¼€å§‹ä¸Šä¼ æ–‡ä»¶è‡³ Minio, ObjectName: {}", objectName);
        
        // ä¸Šä¼ æ–‡ä»¶è‡³ Minio
        minioClient.putObject(PutObjectArgs.builder()
                .bucket(minioProperties.getBucketName())
                .object(objectName)
                .stream(file.getInputStream(), file.getSize(), -1)
                .contentType(contentType)
                .build());

        // è¿”å›æ–‡ä»¶çš„è®¿é—®é“¾æ¥
        String url = String.format("%s/%s/%s", minioProperties.getEndpoint(), minioProperties.getBucketName(), objectName);
        log.info("==> ä¸Šä¼ æ–‡ä»¶è‡³ Minio æˆåŠŸï¼Œè®¿é—®è·¯å¾„: {}", url);
        return url;
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹Â `MultipartFile`Â è¿›è¡Œäº†åˆ¤ç©ºï¼Œé˜²æ­¢ä¸Šä¼ ç©ºçš„æ–‡ä»¶ã€‚ç„¶åæ‹¿åˆ°äº†è¯¥æ–‡ä»¶çš„ç›¸å…³å±æ€§å€¼ï¼Œå¦‚åŸå§‹æ–‡ä»¶åã€`Content-Type`Â ï¼Œé€šè¿‡å¯¹åŸå§‹æ–‡ä»¶åæˆªå–å‡ºæ–‡ä»¶åç¼€ï¼Œä»¥åŠé€šè¿‡Â `UUID`Â ç”Ÿæˆä¸€ä¸ªéšæœºçš„æ–‡ä»¶åï¼Œæœ€ç»ˆé€šè¿‡Â `minioClient`Â å®¢æˆ·ç«¯çš„Â `putObject`Â æ–¹æ³•æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œä¸Šä¼ æˆåŠŸåï¼Œå°†æ–‡ä»¶çš„è®¿é—®é“¾æ¥æ‹¼æ¥å¥½å¹¶è¿”å›ã€‚

## 6 æ¥å£å‡ºå…¥å‚æ ¼å¼

å‰ç½®å·¥ä½œéƒ½å®Œæˆåï¼Œæˆ‘ä»¬å‡†å¤‡å¼€å§‹å¼€å‘æ–‡ä»¶ä¸Šä¼ æ¥å£ã€‚

### 6.1 æ¥å£åœ°å€

```
POST /admin/file/upload è¡¨å•æ ¼å¼æäº¤
```

### 6.2 å…¥å‚

|å­—æ®µå|æè¿°|
|---|---|
|`file`|é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶|

### 6.3 å‡ºå‚

```json
{
  "success": true,
  "message": null,
  "errorCode": null,
  "data": {
    "url": "http://127.0.0.1:9000/weblog/d73ec5ffb1074aacb07c0899663068dd.jpg" // æ–‡ä»¶çš„è®¿é—®åœ°å€
  }
}
```

## 7 æ–°å¢ä¸Šä¼ æ–‡ä»¶è¿”å‚ VO

åœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `/model/vo`Â åŒ…ä¸‹ï¼Œæ–°å¢åä¸ºÂ `/file`Â çš„åŒ…ï¼Œç”¨äºæ”¾ç½®æ–‡ä»¶æ¨¡å—ç›¸å…³çš„Â `VO`Â ç±»ï¼Œç„¶åï¼Œåˆ›å»ºÂ `UploadFileRspVO`Â æ–‡ä»¶ä¸Šä¼ è¿”å‚å®ä½“ç±»ï¼š

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class UploadFileRspVO {

    /**
     * æ–‡ä»¶çš„è®¿é—®é“¾æ¥
     */
    private String url;

}
```

## 8 æ–°å¢ä¸Šä¼ æ–‡ä»¶ service

ä¸Šä¼ æ–‡ä»¶çš„å·¥å…·ç±»å°è£…å¥½åï¼Œæˆ‘ä»¬åœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `service`Â åŒ…ä¸­æ·»åŠ Â `AdminFileService`Â æ¥å£ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æ–¹æ³•ï¼š

```java
public interface AdminFileService {
    /**
     * ä¸Šä¼ æ–‡ä»¶
     * @param file
     * @return
     */
    Response uploadFile(MultipartFile file);
}
```

ç„¶åï¼Œåœ¨Â `/impl`Â åŒ…ä¸­ï¼Œåˆ›å»ºè¯¥æ¥å£çš„å®ç°ç±»Â `AdminFileServiceImpl`Â , ä»£ç å¦‚ä¸‹ï¼š

```java
@Service
@Slf4j
public class AdminFileServiceImpl implements AdminFileService {

    @Autowired
    private MinioUtil minioUtil;

    /**
     * ä¸Šä¼ æ–‡ä»¶
     *
     * @param file
     * @return
     */
    @Override
    public Response uploadFile(MultipartFile file) {
        try {
            // ä¸Šä¼ æ–‡ä»¶
            String url = minioUtil.uploadFile(file);

            // æ„å»ºæˆåŠŸè¿”å‚ï¼Œå°†å›¾ç‰‡çš„è®¿é—®é“¾æ¥è¿”å›
            return Response.success(UploadFileRspVO.builder().url(url).build());
        } catch (Exception e) {
            log.error("==> ä¸Šä¼ æ–‡ä»¶è‡³ Minio é”™è¯¯: ", e);
            // æ‰‹åŠ¨æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ï¼Œæç¤º â€œæ–‡ä»¶ä¸Šä¼ å¤±è´¥â€
            throw new BizException(ResponseCodeEnum.FILE_UPLOAD_FAILED);
        }
    }
}
```

ä»£ç æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å°†Â `MinioUtil`Â æ³¨å…¥åï¼Œç›´æ¥è°ƒç”¨å·¥å…·æ–¹æ³•ä¸­çš„Â `uploadFile()`Â æ–¹æ³•ï¼Œå¹¶æ„å»ºæˆåŠŸè¿”å‚ï¼Œå°†å›¾ç‰‡çš„è®¿é—®é“¾æ¥è¿”å›ã€‚

### 8.1 æ·»åŠ æ–‡ä»¶ä¸Šä¼ å¤±è´¥å…¨å±€æšä¸¾

ä¸Šè¿°ä»£ç ä¸­ï¼Œå½“ä¸Šä¼ æ–‡ä»¶æ•è·åˆ°å¼‚å¸¸æ—¶ï¼Œåˆ™æ‰‹åŠ¨æŠ›å‡ºäº†ä¸Šä¼ æ–‡ä»¶å¤±è´¥å¼‚å¸¸ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–è¾‘Â `weblog-module-common`Â æ¨¡å—ä¸­çš„Â `ResponseCodeEnum`Â å…¨å±€æšä¸¾ç±»ï¼Œæ·»åŠ å¯¹åº”çš„æšä¸¾å€¼ï¼Œå¦‚ä¸‹ï¼š

```
FILE_UPLOAD_FAILED("20008", "æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼"),
```

## 9 æ–°å¢ Controller æ¥å£

æ¥ç€ï¼Œåœ¨Â `/controller`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `AdminFileController`Â æ§åˆ¶å™¨ï¼Œå¹¶æ–°å¢æ–‡ä»¶ä¸Šä¼ æ¥å£Â `/amdin/file/upload`, ä»£ç å¦‚ä¸‹ï¼š

```java
@RestController
@RequestMapping("/admin")
@Api(tags = "Admin æ–‡ä»¶æ¨¡å—")
public class AdminFileController {

    @Autowired
    private AdminFileService fileService;

    @PostMapping("/file/upload")
    @ApiOperation(value = "æ–‡ä»¶ä¸Šä¼ ")
    @ApiOperationLog(description = "æ–‡ä»¶ä¸Šä¼ ")
    public Response uploadFile(@RequestParam MultipartFile file) {
        return fileService.uploadFile(file);
    }

}
```

æ³¨æ„ï¼Œæ–‡ä»¶ä¸Šä¼ æ¥å£å¹¶éä½¿ç”¨Â `JSON`Â æ ¼å¼è¿›è¡Œæäº¤ï¼Œè€Œæ˜¯ä½¿ç”¨Â `Form`Â è¡¨è¾¾æ¥æäº¤çš„ï¼Œæ‰€ä»¥å…¥å‚çš„æ³¨è§£ä½¿ç”¨çš„Â `@RequestParam`Â , å¹¶ä½¿ç”¨äº†Â `MultipartFile`Â ç±»æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶ã€‚

## 10 æµ‹è¯•çœ‹çœ‹

å®Œæˆä»¥ä¸Šå·¥ä½œåï¼Œæ–‡ä»¶ä¸Šä¼ æ¥å£å°±å¼€å‘å®Œæ¯•äº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®Â `localhost:8080/doc.html`Â , è°ƒè¯•ä¸€æ³¢æ­¤æ¥å£ï¼Œçœ‹çœ‹åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/a49a23fdfeaa0f41fe95bc0525c8dbe0.png)


é€‰æ‹©ä¸€å¼ æœ¬åœ°å›¾ç‰‡åï¼Œç‚¹å‡» _å‘é€_ï¼Œå¯ä»¥çœ‹åˆ°åç«¯å“å‚æˆåŠŸï¼Œå¹¶è¿”å›äº†å›¾ç‰‡çš„è®¿é—®åœ°å€ã€‚å¤åˆ¶è¯¥å›¾ç‰‡çš„è®¿é—®é“¾æ¥ï¼Œç›´æ¥åœ¨æµè§ˆå™¨ä¸­ï¼Œè®¿é—®è¯¥å›¾ç‰‡åœ°å€ï¼Œçœ‹çœ‹èƒ½å¦æ­£å¸¸è®¿é—®ï¼š

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/beab393db231c089f4ac25617a06c010.png)


OKï¼Œå›¾ç‰‡è®¿é—®æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¡¨æ˜æ–‡ä»¶ä¸Šä¼ æ¥å£åŠŸèƒ½æ­£å¸¸ã€‚

## 11 å¤§æ–‡ä»¶ä¸Šä¼ å¤±è´¥é—®é¢˜

å½“ä½ å°è¯•ä¸Šä¼ ä¸€ä¸ªä½“ç§¯è¾ƒå¤§çš„æ–‡ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°å¦‚ä¸‹å¼‚å¸¸ä¿¡æ¯ï¼š

```shell
Caused by: org.apache.tomcat.util.http.fileupload.impl.FileSizeLimitExceededException: The field file exceeds its maximum permitted size of 1048576 bytes.
	at org.apache.tomcat.util.http.fileupload.impl.FileItemStreamImpl$1.raiseError(FileItemStreamImpl.java:117) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.http.fileupload.util.LimitedInputStream.checkLimit(LimitedInputStream.java:76) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.http.fileupload.util.LimitedInputStream.read(LimitedInputStream.java:135) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at java.io.FilterInputStream.read(FilterInputStream.java:107) ~[na:1.8.0_311]
	at org.apache.tomcat.util.http.fileupload.util.Streams.copy(Streams.java:97) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:288) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	at org.apache.catalina.connector.Request.parseParts(Request.java:2932) ~[tomcat-embed-core-9.0.56.jar:9.0.56]
	... 96 common frames omitted
```

è¿™ä¸ªé”™è¯¯è¡¨æ˜åœ¨å°è¯•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶çš„å¤§å°è¶…è¿‡äº† Spring Boot è®¾ç½®çš„æœ€å¤§å…è®¸å¤§å°é™åˆ¶ã€‚å…·ä½“è€Œè¨€ï¼Œé”™è¯¯æ¶ˆæ¯ä¸­çš„ "The field file exceeds its maximum permitted size of 1048576 bytes" æ„å‘³ç€ä¸Šä¼ çš„æ–‡ä»¶å¤§å°è¶…è¿‡äº† 1048576 å­—èŠ‚ï¼ˆ1MBï¼‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ç¼–è¾‘Â `application.yml`Â æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®, æ¥æ‰‹åŠ¨è®¾ç½®ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ï¼š

```
spring:
  servlet:
    multipart:
      max-file-size: 10MB # é™åˆ¶å•ä¸ªä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å¤§å°ä¸º 10MBã€‚å¦‚æœä¸Šä¼ çš„æ–‡ä»¶å¤§å°è¶…è¿‡è¿™ä¸ªå€¼ï¼Œå°†ä¼šè¢«æ‹’ç»ä¸Šä¼ ã€‚
      max-request-size: 10MB # é™åˆ¶æ•´ä¸ªä¸Šä¼ è¯·æ±‚çš„æœ€å¤§å¤§å°ä¸º 10MBã€‚è¿™åŒ…æ‹¬æ‰€æœ‰ä¸Šä¼ æ–‡ä»¶çš„å¤§å°ä¹‹å’Œã€‚å¦‚æœè¯·æ±‚æ€»å¤§å°è¶…è¿‡è¿™ä¸ªå€¼ï¼Œå°†ä¼šè¢«æ‹’ç»ã€‚
```

## 13 ç»“è¯­

æœ¬å°èŠ‚ä¸­ï¼Œå°å“ˆå¸¦ç€å¤§å®¶æ‰‹åŠ¨å°è£…äº†ä¸€ä¸ªÂ `Minio`Â çš„æ–‡ä»¶ä¸Šä¼ å·¥å…·ç±»ï¼Œå¹¶æ–°å¢äº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æ¥å£ï¼Œæœ€åï¼Œé€šè¿‡Â `Knife4j`Â è°ƒè¯•äº†è¯¥æ¥å£ï¼Œé€‰æ‹©äº†ä¸€å¼ æœ¬åœ°å›¾ç‰‡è¿›è¡Œä¸Šä¼ ï¼Œæ¥å£è°ƒè¯•é€šè¿‡ã€‚