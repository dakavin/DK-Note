---
æ–‡ç« æ ‡é¢˜: "[[4_ğŸ“•åšå®¢è®¾ç½®ï¼šæ›´æ–°æ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æœ¬æ–‡è¯¦ç»†é˜è¿°äº†åšå®¢è®¾ç½®æ›´æ–°APIçš„å¼€å‘æµç¨‹ï¼Œæ¶µç›–æ¥å£å®šä¹‰ã€DO/Mapper/VOç±»åˆ›å»ºã€Serviceå±‚ä¸šåŠ¡é€»è¾‘å®ç°ï¼ˆåˆ©ç”¨Mybatis Plusçš„saveOrUpdateï¼‰å’ŒControllerå±‚æ¥å£æš´éœ²ã€‚é€šè¿‡ä»£ç ç¤ºä¾‹å’Œæµ‹è¯•ï¼Œå±•ç¤ºäº†åç«¯CRUDæ¥å£çš„å®Œæ•´å¼€å‘æ­¥éª¤ã€‚
æ–‡ç« æ ‡ç­¾:
- "APIå¼€å‘"
- "Spring Boot"
- "Mybatis Plus"
- "RESTful API"
- "CRUD"
- "åç«¯å¼€å‘"
- "Java"
- "åšå®¢ç³»ç»Ÿ"
ç›¸å…³æ–‡ç« :
- "[[16_ğŸ“•è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯æ¥å£å¼€å‘]]"
- "[[2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘]]"
- "[[3_ğŸ“•æ–‡ä»¶ä¸Šä¼ æ¥å£å¼€å‘]]"
- "[[3_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šåˆ†é¡µæ¥å£å¼€å‘]]"
- "[[4_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šåˆ é™¤æ¥å£å¼€å‘]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/7_ç®¡ç†åå°ï¼šåšå®¢è®¾ç½®æ¨¡å—å¼€å‘/4_ğŸ“•åšå®¢è®¾ç½®ï¼šæ›´æ–°æ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-05-04 21:42:15
ä¿®æ”¹æ—¶é—´: 2025-05-27 00:57:34
---

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®Œæˆåšå®¢è®¾ç½®æ¨¡å—ä¸­çš„ç¬¬äºŒä¸ªæ¥å£çš„å¼€å‘ â€”â€” åšå®¢è®¾ç½®æ›´æ–°ã€‚

## 1. æ¥å£ã€å‡ºå…¥å‚å®šä¹‰

### 1.1 æ¥å£åœ°å€

```
POST /admin/blog/settings/update
```

### 1.2 å…¥å‚

```json
{
  "author": "", // ä½œè€…
  "avatar": "", // ä½œè€…å¤´åƒ
  "introduction": "", // ä»‹ç»è¯­
  "logo": "", // åšå®¢ LOGO
  "name": "", // åšå®¢åç§°
  "csdnHomepage": "", // csdn ä¸»é¡µåœ°å€
  "giteeHomepage": "", // gitee ä¸»é¡µåœ°å€
  "githubHomepage": "", // github ä¸»é¡µåœ°å€
  "zhihuHomepage": "" // çŸ¥ä¹ä¸»é¡µåœ°å€
}
```

### 1.3 å‡ºå‚

```json
{
  "success": true,
  "message": null,
  "errorCode": null,
  "data": null
}
```

## 2. å®šä¹‰ DO å’Œ Mapperã€

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/5b8a17e66dc966ff7fae340d2d331d26.png)


å‰é¢çš„[1_ğŸ“•åšå®¢è®¾ç½®æ¨¡å—åŠŸèƒ½åˆ†æã€è¡¨è®¾è®¡](1_ğŸ“•åšå®¢è®¾ç½®æ¨¡å—åŠŸèƒ½åˆ†æã€è¡¨è®¾è®¡.md)ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°†åšå®¢è®¾ç½®å¯¹åº”çš„è¡¨å»ºç«‹å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¯¹åº”çš„Â `DO`Â ç±»ï¼Œä»¥åŠÂ `Mapper`Â æ¥å£åˆ›å»ºä¸€ä¸‹ã€‚åœ¨Â `weblog-module-common`Â å­æ¨¡å—ä¸‹çš„Â `/domain/dos`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `BlogSettingsDO`Â ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@TableName("t_blog_settings")
public class BlogSettingsDO {

    @TableId(type = IdType.AUTO)
    private Long id;

    private String logo;

    private String name;

    private String author;

    private String introduction;

    private String avatar;

    private String githubHomepage;

    private String csdnHomepage;

    private String giteeHomepage;

    private String zhihuHomepage;
}
```

ç„¶åï¼Œåœ¨Â `/domain/mapper`Â åŒ…ä¸‹åˆ›å»ºÂ `BlogSettingsMapper`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
public interface BlogSettingsMapper extends BaseMapper<BlogSettingsDO> {
}
```

## 3. æ–°å»º VO è¯·æ±‚ç±»

æ¥ä¸‹æ¥ï¼Œåœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `/model/vo`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `/blogsettings`Â åŒ…ï¼Œç»Ÿä¸€æ”¾ç½®å’Œåšå®¢è®¾ç½®ç›¸å…³çš„Â `VO`Â ç±»ï¼Œå¹¶åˆ›å»ºåä¸ºÂ `UpdateBlogSettingsReqVO`Â è¯·æ±‚ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@ApiModel(value = " åšå®¢åŸºç¡€ä¿¡æ¯ä¿®æ”¹ VO")
public class UpdateBlogSettingsReqVO {

    @NotBlank(message = "åšå®¢ LOGO ä¸èƒ½ä¸ºç©º")
    private String logo;

    @NotBlank(message = "åšå®¢åç§°ä¸èƒ½ä¸ºç©º")
    private String name;

    @NotBlank(message = "åšå®¢ä½œè€…ä¸èƒ½ä¸ºç©º")
    private String author;

    @NotBlank(message = "åšå®¢ä»‹ç»è¯­ä¸èƒ½ä¸ºç©º")
    private String introduction;

    @NotBlank(message = "åšå®¢å¤´åƒä¸èƒ½ä¸ºç©º")
    private String avatar;

    private String githubHomepage;

    private String csdnHomepage;

    private String giteeHomepage;

    private String zhihuHomepage;
}
```

ä¸Šè¿°è¯·æ±‚Â `VO`Â ç±»ä¸­ï¼Œæˆ‘ä»¬å¯¹ä¸€äº›ä¸èƒ½ä¸ºç©ºçš„å­—æ®µæ·»åŠ äº†Â `@NotBlank`Â æ³¨è§£ï¼Œå¦‚åšå®¢Â `LOGO`ã€åšå®¢åç§°ã€åšå®¢ä½œè€…ç­‰ã€‚

## 4. æ–°å»º service ä¸šåŠ¡å±‚

åœ¨Â `weblog-module-admin`Â æ¨¡å—ä¸­çš„Â `/service`Â åŒ…ä¸­ï¼Œåˆ›å»ºÂ `AdminBlogSettingsService`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
public interface AdminBlogSettingsService {
    /**
     * æ›´æ–°åšå®¢è®¾ç½®ä¿¡æ¯
     * @param updateBlogSettingsReqVO
     * @return
     */
    Response updateBlogSettings(UpdateBlogSettingsReqVO updateBlogSettingsReqVO);
}
```

ç„¶åï¼Œåœ¨Â `/impl`Â åŒ…ä¸­ï¼Œåˆ›å»ºè¯¥æ¥å£çš„å®ç°ç±»Â `AdminBlogSettingsServiceImpl`Â , ä»£ç å¦‚ä¸‹ï¼š

```
@Service
public class AdminBlogSettingsServiceImpl extends ServiceImpl<BlogSettingsMapper, BlogSettingsDO> implements AdminBlogSettingsService {

    @Override
    public Response updateBlogSettings(UpdateBlogSettingsReqVO updateBlogSettingsReqVO) {
        // VO è½¬ DO
        BlogSettingsDO blogSettingsDO = BlogSettingsDO.builder()
                .id(1L)
                .logo(updateBlogSettingsReqVO.getLogo())
                .name(updateBlogSettingsReqVO.getName())
                .author(updateBlogSettingsReqVO.getAuthor())
                .introduction(updateBlogSettingsReqVO.getIntroduction())
                .avatar(updateBlogSettingsReqVO.getAvatar())
                .githubHomepage(updateBlogSettingsReqVO.getGithubHomepage())
                .giteeHomepage(updateBlogSettingsReqVO.getGiteeHomepage())
                .csdnHomepage(updateBlogSettingsReqVO.getCsdnHomepage())
                .zhihuHomepage(updateBlogSettingsReqVO.getZhihuHomepage())
                .build();

        // ä¿å­˜æˆ–æ›´æ–°ï¼ˆå½“æ•°æ®åº“ä¸­å­˜åœ¨ ID ä¸º 1 çš„è®°å½•æ—¶ï¼Œåˆ™æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¦åˆ™æ‰§è¡Œæ’å…¥æ“ä½œï¼‰
        saveOrUpdate(blogSettingsDO);
        return Response.success();
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬è®©Â `AdminBlogSettingsServiceImpl`Â ç»§æ‰¿è‡ªäº† Mybatis Plus å†…éƒ¨å°è£…çš„Â `ServiceImpl`Â ä¸šåŠ¡å®ç°ç±»ï¼Œè¯¥ç±»æä¾›äº†å¾ˆå¤šå°è£…å¥½çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œå¦‚Â `saveOrUpdate()`Â æ–¹æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œæ­¤æ–¹æ³•æ˜¯ä¸ªä¿å­˜æˆ–æ›´æ–°çš„æ–¹æ³•ï¼Œå½“éœ€è¦æ“ä½œçš„è®°å½•å·²å­˜åœ¨è¡¨ä¸­æ—¶ï¼Œåˆ™æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œå¦åˆ™æ‰§è¡ŒÂ `insert`Â æ“ä½œã€‚

## 5. æ–°å¢åšå®¢è®¾ç½®æ¨¡å— controller

æ¥ç€ï¼Œåœ¨Â `/controller`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `AdminBlogSettingsController`Â , å¹¶åœ¨å…¶ä¸­æ·»åŠ æ¥å£Â `/admin/blog/settings/update`Â , ä»£ç å¦‚ä¸‹:

```
@RestController
@RequestMapping("/admin/blog/settings")
@Api(tags = "Admin åšå®¢è®¾ç½®æ¨¡å—")
public class AdminBlogSettingsController {

    @Autowired
    private AdminBlogSettingsService blogSettingsService;

    @PostMapping("/update")
    @ApiOperation(value = "åšå®¢åŸºç¡€ä¿¡æ¯ä¿®æ”¹")
    @ApiOperationLog(description = "åšå®¢åŸºç¡€ä¿¡æ¯ä¿®æ”¹")
    public Response updateBlogSettings(@RequestBody @Validated UpdateBlogSettingsReqVO updateBlogSettingsReqVO) {
        return blogSettingsService.updateBlogSettings(updateBlogSettingsReqVO);
    }

}
```

è‡³æ­¤ï¼Œåšå®¢è®¾ç½®ä¿®æ”¹æ¥å£å°±å¼€å‘å®Œæ¯•å•¦~

## 6. æµ‹è¯•çœ‹çœ‹

åœ¨æµè§ˆå™¨ä¸­è®¿é—®Â `/doc.html`Â , è°ƒè¯•ä¸€æ³¢æ­¤æ¥å£ï¼Œçœ‹çœ‹åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/f8bbde1fd8ea877073abc03b61136573.png)


è¿™é‡Œæˆ‘ä»¬å°†å…¥å‚ä¸­çš„Â _ä½œè€…å_Â ã€_åšå®¢åç§°_Â ç­‰éƒ½åŠ ä¸Šäº†åç¼€Â _test_ï¼Œ ç„¶åç‚¹å‡»_å‘é€_ï¼Œåç«¯è¿”å‚æ“ä½œæˆåŠŸã€‚æ¥ç€ï¼Œæ‰“å¼€æ•°æ®åº“ï¼Œçœ‹çœ‹è¯¥è®°å½•æ˜¯å¦è¢«æ­£ç¡®ä¿®æ”¹äº†ï¼š

![image.png|600](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/13c30a6eda3c773f9f94035cfd346d64.png)

å¯ä»¥çœ‹åˆ°ï¼Œè¯¥è®°å½•çš„ç›¸å…³å­—æ®µéƒ½ä¿®æ”¹æˆåŠŸäº†ï¼Œè¯´æ˜æ¥å£åŠŸèƒ½æ­£å¸¸ã€‚

## 8. ç»“è¯­

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åšå®¢è®¾ç½®æ¨¡å—ä¸­çš„ä¿®æ”¹æ¥å£å¼€å‘å®Œæˆäº†ï¼Œæ•´ä½“å®ç°ä¸Šéå¸¸ç®€å•ï¼Œåˆæ˜¯Â `CRUD`Â çš„ä¸€å¤©ã€‚