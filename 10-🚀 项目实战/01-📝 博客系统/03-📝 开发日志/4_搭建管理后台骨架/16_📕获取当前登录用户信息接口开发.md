æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¥åœ¨åç«¯å·¥ç¨‹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªè·å–ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ã€‚ä¸ºäº†çªç„¶è¦å¼€å‘è¿™ä¸ªæ¥å£å‘¢ï¼Œå› ä¸ºå®ƒå’Œæ¥ä¸‹æ¥è¦æ·»åŠ çš„ä¿®æ”¹å¯†ç åŠŸèƒ½ç›¸å…³ï¼Œå…ˆçœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¿®æ”¹ç”¨æˆ·çš„å¼¹å‡ºæ¡†åŸå‹å›¾ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169484429770845)

å› ä¸ºå‰å°é¡µé¢ä¸­ï¼Œéœ€è¦æ‹¿åˆ°å½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åï¼Œæ˜¾ç¤ºåˆ°åªè¯»è¾“å…¥æ¡†ï¼Œè¿™æ ·å¯ä»¥è®©ç”¨æˆ·æ›´æ¸…æ™°çš„çŸ¥é“ï¼Œè‡ªå·±æƒ³æ”¹çš„æ˜¯å“ªä¸ªç”¨æˆ·çš„å¯†ç ã€‚

## ä¸€ã€æ–°å»º VO å®ä½“ç±»ï¼šæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯

å¼€å§‹åŠ¨æ‰‹å®ç° ï¼åœ¨Â `weblog-module-admin`Â å­æ¨¡å—ä¸­çš„Â `/model/vo`Â åŒ…ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªÂ `user`Â åŠŸèƒ½æ¨¡å—åŒ…ï¼Œä»¥åå†å¼€å‘æ–°çš„æ¨¡å—ï¼Œæ¯”å¦‚æ–‡ç« ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰ï¼Œä¹Ÿéµå¾ªè¿™ä¸ªè§„åˆ™æ¥ï¼ŒæŒ‰åŠŸèƒ½èŒè´£è¿›è¡Œåˆ’åˆ†ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ç»´æŠ¤ã€‚ç„¶åï¼Œæ–°å»ºÂ `FindUserInfoRspVO`Â è¿”å‚å®ä½“ç±», ä»£ç å¦‚ä¸‹ï¼š

> ğŸ’¡ TIP : ä¸Šå°èŠ‚ä¸­æ–°å»ºçš„Â `UpdateAdminUserPasswordReqVO`Â ç±»çš„èŒè´£ä¹Ÿå±äºç”¨æˆ·ç›¸å…³ï¼Œéœ€è¦ä»£ç é‡æ„ä¸€ä¸‹ï¼Œå°†è¯¥ç±»ä¸€åŒæ”¾è¿›å»ã€‚æœ€ç»ˆç»“æ„å¦‚ä¸‹ï¼š
> 
> ![](https://img.quanxiaoha.com/quanxiaoha/169484550413422)

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class FindUserInfoRspVO {
    /**
     * ç”¨æˆ·å
     */
    private String username;

}
```

## Service æ·»åŠ æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ–¹æ³•

åœ¨Â `AdminUserService`Â æ¥å£ä¸­ï¼Œå£°æ˜æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¿¡æ¯æ–¹æ³•ï¼š

```java
public interface AdminUserService {
	// çœç•¥...

    /**
     * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
     * @return
     */
    Response findUserInfo();
}
```

ç„¶åï¼Œåœ¨å…¶å®ç°ç±»Â `AdminUserServiceImpl`Â ä¸­å®ç°è¯¥æ–¹æ³•ï¼š

```java
@Service
public class AdminUserServiceImpl implements AdminUserService {
	// çœç•¥...

    /**
     * è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯
     * @return
     */
    @Override
    public Response findUserInfo() {
        // è·å–å­˜å‚¨åœ¨ ThreadLocal ä¸­çš„ç”¨æˆ·ä¿¡æ¯
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        // æ‹¿åˆ°ç”¨æˆ·å
        String username = authentication.getName();

        return Response.success(FindUserInfoRspVO.builder().username(username).build());
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œå› ä¸ºä¹‹å‰åœ¨å®ç°ç”¨æˆ·ç™»å½•è®¤è¯åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬å·²ç»å°†ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯å­˜å‚¨åœ¨äº†Â `Spring Security`Â çš„ä¸Šä¸‹æ–‡ä¸­ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169484594562969)

æ‰€ä»¥å–ç”¨æˆ·åä¹Ÿå°±ç›´æ¥ä»Â `Context`Â ä¸Šä¸‹æ–‡ä¸­æ‹¿å°±å¥½äº†ã€‚æœ€åé€šè¿‡Â `Lombok`Â çš„Â `@Builder`Â æ³¨è§£è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å™¨ï¼Œæ¥æ„å»ºè¿”å‚å®ä½“, æœ€ç»ˆå°†æ•°æ®ç»™åˆ°å‰ç«¯ã€‚

## Controller æ–°å»ºæŸ¥è¯¢å½“å‰ç”¨æˆ·ä¿¡æ¯æ¥å£

ç¼–è¾‘Â `AdminUserController`Â æ§åˆ¶å™¨ï¼Œæ·»åŠ æŸ¥è¯¢å½“å‰ç”¨æˆ·ä¿¡æ¯æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
    @PostMapping("/user/info")
    @ApiOperation(value = "è·å–ç”¨æˆ·ä¿¡æ¯")
    @ApiOperationLog(description = "è·å–ç”¨æˆ·ä¿¡æ¯")
    public Response findUserInfo() {
        return userService.findUserInfo();
    }
```

## å››ã€æµ‹è¯•çœ‹çœ‹

æ¥å£æ·»åŠ å®Œæˆåï¼Œé‡å¯é¡¹ç›®ï¼Œè°ƒè¯•ä¸€æ³¢åˆšåˆšæ·»åŠ çš„æ¥å£ï¼Œçœ‹çœ‹èƒ½å¦æ­£å¸¸è¿”å›ç”¨æˆ·åä¿¡æ¯ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169484644447091)

å› ä¸ºå°å“ˆè¯·æ±‚å¤´ä¸­ï¼Œæ·»åŠ çš„è¿™ä¸ªÂ `Token`Â ä»¤ç‰Œæ˜¯é€šè¿‡Â `test`Â ç”¨æˆ·ç™»å½•æ‹¿åˆ°çš„ï¼Œæ‰€ä»¥åç«¯è¿”å›çš„ç”¨æˆ·åä¸ºÂ `test`Â , å½“ä½ ç”¨ä»€ä¹ˆç”¨æˆ·åè¿›è¡Œç™»å½•ï¼Œå¯¹åº”çš„ï¼Œä¹Ÿå°±ä¼šè¿”å›è°çš„ç”¨æˆ·åã€‚OK , åŠŸèƒ½æµ‹è¯•æ­£å¸¸ã€‚

## ç»“è¯­

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸ºåç«¯æ·»åŠ äº†è·å–ç™»å½•ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼Œç›®å‰è¯¥æ¥å£åªè¿”å›äº†ç™»å½•ç”¨æˆ·åå­—æ®µï¼Œå®ç°ä¸Šæ¯”è¾ƒç®€å•ã€‚åç»­è¿˜å¯ä»¥åœ¨è¿™ä¸ªæ¥å£ä¸Šåšæ‹“å±•ï¼Œåªè¦æ˜¯å’Œç”¨æˆ·ä¿¡æ¯ç›¸å…³çš„ï¼Œéƒ½å¯ä»¥æ”¾åˆ°è¿™ä¸ªæ¥å£ä¸­è¿›è¡Œè¿”å›ã€‚