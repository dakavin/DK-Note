---
æ–‡ç« æ ‡é¢˜: "[[10_è·å–æŸä¸ªæ ‡ç­¾ä¸‹çš„æ–‡ç« åˆ—è¡¨â€”â€”åˆ†é¡µæ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åšå®¢ç³»ç»Ÿå¦‚ä½•å¼€å‘è·å–æŸä¸ªæ ‡ç­¾ä¸‹çš„æ–‡ç« åˆ—è¡¨çš„åˆ†é¡µæ¥å£ã€‚å†…å®¹æ¶µç›–æ¥å£è·¯å¾„ã€å…¥å‚ã€å‡ºå‚æ ¼å¼å®šä¹‰ï¼Œä»¥åŠåç«¯Serviceå±‚ã€Mapperå±‚å’ŒControllerå±‚çš„å…·ä½“å®ç°ä»£ç ï¼Œå±•ç¤ºäº†åŸºäºSpring Bootçš„åˆ†å±‚å¼€å‘å’Œæ•°æ®è½¬æ¢æµç¨‹ã€‚
æ–‡ç« æ ‡ç­¾:
- "åˆ†é¡µæ¥å£"
- "åç«¯å¼€å‘"
- "Spring Boot"
- "RESTful API"
- "æ•°æ®åˆ†å±‚"
- "Mybatis-Plus"
- "åšå®¢ç³»ç»Ÿ"
ç›¸å…³æ–‡ç« :
- "[[5_ğŸ“•æ–‡ç« ç®¡ç†ï¼šåˆ†é¡µæ¥å£å¼€å‘]]"
- "[[6_è·å–æŸä¸ªåˆ†ç±»ä¸‹çš„æ–‡ç« åˆ—è¡¨â€”åˆ†é¡µæ¥å£å¼€å‘]]"
- "[[2_ğŸ“•ğŸ“•å‰å°é¦–é¡µï¼šæ–‡ç« åˆ†é¡µæ¥å£å¼€å‘]]"
- "[[2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘]]"
- "[[4_ğŸ“•åšå®¢è®¾ç½®ï¼šæ›´æ–°æ¥å£å¼€å‘]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/10_åšå®¢å‰å°ï¼šå½’æ¡£ã€åˆ†ç±»åˆ—è¡¨ã€æ ‡ç­¾åˆ—è¡¨é¡µé¢å¼€å‘/10_è·å–æŸä¸ªæ ‡ç­¾ä¸‹çš„æ–‡ç« åˆ—è¡¨â€”â€”åˆ†é¡µæ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-05-15 22:38:02
ä¿®æ”¹æ—¶é—´: 2025-05-27 01:01:13
---


å’Œç‚¹å‡»æŸä¸ªåˆ†ç±»ä¸€æ ·ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»é¡µé¢ä¸­çš„æŸä¸ªæ ‡ç­¾æ—¶ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿè·³è½¬åˆ°æ ‡ç­¾-æ–‡ç« åˆ—è¡¨é¡µï¼Œå°†è¯¥æ ‡ç­¾ä¸‹æ‰€æœ‰æ–‡ç« é€šè¿‡åˆ†é¡µçš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥ï¼Œåç«¯éœ€è¦æä¾› â€”â€” è·å–æ ‡ç­¾ä¸‹æ–‡ç« åˆ†é¡µæ¥å£ã€‚

![](https://img.quanxiaoha.com/quanxiaoha/169899739801685)

## 1. æ¥å£ã€å‡ºå…¥å‚æ ¼å¼å®šä¹‰

### 1.1 æ¥å£è·¯å¾„

```http
POST /tag/article/list
```

### 1.2 å…¥å‚

```json
{
  "current": 1, // å½“å‰é¡µç 
  "id": 19, // æ ‡ç­¾ ID
  "size": 10 // æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®é‡
}
```

### 1.3 å‡ºå‚

```json
{
  "success": true,
  "message": null,
  "errorCode": null,
  "data": [
    {
      "id": 12, // æ–‡ç«  ID
      "cover": "https://img.quanxiaoha.com/quanxiaoha/193dd1504ebb4f138085acb23619e0dd.jpg", // å°é¢
      "title": "æµ‹è¯•", // æ–‡ç« æ ‡é¢˜
      "createDate": "2023-10-14" // å‘å¸ƒæ—¥æœŸ
    }
  ],
  "total": 1,
  "size": 10,
  "current": 1,
  "pages": 1
}
```

## 2. å·¥ç¨‹ç»“æ„

æœ¬å°èŠ‚çš„å¼€å‘å·¥ä½œä¸»è¦æ¶‰åŠä»¥ä¸‹æ ‡æ³¨çš„ç±»ä¸æ¥å£ï¼Œå°ä¼™ä¼´ä»¬å…ˆå¤§è‡´çœ‹ä¸‹:

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/19a035ad012466b21df8b6bc621bd284.png)

## 3. æ·»åŠ å‡ºå…¥å‚ VO

### 3.1 å…¥å‚ VO

åœ¨Â `weblog-web`Â å­æ¨¡å—ä¸‹çš„Â `/model/vo/tag`Â åŒ…ä¸‹ï¼Œåˆ›å»ºå…¥å‚ç±»Â `FindTagArticlePageListReqVO`Â , ä»£ç å¦‚ä¸‹ï¼š

```java
@Data  
@AllArgsConstructor  
@NoArgsConstructor  
@Builder  
@ApiModel("é¦–é¡µæ ‡ç­¾é¡µé¢ä¸‹ï¼ŒæŸ¥è¯¢æ ‡ç­¾å¯¹åº”çš„æ–‡ç« é›†åˆæ¥å£çš„å…¥å‚VO")  
public class FindTagArticlePageListReqVO {  
    /**  
     * æ ‡ç­¾ID  
     */    @NotNull(message = "æ ‡ç­¾ ID ä¸èƒ½ä¸ºç©º")  
    private Long id;  
}
```

### 3.2 å‡ºå‚ VO

```java
@Data  
@AllArgsConstructor  
@NoArgsConstructor  
@Builder  
public class FindTagArticlePageListRspVO extends BasePageQuery {  
    private Long id;  
    private String cover;  
    private String title;  
    /**  
     * å‘å¸ƒæ—¥æœŸ  
     */  
    private LocalDate createDate;  
}
```

## 4. å°è£… mapper æŸ¥è¯¢

ç­‰ä¼šå¼€å‘ä¸šåŠ¡å±‚é€»è¾‘æ—¶ï¼Œéœ€è¦é€šè¿‡æ ‡ç­¾Â `ID`Â æ¥æŸ¥è¯¢æ‰€æœ‰çš„æ–‡ç« -æ ‡ç­¾å…³è”è®°å½•ï¼Œä»¥ä¾¿å°†è¯¥æ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡ç« Â `ID`Â æŸ¥è¯¢æå–å‡ºæ¥ï¼Œåšåˆ†é¡µæŸ¥è¯¢ã€‚ç¼–è¾‘Â `ArticleTagRelMapper`Â æ¥å£ï¼Œæ·»åŠ è¯¥æŸ¥è¯¢æ–¹æ³•ï¼š

```java
/**  
 * æ ¹æ®æ ‡ç­¾idï¼ŒæŸ¥è¯¢æ‰€æœ‰å…³è”çš„è®°å½•  
 */  
default List<ArticleTagRefDO> selectListByTagId(Long tagId){  
    return selectList(Wrappers.<ArticleTagRefDO>lambdaQuery()  
            .eq(ArticleTagRefDO::getTagId,tagId));  
}
```

## 5. ç¼–å†™ service å±‚ä¸šåŠ¡é€»è¾‘

ç¼–è¾‘Â `TagService`Â æ ‡ç­¾ä¸šåŠ¡æ¥å£ï¼Œå£°æ˜ä¸€ä¸ªè·å–æ ‡ç­¾ä¸‹æ–‡ç« åˆ†é¡µåˆ—è¡¨çš„æ–¹æ³•ï¼š

```java
public interface TagService {  
    /**  
     * è·å–åˆ†ç±»åˆ—è¡¨  
     */  
    Response findTagList();  
  
    /**  
     *  è·å–åˆ†ç±»ä¸‹çš„æ–‡ç« åˆ†é¡µæ•°æ®  
     */  
    Response findTagArticlePageList(FindTagArticlePageListReqVO findTagArticlePageListReqVO);  
}

```

ç„¶åï¼Œåœ¨å…¶å®ç°ç±»Â `TagServiceImpl`Â ä¸­å®ç°ä¸Šè¿°æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
/**  
 * è·å–æŸä¸ªæ ‡ç­¾ä¸‹çš„æ–‡ç« åˆ†é¡µæ•°æ®  
 *  
 * @param findTagArticlePageListReqVO  
 * @return  
 */@Override  
public Response findTagArticlePageList(FindTagArticlePageListReqVO findTagArticlePageListReqVO) {  
    Long current = findTagArticlePageListReqVO.getCurrent();  
    Long size = findTagArticlePageListReqVO.getSize();  
    // è·å–å…¥å‚çš„æ ‡ç­¾ID  
    Long tagId = findTagArticlePageListReqVO.getId();  
  
    // åˆ¤æ–­æ ‡ç­¾æ˜¯å¦å­˜åœ¨  
    TagDO tagDO = tagMapper.selectById(tagId);  
    if (ObjectUtils.isNull(tagDO)) {  
        log.warn("==> è¯¥æ ‡ç­¾ä¸å­˜åœ¨ï¼ŒtagIDï¼š{}", tagId);  
        throw new BizException(ResponseErrorCodeEnum.TAG_NOT_EXISTED);  
    }  
  
    // å…ˆæŸ¥è¯¢è¯¥æ ‡ç­¾ä¸‹æ‰€æœ‰å…³è”çš„æ–‡ç«  ID    List<ArticleTagRefDO> articleTagRefDOS = articleTagRefMapper.selectListByTagId(tagId);  
    // è‹¥è¯¥æ ‡ç­¾ä¸‹æœªå‘å¸ƒä»»ä½•æ–‡ç«   
    if (CollectionUtils.isEmpty(articleTagRefDOS)) {  
        log.info("==> è¯¥æ ‡ç­¾ä¸‹è¿˜ä¸ºå‘å¸ƒä»»ä½•æ–‡ç« ï¼ŒtagIDï¼š{}", tagId);  
        return PageResponse.success(new Page(current, size), null);  
    }  
  
    // æå–æ‰€æœ‰çš„æ–‡ç« ID  
    List<Long> articleIds = articleTagRefDOS.stream().map(ArticleTagRefDO::getArticleId).collect(Collectors.toList());  
  
    // æ ¹æ®æ–‡ç« IDé›†åˆæŸ¥è¯¢æ–‡ç« åˆ†é¡µæ•°æ®  
    Page<ArticleDO> page = articleMapper.selectPageListByArticleIds(current, size, articleIds);  
    List<ArticleDO> articleDOS = page.getRecords();  
  
    // DO è½¬ VO    List<FindTagArticlePageListRspVO> vos = null;  
    if (!CollectionUtils.isEmpty(articleDOS)) {  
        vos = articleDOS.stream()  
                .map(articleDO -> ArticleConvert.INSTANCE.convertDO2TagArticleVO(articleDO))  
                .collect(Collectors.toList());  
    }  
    return PageResponse.success(page, vos);  
}

```

æŸ¥è¯¢é€»è¾‘å’Œå‰é¢å°èŠ‚ä¸­ï¼ŒæŸ¥è¯¢æŸä¸ªåˆ†ç±»ä¸‹æ‰€æœ‰æ–‡ç« åŸºæœ¬ä¸€è‡´ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚

### 5.1 æ·»åŠ  convert è½¬æ¢

ä¸Šè¿°ä¸šåŠ¡ä»£ç ä¸­æ¶‰åŠåˆ°å°†Â `ArticleDO`Â è½¬æ¢ä¸ºÂ `FindTagArticlePageListRspVO`Â å‡ºå‚ï¼Œè¿˜éœ€è¦åœ¨Â `ArticleConvert`Â æ¥å£ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªè½¬æ¢æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Mapper
public interface ArticleConvert {
    /**
     * åˆå§‹åŒ– convert å®ä¾‹
     */
    ArticleConvert INSTANCE = Mappers.getMapper(ArticleConvert.class);

   	// çœç•¥...

    /**
     * ArticleDO -> FindTagArticlePageListRspVO
     * @param bean
     * @return
     */
    @Mapping(target = "createDate", expression = "java(java.time.LocalDate.from(bean.getCreateTime()))")
    FindTagArticlePageListRspVO convertDO2TagArticleVO(ArticleDO bean);
}
```

## 6. æ·»åŠ  controller æ¥å£

ä¸šåŠ¡å±‚å¼€å‘å®Œæˆåï¼Œç¼–è¾‘Â `TagController`Â æ§åˆ¶å™¨ï¼Œæ·»åŠ Â `/tag/article/list`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
package com.quanxiaoha.weblog.web.controller;

import com.quanxiaoha.weblog.common.aspect.ApiOperationLog;
import com.quanxiaoha.weblog.common.utils.Response;
import com.quanxiaoha.weblog.web.model.vo.tag.FindTagArticlePageListReqVO;
import com.quanxiaoha.weblog.web.service.TagService;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
@RequestMapping("/tag")
@Api(tags = "æ ‡ç­¾")
public class TagController {

    @Autowired
    private TagService tagService;

    // çœç•¥...

    @PostMapping("/article/list")
    @ApiOperation(value = "å‰å°è·å–æ ‡ç­¾ä¸‹æ–‡ç« åˆ—è¡¨")
    @ApiOperationLog(description = "å‰å°è·å–æ ‡ç­¾ä¸‹æ–‡ç« åˆ—è¡¨")
    public Response findTagPageList(@RequestBody @Validated FindTagArticlePageListReqVO findTagArticlePageListReqVO) {
        return tagService.findTagPageList(findTagArticlePageListReqVO);
    }

}


```

## 7. æ¥å£è‡ªæµ‹

æ¥å£å¼€å‘å®Œæ¯•åï¼Œé‡å¯é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®Â `/doc.html`Â , æµ‹è¯•ä¸€æ³¢è¯¥æ¥å£çš„åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ–‡ç« åˆ†é¡µæ•°æ®è¿”å›æ­£å¸¸ï¼Œæ¥å£è‡ªæµ‹é€šè¿‡ï¼š

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/05836bc4e76fa236f4c1eaed54e752c2.png)
