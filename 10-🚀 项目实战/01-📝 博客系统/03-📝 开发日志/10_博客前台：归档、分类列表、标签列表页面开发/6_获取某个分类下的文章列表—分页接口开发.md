---
æ–‡ç« æ ‡é¢˜: "[[6_è·å–æŸä¸ªåˆ†ç±»ä¸‹çš„æ–‡ç« åˆ—è¡¨â€”åˆ†é¡µæ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« è¯¦ç»†ä»‹ç»äº†å¦‚ä½•å¼€å‘ä¸€ä¸ªè·å–ç‰¹å®šåˆ†ç±»ä¸‹æ–‡ç« çš„åˆ†é¡µåç«¯æ¥å£ã€‚å†…å®¹æ¶µç›–æ¥å£å®šä¹‰ã€å…¥å‚å‡ºå‚VOã€Mapperå±‚å¤šè¡¨å…³è”ä¸åˆ†é¡µæŸ¥è¯¢ã€Serviceå±‚ä¸šåŠ¡é€»è¾‘å¤„ç†åŠDOåˆ°VOè½¬æ¢ï¼Œæœ€ç»ˆé€šè¿‡Controlleræš´éœ²æ¥å£å¹¶è¿›è¡Œæµ‹è¯•ã€‚
æ–‡ç« æ ‡ç­¾:
- "åç«¯å¼€å‘"
- "åˆ†é¡µæ¥å£"
- "Spring Boot"
- "MyBatis-Plus"
- "RESTful API"
- "æ•°æ®å…³è”æŸ¥è¯¢"
- "DTO"
- "MapStruct"
ç›¸å…³æ–‡ç« :
- "[[5_ğŸ“•æ–‡ç« ç®¡ç†ï¼šåˆ†é¡µæ¥å£å¼€å‘]]"
- "[[2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘]]"
- "[[2_æ–‡ç« å½’æ¡£åˆ†é¡µæ¥å£å¼€å‘]]"
- "[[4_ğŸ“•å…¬å…±éƒ¨åˆ†ï¼šè·å–åšå®¢è®¾ç½®ä¿¡æ¯æ¥å£å¼€å‘]]"
- "[[4_ğŸ“•æ–‡ç« ç®¡ç†ï¼šæ–‡ç« åˆ é™¤æ¥å£å¼€å‘]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/10_åšå®¢å‰å°ï¼šå½’æ¡£ã€åˆ†ç±»åˆ—è¡¨ã€æ ‡ç­¾åˆ—è¡¨é¡µé¢å¼€å‘/6_è·å–æŸä¸ªåˆ†ç±»ä¸‹çš„æ–‡ç« åˆ—è¡¨â€”åˆ†é¡µæ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-05-15 22:36:03
ä¿®æ”¹æ—¶é—´: 2025-05-27 01:01:11
---

å½“ç”¨æˆ·ç‚¹å‡»åˆ†ç±»åˆ—è¡¨ä¸­çš„æŸä¸ªåˆ†ç±»æ—¶ï¼Œåº”è¯¥èƒ½å¤Ÿè·³è½¬åˆ°æ–‡ç« åˆ—è¡¨é¡µï¼Œä¸”å±•ç¤ºéƒ½æ˜¯è¯¥åˆ†ç±»ä¸‹çš„æ–‡ç« ã€‚æ‰€ä»¥ï¼Œåç«¯è¿˜éœ€è¦æä¾›ä¸€ä¸ªè·å–åˆ†ç±»ä¸‹çš„æ–‡ç« åˆ†é¡µçš„æ¥å£ã€‚`UI`Â åŸå‹å›¾å¦‚ä¸‹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169857272203793)

## 1 é€»è¾‘åˆ†æ

æƒ³è¦æŸ¥è¯¢å›ºå®šåˆ†ç±»ä¸‹çš„æ–‡ç« åˆ†é¡µè®°å½•ï¼Œé€»è¾‘å¦‚ä¸‹ï¼š

1. _å…ˆé€šè¿‡åˆ†ç±»Â `ID`Â å…ˆæŸ¥è¯¢Â `t_article_category_rel`å…³è”è¡¨ï¼Œæ‹¿åˆ°è¿™ä¸ªåˆ†ç±»ä¸‹çš„æ‰€æœ‰æ–‡ç« Â `ID`Â ;_
2. _ç„¶åï¼Œå†é€šè¿‡è¿™äº›æ–‡ç« Â `ID`Â è¿›è¡Œæ‰¹é‡æŸ¥è¯¢ï¼Œå¹¶é™„å¸¦Â `limit`Â åˆ†é¡µæ“ä½œï¼›_

## 2 æ¥å£ã€å‡ºå…¥å‚æ ¼å¼å®šä¹‰

### 2.1 æ¥å£è·¯å¾„

```http
POST /category/article/list
```

### 2.2 å…¥å‚

```json
{
  "current": 1, // å½“å‰é¡µç 
  "id": 19, // åˆ†ç±» ID
  "size": 10 // æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®é‡
}
```

### 2.3 å‡ºå‚

```json
{
  "success": true,
  "message": null,
  "errorCode": null,
  "data": [
    {
      "id": 12, // æ–‡ç«  ID
      "cover": "https://img.quanxiaoha.com/quanxiaoha/193dd1504ebb4f138085acb23619e0dd.jpg", // å°é¢
      "title": "æµ‹è¯•", // æ–‡ç« æ ‡é¢˜
      "createDate": "2023-10-14" // å‘å¸ƒæ—¥æœŸ
    }
  ],
  "total": 1,
  "size": 10,
  "current": 1,
  "pages": 1
}
```

## 3 åˆ›å»ºå‡ºå…¥å‚ VO

æ¥å£çš„æ ¼å¼å®šä¹‰å¥½åï¼Œåœ¨Â `weblog-web`Â æ¨¡å—ä¸­çš„Â `/model/vo/category`Â åŒ…ä¸‹ï¼Œåˆ›å»ºå¯¹åº”çš„å‡ºå…¥å‚Â `VO`Â ç±»ã€‚

### 3.1 å…¥å‚ VO

```java
@Data  
@AllArgsConstructor  
@NoArgsConstructor  
@Builder  
@ApiModel("é¦–é¡µåˆ†ç±»é¡µé¢ä¸‹ï¼ŒæŸ¥è¯¢åˆ†ç±»å¯¹åº”çš„æ–‡ç« é›†åˆæ¥å£çš„å…¥å‚VO")  
public class FindCategoryArticlePageListReqVO extends BasePageQuery {  
    /**  
     * åˆ†ç±»ID  
     */    @NotNull(message = "åˆ†ç±» ID ä¸èƒ½ä¸ºç©º")  
    private Long id;  
}
```

### 3.2 å‡ºå‚ VO

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class FindCategoryArticlePageListRspVO {
    private Long id;
    private String cover;
    private String title;
    /**
     * å‘å¸ƒæ—¥æœŸ
     */
    private LocalDate createDate;

}
```

## 4 å°è£… Mapper æ¥å£æŸ¥è¯¢æ–¹æ³•

åœ¨å†™ä¸šåŠ¡å±‚ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°è£…ä¸¤ä¸ªÂ `Mapper`Â æŸ¥è¯¢æ–¹æ³•ã€‚

### 4.1 æ·»åŠ æ ¹æ®åˆ†ç±» ID æŸ¥è¯¢æ‰€æœ‰å…³è”è®°å½•æ–¹æ³•

ç¼–è¾‘Â `ArticleCategoryRelMapper`Â æ¥å£ï¼Œå°è£…ä¸€ä¸ªæ ¹æ®åˆ†ç±» ID æŸ¥è¯¢æ‰€æœ‰å…³è”è®°å½•çš„é»˜è®¤æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface ArticleCategoryRelMapper extends BaseMapper<ArticleCategoryRelDO> {

	// çœç•¥...

    /**
     * æ ¹æ®åˆ†ç±» ID æŸ¥è¯¢æ‰€æœ‰çš„å…³è”è®°å½•
     * @param categoryId
     * @return
     */
    default List<ArticleCategoryRelDO> selectListByCategoryId(Long categoryId) {
        return selectList(Wrappers.<ArticleCategoryRelDO>lambdaQuery()
                .eq(ArticleCategoryRelDO::getCategoryId, categoryId));
    }
}
```

### 4.2 æ ¹æ®æ–‡ç«  ID æ‰¹é‡æŸ¥è¯¢åˆ†é¡µæŸ¥è¯¢æ–¹æ³•

ç¼–è¾‘Â `ArticleMapper`Â æ¥å£ï¼Œå°è£…ä¸€ä¸ªæ ¹æ®æ–‡ç«  ID æ‰¹é‡æŸ¥è¯¢åˆ†é¡µæŸ¥è¯¢çš„é»˜è®¤æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ ï¼š

```java
public interface ArticleMapper extends BaseMapper<ArticleDO> {

   	// çœç•¥...

    /**
     * æ ¹æ®æ–‡ç«  ID æ‰¹é‡åˆ†é¡µæŸ¥è¯¢
     * @param current
     * @param size
     * @param articleIds
     * @return
     */
    default Page<ArticleDO> selectPageListByArticleIds(Long current, Long size, List<Long> articleIds) {
        // åˆ†é¡µå¯¹è±¡(æŸ¥è¯¢ç¬¬å‡ é¡µã€æ¯é¡µå¤šå°‘æ•°æ®)
        Page<ArticleDO> page = new Page<>(current, size);

        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<ArticleDO> wrapper = Wrappers.<ArticleDO>lambdaQuery()
                .in(ArticleDO::getId, articleIds) // æ‰¹é‡æŸ¥è¯¢
                .orderByDesc(ArticleDO::getCreateTime); // æŒ‰åˆ›å»ºæ—¶é—´å€’å™

        return selectPage(page, wrapper);
    }
}
```

## 5 æ–°å¢ service å±‚é€»è¾‘

ç¼–è¾‘Â `CategoryService`Â åˆ†ç±»ä¸šåŠ¡æ¥å£ï¼Œæ·»åŠ ä¸€ä¸ªè·å–åˆ†ç±»ä¸‹æ–‡ç« åˆ†é¡µæ•°æ®æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface CategoryService {
	// çœç•¥...

    /**
     * è·å–åˆ†ç±»ä¸‹æ–‡ç« åˆ†é¡µæ•°æ®
     * @param findCategoryArticlePageListReqVO
     * @return
     */
    Response findCategoryArticlePageList(FindCategoryArticlePageListReqVO findCategoryArticlePageListReqVO);
}
```

ç„¶åï¼Œåœ¨å…¶å®ç°ç±»Â `CategoryServiceImpl`Â ä¸­å®ç°ä¸Šè¿°æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Service
@Slf4j
public class CategoryServiceImpl implements CategoryService {

    @Autowired
    private CategoryMapper categoryMapper;
    @Autowired
    private ArticleCategoryRelMapper articleCategoryRelMapper;
    @Autowired
    private ArticleMapper articleMapper;

	// çœç•¥...

    /**
     * è·å–åˆ†ç±»ä¸‹æ–‡ç« åˆ†é¡µæ•°æ®
     *
     * @param findCategoryArticlePageListReqVO
     * @return
     */
    @Override
    public Response findCategoryArticlePageList(FindCategoryArticlePageListReqVO findCategoryArticlePageListReqVO) {
        Long current = findCategoryArticlePageListReqVO.getCurrent();
        Long size = findCategoryArticlePageListReqVO.getSize();
        Long categoryId = findCategoryArticlePageListReqVO.getId();

        CategoryDO categoryDO = categoryMapper.selectById(categoryId);

        // åˆ¤æ–­è¯¥åˆ†ç±»æ˜¯å¦å­˜åœ¨
        if (Objects.isNull(categoryDO)) {
            log.warn("==> è¯¥åˆ†ç±»ä¸å­˜åœ¨, categoryId: {}", categoryId);
            throw new BizException(ResponseCodeEnum.CATEGORY_NOT_EXISTED);
        }

        // å…ˆæŸ¥è¯¢è¯¥åˆ†ç±»ä¸‹æ‰€æœ‰å…³è”çš„æ–‡ç«  ID
        List<ArticleCategoryRelDO> articleCategoryRelDOS = articleCategoryRelMapper.selectListByCategoryId(categoryId);
		
		// è‹¥è¯¥åˆ†ç±»ä¸‹æœªå‘å¸ƒä»»ä½•æ–‡ç« 
        if (CollectionUtils.isEmpty(articleCategoryRelDOS)) {
            log.info("==> è¯¥åˆ†ç±»ä¸‹è¿˜æœªå‘å¸ƒä»»ä½•æ–‡ç« , categoryId: {}", categoryId);
            return PageResponse.success(null, null);
        }
		
        List<Long> articleIds = articleCategoryRelDOS.stream().map(ArticleCategoryRelDO::getArticleId).collect(Collectors.toList());

        // æ ¹æ®æ–‡ç«  ID é›†åˆæŸ¥è¯¢æ–‡ç« åˆ†é¡µæ•°æ®
        Page<ArticleDO> page = articleMapper.selectPageListByArticleIds(current, size, articleIds);
        List<ArticleDO> articleDOS = page.getRecords();

        // DO è½¬ VO
        List<FindCategoryArticlePageListRspVO> vos = null;
        if (!CollectionUtils.isEmpty(articleDOS)) {
            vos = articleDOS.stream()
                    .map(articleDO -> ArticleConvert.INSTANCE.convertDO2CategoryArticleVO(articleDO))
                    .collect(Collectors.toList());
        }

        return PageResponse.success(page, vos);
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡åˆ†ç±»Â `ID`Â è¿›è¡ŒæŸ¥è¯¢ï¼Œè‹¥è®°å½•åˆ™ç©ºï¼Œåˆ™æ‰‹åŠ¨æŠ›å‡ºä¸€ä¸ªä¸šåŠ¡å¼‚å¸¸ï¼Œæç¤ºé”™è¯¯ä¿¡æ¯ï¼š_è¯¥åˆ†ç±»ä¸å­˜åœ¨_ã€‚å¦åˆ™ï¼Œé€šè¿‡è¯¥åˆ†ç±»Â `ID`Â å°†æ‰€å…³è”çš„æ‰€æœ‰æ–‡ç« è®°å½•æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åï¼Œæ ¹æ®æ–‡ç« Â `ID`Â é›†åˆæŸ¥è¯¢æ–‡ç« åˆ†é¡µæ•°æ®ï¼Œæœ€åè¿›è¡ŒÂ `DO`Â è½¬æ¢Â `VO`Â æ“ä½œï¼Œå¹¶è¿”å›ç»™å‰ç«¯ã€‚

### 5.1 æ–°å¢ convert è½¬æ¢

ä¸Šè¿°Â `service`Â ä¸šåŠ¡å±‚ï¼Œè¿˜æ¶‰åŠåˆ°äº†Â `ArticleDO`Â è½¬æ¢Â `FindCategoryArticlePageListRspVO`Â æ“ä½œï¼Œè¿˜éœ€è¦åœ¨Â `ArticleConvert`Â æ–‡ç« è½¬æ¢æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªè½¬æ¢æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Mapper
public interface ArticleConvert {

	// çœç•¥...

    /**
     * å°† DO è½¬æ¢æˆåˆ†ç±»æ–‡ç«  VO
     * @param bean
     * @return
     */
    @Mapping(target = "createDate", expression = "java(java.time.LocalDate.from(bean.getCreateTime()))")
    FindCategoryArticlePageListRspVO convertDO2CategoryArticleVO(ArticleDO bean);
}
```

## 6 æ–°å¢ controller æ¥å£

ä¸šåŠ¡å±‚æå®šåï¼Œæ¥ç€ç¼–è¾‘Â `CategoryController`Â åˆ†ç±»æ§åˆ¶å™¨ï¼Œå¹¶æ·»åŠ Â `/category/article/list`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@RestController
@RequestMapping("/category")
@Api(tags = "åˆ†ç±»")
public class CategoryController {

    @Autowired
    private CategoryService categoryService;

	// çœç•¥...

    @PostMapping("/article/list")
    @ApiOperation(value = "å‰å°è·å–åˆ†ç±»ä¸‹æ–‡ç« åˆ†é¡µæ•°æ®")
    @ApiOperationLog(description = "å‰å°è·å–åˆ†ç±»ä¸‹æ–‡ç« åˆ†é¡µæ•°æ®")
    public Response findCategoryArticlePageList(@RequestBody @Validated FindCategoryArticlePageListReqVO findCategoryArticlePageListReqVO) {
        return categoryService.findCategoryArticlePageList(findCategoryArticlePageListReqVO);
    }
}
```

## 7 æµ‹è¯•çœ‹çœ‹

é‡å¯é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®Â `/doc.html`Â , æµ‹è¯•ä¸€æ³¢è¯¥æ¥å£åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚å…¥å‚å¦‚ä¸‹ï¼š

```json
{
  "current": 1,
  "id": 3,
  "size": 10
}
```

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/05/a747cf3d5bea354bcadb016d513cb022.png)

OK , æ¥å£èƒ½å¤Ÿæ­£å¸¸è¿”å›åˆ†ç±»Â `ID`Â ä¸º 19 çš„æ–‡ç« åˆ†é¡µæ•°æ®ï¼Œæµ‹è¯•é€šè¿‡ã€‚