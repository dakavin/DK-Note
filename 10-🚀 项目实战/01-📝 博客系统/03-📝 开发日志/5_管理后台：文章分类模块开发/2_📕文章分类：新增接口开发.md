---
æ–‡ç« æ ‡é¢˜: "[[2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« è¯¦ç»†è®²è§£äº†ä½¿ç”¨Javaã€Spring Bootå’ŒMyBatis-Pluså¼€å‘æ–‡ç« åˆ†ç±»æ–°å¢åç«¯æ¥å£çš„å…¨è¿‡ç¨‹ã€‚æ¶µç›–æ•°æ®åº“è¡¨è®¾è®¡ã€å®ä½“æ˜ å°„ã€æ•°æ®è®¿é—®ã€ä¸šåŠ¡é€»è¾‘ã€APIå®ç°åŠå‚æ•°æ ¡éªŒï¼Œå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„CRUDæ¥å£ã€‚
æ–‡ç« æ ‡ç­¾:
- "Spring Boot"
- "MyBatis-Plus"
- "åç«¯å¼€å‘"
- "RESTful API"
- "æ•°æ®åº“è®¾è®¡"
- "åˆ†å±‚æ¶æ„"
- "CRUD"
ç›¸å…³æ–‡ç« :
- "[[0_å¯¼è¯»]]"
- "[[15_ğŸ“•ä¿®æ”¹ç”¨æˆ·å¯†ç æ¥å£å¼€å‘]]"
- "[[16_ğŸ“•è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯æ¥å£å¼€å‘]]"
- "[[9_ğŸ“•Spring Boot è‡ªå®šä¹‰å“åº”å·¥å…·ç±»]]"
- "[[0_å‚è€ƒæ–‡ç« ç´¢å¼•]]"
æ–‡ç« åˆ†ç±»: "ğŸš€ é¡¹ç›®å®æˆ˜"
æ–‡ç« è·¯å¾„: "10-ğŸš€ é¡¹ç›®å®æˆ˜/01-ğŸ“ åšå®¢ç³»ç»Ÿ/03-ğŸ“ å¼€å‘æ—¥å¿—/5_ç®¡ç†åå°ï¼šæ–‡ç« åˆ†ç±»æ¨¡å—å¼€å‘/2_ğŸ“•æ–‡ç« åˆ†ç±»ï¼šæ–°å¢æ¥å£å¼€å‘.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-04-27 13:58:52
ä¿®æ”¹æ—¶é—´: 2025-05-27 00:56:19
---

æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠåˆ†ç±»æ–°å¢å¯¹åº”çš„åå°æ¥å£å¼€å‘å®Œæˆã€‚

## ä¸€ã€æ·»åŠ åˆ†ç±»è¡¨

![](https://img.quanxiaoha.com/quanxiaoha/169505044360858)

é¦–å…ˆï¼Œå°†åˆ†ç±»è¡¨ç»“æ„è®¾è®¡ä¸€ä¸‹ï¼Œå»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š

```mysql
CREATE TABLE `t_category` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'åˆ†ç±»id',
  `name` varchar(60) NOT NULL DEFAULT '' COMMENT 'åˆ†ç±»åç§°',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'æœ€åä¸€æ¬¡æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint(2) NOT NULL DEFAULT '0' COMMENT 'é€»è¾‘åˆ é™¤æ ‡å¿—ä½ï¼š0ï¼šæœªåˆ é™¤ 1ï¼šå·²åˆ é™¤',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `uk_name` (`name`) USING BTREE,
  KEY `idx_create_time` (`create_time`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=DYNAMIC COMMENT='æ–‡ç« åˆ†ç±»è¡¨';
```

ä¸Šè¿°å»ºè¡¨è¯­å¥ä¸­ï¼ŒåŒ…å«äº†æ•°æ®åº“å»ºè¡¨çš„ä¸€äº›é€šç”¨å­—æ®µï¼Œå¦‚ä¸»é”®Â `id`Â , åˆ›å»ºæ—¶é—´ï¼Œæ›´æ–°æ—¶é—´ï¼Œé€»è¾‘åˆ é™¤å­—æ®µã€‚ç„¶åï¼Œå°±æ˜¯æ ¸å¿ƒçš„åˆ†ç±»åç§°å­—æ®µã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¸º==åˆ†ç±»åç§°æ·»åŠ äº†å”¯ä¸€ç´¢å¼•==ï¼Œä¿è¯åˆ†ç±»åç§°ä¸ä¼šæœ‰é‡å¤ï¼Œä»¥åŠ==æ·»åŠ äº†åˆ›å»ºæ—¶é—´çš„ç´¢å¼•==ï¼Œç›®çš„æ˜¯åç»­åˆ†é¡µæŸ¥è¯¢ä¸­ï¼Œä¼šæ¶‰åŠåˆ°åˆ›å»ºæ—¶é—´åŒºé—´çš„ç­›é€‰æ¡ä»¶ï¼Œä¸ºè¯¥å­—æ®µå»ºç´¢å¼•ï¼Œå¯ä»¥æå‡æŸ¥è¯¢é€Ÿåº¦ã€‚

## äºŒã€æ·»åŠ è¡¨å¯¹åº”çš„ DO ç±»

åˆ†ç±»è¡¨å»ºç«‹å¥½åï¼Œåˆ›å»ºå…¶æ•°æ®åº“Â `DO`Â ç±»ã€‚åœ¨Â `weblog-module-common`Â æ¨¡å—ä¸­çš„Â `/domain/dos`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `CategoryDO`Â å®ä½“ç±»ï¼Œå­—æ®µä¸è¡¨ä¸­å­—æ®µä¸€ä¸€å¯¹åº”ï¼š

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@TableName("t_category")
public class CategoryDO {

    @TableId(type = IdType.AUTO)
    private Long id;

    private String name;

    private LocalDateTime createTime;

    private LocalDateTime updateTime;

    private Boolean isDeleted;
}
```

## ä¸‰ã€æ–°å»º mapper

ç„¶ååœ¨Â `/domain/mapper`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `CategoryMapper`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface CategoryMapper extends BaseMapper<CategoryDO> {

    /**
     * æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢
     * @param categoryName
     * @return
     */
    default CategoryDO selectByName(String categoryName) {
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<CategoryDO> wrapper = new LambdaQueryWrapper<>();
        wrapper.eq(CategoryDO::getName, categoryName);

        // æ‰§è¡ŒæŸ¥è¯¢
        return selectOne(wrapper);
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨Â `mapper`Â æ¥å£ä¸­ï¼Œæ·»åŠ äº†ä¸€ä¸ªÂ `selectByName()`Â æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢çš„æ–¹æ³•ã€‚ç›®çš„æ˜¯ï¼Œç­‰ä¼šåœ¨æ‰§è¡Œæ–°å¢åˆ†ç±»ä¹‹å‰ï¼Œè¿˜éœ€è¦åˆ¤æ–­ä¸€ä¸‹æ·»åŠ çš„åˆ†ç±»æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™ç»™å‡ºæç¤ºä¿¡æ¯ã€‚

æœ€ç»ˆæ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169503912467148)

## å››ã€æ·»åŠ å…¥å‚ VO å®ä½“ç±»

æ•°æ®åº“å±‚çš„Â `DO`Â ç±»æ–°å»ºå¥½åï¼Œæˆ‘ä»¬æ¥å»ºç«‹Â `VO`Â å®ä½“ç±»ï¼Œå¯¹åº”å‰ç«¯æäº¤çš„æ•°æ®å®ä½“ã€‚ç¼–è¾‘Â `weblog-module-admin`Â å­æ¨¡å—ï¼Œåœ¨Â `vo`Â åŒ…ä¸‹ï¼Œæ–°å¢Â `category`Â åŒ…ï¼Œåç»­æ‰€æœ‰å’Œåˆ†ç±»ç›¸å…³çš„Â `VO`Â å®ä½“ç±»å‡æ”¾åœ¨æ­¤åŒ…ä¸‹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169503473441823)

ç„¶ååˆ›å»ºÂ `AddCategoryReqVO`Â å…¥å‚å®ä½“ç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@Data
@AllArgsConstructor
@NoArgsConstructor
@Builder
@ApiModel(value = "æ·»åŠ åˆ†ç±» VO")
public class AddCategoryReqVO {

    @NotBlank(message = "åˆ†ç±»åç§°ä¸èƒ½ä¸ºç©º")
    @Length(min = 1, max = 10, message = "åˆ†ç±»åç§°å­—æ•°é™åˆ¶ 1 ~ 10 ä¹‹é—´")
    private String name;

}
```

å…¥å‚Â `VO`Â ç±»ä¸­ï¼Œåªéœ€è¦ä¸€ä¸ªåˆ†ç±»åå­—æ®µå³å¯ã€‚æ³¨æ„ï¼Œ`name`Â å­—æ®µæ·»åŠ äº†å‚æ•°æ ¡éªŒæ³¨è§£ï¼ŒæŒ‡å®šäº†è¯¥å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œä¸”é•¿åº¦é™åˆ¶åœ¨Â `1~10`Â ä¹‹é—´ã€‚

> ğŸ’¡ TIP :Â `@Length`Â æ³¨è§£æ˜¯Â `hibernate`Â ä¸­çš„ä¸€ä¸ªæ³¨è§£ã€‚å¦‚æœæŠ¥Â `@Length`Â æ³¨è§£æ‰¾ä¸åˆ°ï¼Œéœ€è¦åœ¨Â `weblog-module-admin`Â çš„Â `pom.xml`Â æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š

```xml
<dependency>
  <groupId>org.hibernate.validator</groupId>
  <artifactId>hibernate-validator</artifactId>
</dependency>
```

## äº”ã€æ·»åŠ åˆ†ç±» service ä¸šåŠ¡ç±»

æ¥ä¸‹æ¥ï¼Œåœ¨Â `/service`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `AdminCategoryService`Â æ¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public interface AdminCategoryService {
    /**
     * æ·»åŠ åˆ†ç±»
     * @param addCategoryReqVO
     * @return
     */
    Response addCategory(AddCategoryReqVO addCategoryReqVO);
}
```

æ¥å£ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªÂ `addCategory()`Â æ·»åŠ åˆ†ç±»çš„æ–¹æ³•ã€‚ç„¶ååœ¨Â `/service/impl`Â åŒ…ä¸‹ï¼Œåˆ›å»ºæ­¤æ¥å£çš„å®ç°ç±»Â `AdminCategoryServiceImpl`Â ï¼Œ ä»£ç å¦‚ä¸‹ï¼š

```java
@Service
@Slf4j
public class AdminCategoryServiceImpl implements AdminCategoryService {

    @Autowired
    private CategoryMapper categoryMapper;

    /**
     * æ·»åŠ åˆ†ç±»
     *
     * @param addCategoryReqVO
     * @return
     */
    @Override
    public Response addCategory(AddCategoryReqVO addCategoryReqVO) {
		String categoryName = addCategoryReqVO.getName();

        // å…ˆåˆ¤æ–­è¯¥åˆ†ç±»æ˜¯å¦å·²ç»å­˜åœ¨
        CategoryDO categoryDO = categoryMapper.selectByName(categoryName);

        if (Objects.nonNull(categoryDO)) {
            log.warn("åˆ†ç±»åç§°ï¼š {}, æ­¤åˆ†ç±»å·²å­˜åœ¨", categoryName);
            throw new BizException(ResponseCodeEnum.CATEGORY_NAME_IS_EXISTED);
        }

        // æ„å»º DO ç±»
        CategoryDO insertCategoryDO = CategoryDO.builder()
                .name(addCategoryReqVO.getName().trim())
                .build();

        // æ‰§è¡Œ insert
        categoryMapper.insert(insertCategoryDO);

        return Response.success();
    }
}
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ³¨å…¥äº†ç”¨äºæ“ä½œæ•°æ®åº“çš„Â `CategoryMapper`Â ï¼Œ ç„¶ååœ¨æ·»åŠ åˆ†ç±»æ–¹æ³•ä¸­ï¼Œé¦–å…ˆæ‹¿åˆ°äº†åˆ†ç±»åç§°ï¼Œé€šè¿‡åç§°å»æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œè‹¥å­˜åœ¨è®°å½•ï¼Œåˆ™è¡¨ç¤ºè¯¥åˆ†ç±»å·²ç»å­˜åœ¨ï¼Œä¸»åŠ¨æŠ›å‡ºä¸€ä¸ªä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›è¯¥åˆ†ç±»å·²æ·»åŠ çš„ä¿¡æ¯ã€‚å¦åˆ™ï¼Œå»æ„å»ºÂ `CategoryDO`Â ç±»ï¼Œç„¶åæ‰§è¡Œäº†Â `insert()`Â æ–¹æ³•æ’å…¥åˆ†ç±»æ•°æ®ï¼Œæœ€åè¿”å›æˆåŠŸå“åº”ã€‚æ•´ä½“ç»“æ„å¦‚ä¸‹ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169503811934980)

### 5.1 æ·»åŠ æšä¸¾å€¼

ä¸Šè¿°ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œè¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªåˆ†ç±»å·²å­˜åœ¨æšä¸¾å€¼ã€‚ç¼–è¾‘Â `weblog-module-common`Â æ¨¡å—ä¸­çš„Â `ResponseCodeEnum`Â æšä¸¾ï¼Œæ·»åŠ å¦‚ä¸‹æšä¸¾å€¼ï¼š

```
CATEGORY_NAME_IS_EXISTED("20005", "è¯¥åˆ†ç±»å·²å­˜åœ¨ï¼Œè¯·å‹¿é‡å¤æ·»åŠ ï¼"),
```

## å…­ã€æ·»åŠ  controller

æœ€åï¼Œåœ¨Â `admin/controller`Â åŒ…ä¸‹ï¼Œåˆ›å»ºÂ `AdminCategoryController`Â åˆ†ç±»æ§åˆ¶å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
@RestController
@RequestMapping("/admin")
@Api(tags = "Admin åˆ†ç±»æ¨¡å—")
public class AdminCategoryController {

    @Autowired
    private AdminCategoryService categoryService;

    @PostMapping("/category/add")
    @ApiOperation(value = "æ·»åŠ åˆ†ç±»")
    @ApiOperationLog(description = "æ·»åŠ åˆ†ç±»")
    public Response addCategory(@RequestBody @Validated AddCategoryReqVO addCategoryReqVO) {
        return categoryService.addCategory(addCategoryReqVO);
    }


}
```

åœ¨æ­¤æ§åˆ¶å™¨ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªÂ `/admin/category/add`Â æ·»åŠ åˆ†ç±»çš„æ¥å£ï¼Œç„¶ååœ¨æ¥å£æ–¹æ³•ä¸­ï¼Œè°ƒç”¨äº†Â `AdminCategoryService`Â çš„æ·»åŠ åˆ†ç±»æ–¹æ³•ã€‚

## ä¸ƒã€æµ‹è¯•ä¸€æ³¢

å®Œæˆä¸Šè¿°åŠŸèƒ½å¼€å‘åï¼Œæ·»åŠ åˆ†ç±»çš„æ¥å£å°±å®Œæˆäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ¥å£æœ‰æ²¡æœ‰é—®é¢˜ã€‚

### 7.1 åˆ†ç±»åä¸ºç©ºã€é•¿åº¦å¤§äº 20 çš„æƒ…å†µ

é‡å¯é¡¹ç›®ï¼Œæµè§ˆå™¨è®¿é—®Â `/doc.html`Â , è°ƒè¯•æ·»åŠ åˆ†ç±»æ¥å£ã€‚å…¥å‚æ•°æ®æˆ‘ä»¬æ•…æ„å¡«å†™ä¸ºç©ºã€é•¿åº¦å¤§äº 20 ä¸ªå­—ç¬¦ä¸¤ç§æƒ…å†µï¼Œç„¶åè¯·æ±‚æ¥å£ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169503837364773)

![](https://img.quanxiaoha.com/quanxiaoha/169503850034742)

å¯ä»¥çœ‹åˆ°ï¼Œåç«¯æ­£ç¡®å“åº”äº†å‚æ•°æ ¡éªŒé”™è¯¯ä¿¡æ¯ã€‚

### 7.2 å…¥å‚æ­£ç¡®çš„æƒ…å†µ

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¡«å†™æ­£ç¡®çš„å…¥å‚ï¼Œåˆ†ç±»åä¸ºï¼š_æµ‹è¯•åˆ†ç±»_ï¼š

![](https://img.quanxiaoha.com/quanxiaoha/169503857171653)

![](https://img.quanxiaoha.com/quanxiaoha/169503865782251)

OK , æœåŠ¡ç«¯å“åº”æ’å…¥æˆåŠŸï¼Œå¹¶ä¸”ï¼Œæ•°æ®åº“ä¸­ä¹Ÿæœ‰äº†è¯¥æ¡æ•°æ®ã€‚
## ä¹ã€ç»“è¯­

æœ¬å°èŠ‚ä¸­ï¼Œå°å“ˆå¸¦ç€å¤§å®¶ç»™åç«¯æœåŠ¡æ·»åŠ äº†åˆ†ç±»æ–°å¢æ¥å£ï¼ŒåŠŸèƒ½å®ç°ä¸Šéå¸¸ç®€å•ã€‚ç°åœ¨æˆ‘ä»¬æ˜¯ä¸ªÂ `CRUD`Â ç”·å­©å•¦~