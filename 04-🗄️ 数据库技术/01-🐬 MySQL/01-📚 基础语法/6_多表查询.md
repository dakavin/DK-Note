---
æ–‡ç« æ ‡é¢˜: "[[6_å¤šè¡¨æŸ¥è¯¢]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  è¯¦ç»†ä»‹ç»MySQLå¤šè¡¨æŸ¥è¯¢ï¼Œä»ç¬›å¡å°”ç§¯é—®é¢˜å¼•å…¥ï¼Œç³»ç»Ÿè®²è§£SQL92å’ŒSQL99è¯­æ³•å®ç°å†…è¿æ¥ã€å¤–è¿æ¥ï¼Œä»¥åŠUNIONæ“ä½œå’Œ7ç§JOINç±»å‹çš„å…·ä½“åº”ç”¨ã€‚
tags:
- "MySQL"
- "å¤šè¡¨æŸ¥è¯¢"
- "JOINè¿æ¥"
- "å¤–è¿æ¥"
- "UNION"
- "SQL99è¯­æ³•"
- "ç¬›å¡å°”ç§¯"
- "æ•°æ®åº“æŸ¥è¯¢"
ç›¸å…³æ–‡ç« :
- "[[3_Selectçš„æ‰§è¡Œè¿‡ç¨‹]]"
- "[[1_ğŸ“•åšå®¢è®¾ç½®æ¨¡å—åŠŸèƒ½åˆ†æã€è¡¨è®¾è®¡]]"
- "[[1_æ–‡ç« è¯¦æƒ…é¡µæ¥å£å¼€å‘]]"
- "[[1_Part1]]"
- "[[2_ğŸ“•æ ‡ç­¾ç®¡ç†ï¼šæ¥å£å¼€å‘]]"
æ–‡ç« åˆ†ç±»: "ğŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯"
æ–‡ç« è·¯å¾„: "04-ğŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯/01-ğŸ¬ MySQL/01-ğŸ“š åŸºç¡€è¯­æ³•/6_å¤šè¡¨æŸ¥è¯¢.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:09:58
---

## 1 ä¸€ä¸ªæ¡ˆä¾‹å¼•å‘çš„å¤šè¡¨è¿æ¥

- å¤ä¹ å·²å­¦çš„è¯­å¥æ ¼å¼
```mysql
SELECT ... , ... , ...
FROM ...
WHERE ... AND \ OR \ NOT 
ORDER BY ...(ASC\DESC) ,...
LIMIT ...
```

### 1.1 æ¡ˆä¾‹è¯´æ˜

- å…ˆç†Ÿæ‚‰3ä¸ªè¡¨ï¼Œemployees , departments , locations 
- é€šè¿‡ä¸‰ä¸ªè¡¨ï¼Œè·å–æŸä¸ªå‘˜å·¥çš„å·¥ä½œä½ç½®
- æ€è·¯ï¼šå‘˜å·¥è¡¨ä¸­è·å¾—department_idï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è·å¾—loacation_id ï¼Œ åœ¨ä½ç½®è¡¨ä¸­è·å¾—å¯¹åº”location_id çš„ä½ç½®
- ä»£ç å®ç°

```mysql
#æŸ¥è¯¢å‘˜å·¥åä¸º 'Abel' çš„äººåœ¨å“ªä¸ªåŸå¸‚å·¥ä½œï¼Ÿ
SELECT * 
FROM employees 
WHERE last_name = 'Abel';

SELECT * 
FROM departments
WHERE department_id = 80 ;

SELECT * 
FROM locations
WHERE location_id = 2500;
```

- ç»“è®ºï¼šå¾ˆæ˜¾ç„¶æŸ¥æ‰¾ä¸€ä¸ªæ•°æ®ï¼Œé€šè¿‡äº†å¤šå¼ è¡¨çš„æŸ¥è¯¢å·¥ä½œ
- é—®é¢˜1ï¼šæ¯æ¬¡éƒ½ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œè¿›è¡Œäº†3æ¬¡äº¤äº’ï¼Œæ¯æ¬¡åˆæŸ¥æ‰¾äº†nä¸ªæ•°æ®ï¼Œè€—æ—¶è¾ƒå¤§
- é—®é¢˜2ï¼šå¯ä»¥æŠŠ3å¼ è¡¨åˆæˆ1å¼ è¡¨ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿå†—ä½™æ•°æ®ï¼ˆnullï¼‰å’Œæµªè´¹å­˜å‚¨ç©ºé—´
- é—®é¢˜3ï¼šè‹¥æ˜¯åªæœ‰1å¼ è¡¨ï¼Œå†…å­˜ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œéœ€è¦åŠ è½½ç‰¹åˆ«å¤šçš„å†—ä½™å­—æ®µï¼Œå¯¼è‡´æ•ˆç‡é™ä½

### 1.2 ç¬›å¡å°”ç§¯ï¼ˆäº¤å‰è¿æ¥ï¼‰çš„ç†è§£

- è§æ¡ˆä¾‹
```mysql
# æŸ¥è¯¢å‘˜å·¥idå’Œéƒ¨é—¨åç§°ï¼ˆåœ¨éƒ¨é—¨è¡¨ä¸­ï¼‰
SELECT employee_id , department_name
FROM employees , departments
#ä¹Ÿå¯ä»¥å†™æˆ
FROM employees CROSS JOIN departments
FROM employees INNER JOIN departments
FROM employees JOIN departments
```

- è·å¾—2889æ¡æ•°æ® 2889 = 107 *  27
- æ˜¾ç¤ºçš„æ˜¯ æ¯ä¸ªå‘˜å·¥åœ¨æ¯ä¸ªéƒ¨é—¨éƒ½å·¥ä½œè¿‡ï¼Œå³æ¯ä¸ªå‘˜å·¥å’Œæ¯ä¸ªéƒ¨é—¨éƒ½åŒ¹é…äº†ä¸€é
- ä¸Šè¿°é”™è¯¯ï¼Œç§°ä¸º`è¿ªå¡å°”ç§¯çš„é”™è¯¯`

- è¡¥å……ï¼š
	- SQL92ä¸­ï¼Œç¬›å¡å°”ç§¯ä¹Ÿç§°ä¸ºäº¤å‰è¿æ¥ï¼Œè‹±æ–‡æ˜¯ CROSS JOIN ã€‚
	- SQL99ä¸­ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ CROSS JOIN è¡¨ç¤ºäº¤å‰è¿æ¥çš„
	- å®ƒçš„ä½œç”¨å°±æ˜¯å¯ä»¥æŠŠä»»æ„è¡¨è¿›è¡Œè¿æ¥ï¼Œå³ä½¿è¿™ä¸¤å¼ è¡¨ä¸ç›¸å…³ï¼Œä¹Ÿå¯ä»¥æŒ‰ä¸Šè¿°æ¡ˆä¾‹å…¶ä»–å†™æ³•å†™ã€‚
	
### 1.3 é—®é¢˜è§£å†³

- ä¸Šè¿°é”™è¯¯çš„åŸå› ï¼šç¼ºå°‘äº†å¤šè¡¨çš„è¿æ¥æ¡ä»¶
- æ­£ç¡®çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š
- å…³è”æŸ¥è¯¢

```mysql
# æŸ¥è¯¢å‘˜å·¥idå’Œéƒ¨é—¨åç§°ï¼ˆåœ¨éƒ¨é—¨è¡¨ä¸­ï¼‰
SELECT employee_id , department_name
FROM employees , departments
WHERE employees.`department_id` = departments.department_id;
```

- æ·±å…¥ç†è§£
	- å¦‚æœæŸ¥è¯¢è¯­å¥ä¸­å‡ºç°äº†å¤šä¸ªè¡¨éƒ½å­˜åœ¨çš„å­—æ®µï¼Œåˆ™å¿…é¡»æŒ‡æ˜æ­¤å­—æ®µæ‰€åœ¨çš„è¡¨
- å»ºè®®ï¼šä»SQLä¼˜åŒ–çš„è§’åº¦ï¼Œå»ºè®®å¤šè¡¨æŸ¥è¯¢æ—¶ï¼Œæ¯ä¸ªå­—æ®µå‰éƒ½æŒ‡æ˜å…¶æ‰€åœ¨çš„è¡¨
- å»ºè®®ï¼šä¸ºäº†å‡å°‘è¡¨æ˜å†—ä½™ï¼Œå¯ä»¥ç»™è¡¨èµ·åˆ«åï¼Œæ³¨æ„èµ·åˆ«ååï¼ŒSELECTå’ŒWHEREåªèƒ½ä½¿ç”¨åˆ«åï¼ï¼ï¼
```mysql
# æŸ¥è¯¢å‘˜å·¥idå’Œéƒ¨é—¨åç§°ï¼ˆåœ¨éƒ¨é—¨è¡¨ä¸­ï¼‰
SELECT employee_id , department_name , department_id
FROM employees , departments
WHERE employees.`department_id` = departments.department_id;
#ä¸Šè¿°é”™è¯¯ï¼Œå› ä¸ºdepartment_id åœ¨2ä¸ªè¡¨ä¸­éƒ½æœ‰ï¼Œç³»ç»Ÿä¸çŸ¥é“é€‰æ‹©é‚£ä¸ªè¡¨
# æ‰€ä»¥å¿…é¡»åœ¨å­—æ®µå‰åŠ ä¸Šæ‰€å¼•ç”¨çš„è¡¨ï¼Œå†™æˆ ï¼š employees.department_id

# ä¼˜åŒ–ä»£ç 
SELECT employees.employee_id , employees.department_id , departments.department_name
FROM employees , departments
WHERE employees.`department_id` = departments.department_id

# ä¼˜åŒ–ä»£ç 
SELECT emp.employee_id , emp.department_id , dept.department_name
FROM employees emp , departments dept
WHERE emp.`department_id` = dept.department_id
```
- ç»“è®ºï¼š å¦‚æœæœ‰nä¸ªè¡¨å®ç°å¤šè¡¨çš„æŸ¥è¯¢ï¼Œåˆ™`è‡³å°‘`éœ€è¦`n-1`ä¸ªè¿æ¥æ¡ä»¶
- ç»ƒä¹ ï¼š æŸ¥è¯¢å‘˜å·¥çš„employee_id , last_name , department_name , city
```mysql
SELECT e.employee_id , e.last_name , d.department_name , l.city , e.department_id , d.location_id
FROM employees e , departments d , locations l
WHERE e.department_id = d.department_id AND d.location_id = l.location_id
```

- å­¦ä¹ æ–¹å¼
	- æ¼”ç»å¼ï¼šæå‡ºé—®é¢˜ ---> è§£å†³é—®é¢˜
	- å½’çº³å¼ï¼šæ€»ç»“é—®é¢˜ï¼ˆæ€»ï¼‰ ---> ç»†åŒ–é—®é¢˜ï¼ˆåˆ†ï¼‰

## 2 å¤šè¡¨æŸ¥è¯¢åˆ†ç±»è®²è§£

### 2.1 ç­‰å€¼è¿æ¥ä¸éç­‰å€¼è¿æ¥

- é’ˆå¯¹è¿æ¥æ¡ä»¶è€Œè¨€

#### 2.1.1 ç­‰å€¼è¿æ¥

- ä¸Šè¿°å†™è¿‡çš„æ¡ˆä¾‹å‡ä¸ºç­‰å€¼è¿æ¥ï¼Œå°±ä¸å¤šå†™äº†

#### 2.1.2 éç­‰å€¼è¿æ¥

- æ¡ˆä¾‹ï¼šæŸ¥çœ‹ä¸€ä¸ªå‘˜å·¥çš„å§“åï¼Œå·¥èµ„å’Œgrade_level
```mysql 
SELECT e.last_name , e.salary , g.grade_level
FROM employees e , job_grades g
WHERE e.salary BETWEEN g.lowest_sal AND g.highest_sal
ORDER BY g.grade_level
WHERE e.salary >= g.lowest_sal AND e.salary <= g.highest_sal
```

### 2.2 è‡ªè¿æ¥ä¸éè‡ªè¿æ¥

- ä¸è‡ªæˆ‘å¼•ç”¨å¯¹åº”

- ä¸Šè¿°çš„æ¡ˆä¾‹éƒ½æ˜¯éè‡ªè¿æ¥

- ä¸‹é¢æ¡ˆä¾‹ä¸ºè‡ªè¿æ¥
- æ¡ˆä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥id ï¼Œå‘˜å·¥å§“å åŠå…¶ç®¡ç†è€…çš„idå’Œå§“å
```mysql
SELECT e1.employee_id , e1.last_name , e1.manager_id , e2.employee_id , e2.last_name
FROM employees e1 , employees e2 
WHERE e1.manager_id = e2.employee_id 
```

### 2.3 å†…è¿æ¥ä¸å¤–è¿æ¥

- åˆ†æä¸€ä¸ªæ¡ˆä¾‹
```mysql 
SELECT employee_id , department_name
FROM employees e, departments d
WHERE e.department_id = d.department_id	#åªæœ‰106æ¡è®°å½•
```

- ä¸Šè¿°æ¡ˆä¾‹ä¸­
	1. å‘˜å·¥è¡¨ä¸­æ²¡æœ‰éƒ¨é—¨çš„äººï¼Œæ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥
	2. éƒ¨é—¨è¡¨ä¸­æ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨ï¼Œæ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥
- å†…è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œï¼Œ`ç»“æœé›†`ä¸­åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦å¤–ä¸€ä¸ªè¡¨åŒ¹é…çš„è¡Œ

- æ‰€ä»¥ï¼Œè¦æƒ³å°†æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥çš„æ•°æ®ï¼Œæ˜¾ç¤ºå‡ºæ¥å°±ç§°ä¸º`å¤–è¿æ¥`

- å¤–è¿æ¥ï¼šåˆå¹¶å…·æœ‰åŒä¸€åˆ—çš„ä¸¤ä¸ªä»¥ä¸Šçš„è¡¨çš„è¡Œï¼Œ`ç»“æœé›†`ä¸­åŒ…å«ä¸€ä¸ªè¡¨ä¸å¦å¤–ä¸€ä¸ªè¡¨åŒ¹é…çš„è¡Œï¼Œè¿˜åŒ…å«å·¦è¡¨æˆ–å³è¾¹ä¸åŒ¹é…çš„è¡Œ
- å¤–è¿æ¥çš„åˆ†ç±»
	- `å·¦å¤–è¿æ¥`ï¼šä¸Šè¿°è¡¨ä¸­ï¼Œæ²¡æœ‰éƒ¨é—¨çš„å‘˜å·¥--->è¿”å›å·¦è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œ
	- `å³å¤–è¿æ¥`ï¼šä¸Šè¿°è¡¨ä¸­ï¼Œæ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨--->è¿”å›å³è¡¨ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œ
	- `æ»¡å¤–è¿æ¥`ï¼šä¸Šè¿°è¡¨ä¸­ï¼Œéƒ½åŒ…æ‹¬äº†          --->è¿”å›æ‰€æœ‰æ»¡è¶³å’Œä¸æ»¡è¶³æ¡ä»¶çš„è¡Œ
	
- æ¡ˆä¾‹ï¼šæŸ¥è¯¢`æ‰€æœ‰`å‘˜å·¥çš„last_name , department_nameä¿¡æ¯ï¼ˆå·¦å¤–è¿æ¥ï¼‰
- æ‰€æœ‰è¡¨ç¤ºä¸€å®šæ˜¯å¤–è¿æ¥ï¼ï¼ï¼

- SQL92æ ‡å‡†å®ç°å†…è¿æ¥ï¼šè§ä¸Š
- SQL92æ ‡å‡†å®ç°å¤–è¿æ¥ï¼šä½¿ç”¨ +  ï¼ˆMySQLä¸æ”¯æŒSQL92è¯­æ³•ä¸­å¤–è¿æ¥çš„å†™æ³•ï¼‰

```mysql 
SELECT employee_id , department_name
FROM employees e, departments d
WHERE e.department_id = d.department_id(+)	#éœ€è¦ä½¿ç”¨å·¦å¤–è¿æ¥
```

- ***ä¸Šé¢çš„æ¡ˆä¾‹éƒ½æ˜¯ä½¿ç”¨SQL92è¯­æ³•å®ç°çš„ï¼Œä¸‹é¢å¼€å§‹ä½¿ç”¨SQL99è¯­æ³•è¿›è¡Œå®ç°***

## 3 SQL99è¯­æ³•å®ç°å¤šè¡¨æŸ¥è¯¢

### 3.1 åŸºæœ¬è¯­æ³•

- SQL99æ ‡å‡†çš„å®ç°æ–¹å¼ï¼šä½¿ç”¨JOIN ... ON çš„æ–¹å¼å®ç°å¤šè¡¨çš„æŸ¥è¯¢
- è¿™ç§æ–¹å¼ä¹Ÿèƒ½è§£å†³å¤–è¿æ¥çš„é—®é¢˜ï¼ŒMySQLæ˜¯æ”¯æŒè¿™ç§æ–¹å¼çš„
- ä¹Ÿæ˜¯å¯ä»¥è§£å†³å†…è¿æ¥é—®é¢˜çš„

### 3.2 å†…è¿æ¥

- æ¡ˆä¾‹ï¼šæŸ¥æ‰¾å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨åç§°
```mysql 
SELECT employee_id , department_name
FROM employees e JOIN departments d
ON e.department_id = d.department_id
```

- æ¡ˆä¾‹ï¼šæŸ¥æ‰¾å‘˜å·¥æ‰€åœ¨å·¥ä½œçš„åŸå¸‚
```mysql
SELECT e.employee_id , e.last_name , d.department_name , l.city
FROM employees e INNER JOIN departments d
ON e.department_id = d.department_id
JOIN locations l
ON d.location_id = l.location_id
```

### 3.3 å¤–è¿æ¥

#### 3.3.1 å·¦å¤–è¿æ¥ï¼ˆLEFT OUTER JOINï¼‰
- æ¡ˆä¾‹ï¼šæŸ¥æ‰¾`æ‰€æœ‰`å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨åç§°
```mysql 
SELECT employee_id , last_name , department_name
FROM employees e LEFT OUTER JOIN departments d	#OUTERå¯ä»¥çœç•¥
ON e.department_id = d.department_id
```

#### 3.3.2 å³å¤–è¿æ¥ï¼ˆRIGHT OUTER JOINï¼‰

- æ¡ˆä¾‹ï¼šæŸ¥æ‰¾`æ‰€æœ‰`éƒ¨é—¨å¯¹åº”çš„å‘˜å·¥
```mysql 
SELECT employee_id , last_name , department_name
FROM employees e RIGHT OUTER JOIN departments d	#OUTERå¯ä»¥çœç•¥
ON e.department_id = d.department_id
```

#### 3.3.3 æ»¡å¤–è¿æ¥ï¼ˆFULL OUTER JOINï¼‰

- æ¡ˆä¾‹ï¼šæŸ¥æ‰¾`æ‰€æœ‰`çš„å‘˜å·¥å’Œéƒ¨é—¨
- `MySQLä¸æ”¯æŒFULL OUTER JOIN `
```mysql 
SELECT employee_id , last_name , department_name
FROM employees e FULL OUTER JOIN departments d	#OUTERå¯ä»¥çœç•¥
ON e.department_id = d.department_id
```

- ***è¦æƒ³åœ¨MySQLä¸­å®ç°æ»¡å¤–è¿æ¥ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¡¥å……ä¸€ä¸‹UNIONçš„ä½¿ç”¨çš„çŸ¥è¯†ç‚¹***

## 4 UNIONçš„ä½¿ç”¨

- åˆå¹¶æŸ¥è¯¢ç»“æœ
	- åˆ©ç”¨UNIONå…³é”®å­—ï¼Œå¯ä»¥ç»™å‡ºå¤šæ¡SELECTè¯­å¥ï¼Œå¹¶å°†å®ƒä»¬çš„ç»“æœç»„åˆæˆå½“ä¸ªç»“æœé›†ã€‚
	- åˆå¹¶æ—¶ï¼Œä¸¤ä¸ªè¡¨å¯¹åº”çš„åˆ—æ•°å’Œæ•°æ®ç±»å‹å¿…é¡»ç›¸åŒï¼Œå¹¶ç›¸äº’å¯¹åº”
	- å„SELECTè¯­å¥ä¹‹é—´ä½¿ç”¨UNIONæˆ–UNION ALLå…³é”®å­—åˆ†éš”
	
- è¯­æ³•æ ¼å¼
```mysql
SELECT column ,... FROM table1
UNION ALL
SELECT colunm ,... FROM table2
```

- UNIONæ“ä½œç¬¦ï¼šè¿”å›ä¸¤ä¸ªæŸ¥è¯¢çš„`ç»“æœçš„å¹¶é›†`ï¼Œ`å»é™¤é‡å¤çš„è®°å½•`
- UNION ALLæ“ä½œç¬¦ï¼šè¿”å›ä¸¤ä¸ªæŸ¥è¯¢çš„`ç»“æœé›†çš„å¹¶é›†`ï¼Œ`ä¸å»é™¤é‡å¤çš„è®°å½•`
- æ³¨æ„ï¼šUNION ALLè¯­å¥çš„æ•ˆç‡é«˜äºUNIONè¯­å¥ï¼Œåœ¨æ˜ç¡®çŸ¥é“ä¸¤ä¸ªè¡¨æ²¡æœ‰é‡å¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨UNION ALLè¯­å¥

- ä¸¾ä¾‹ï¼šæŸ¥è¯¢éƒ¨é—¨ç¼–å·>90æˆ–é‚®ç®±åŒ…å«açš„å‘˜å·¥ä¿¡æ¯
```mysql
#æ–¹å¼1ï¼š
SELECT last_name , department_id , email
FROM employees
WHERE department_id > 90
UNION 
SELECT last_name , department_id , email
FROM employees
WHERE email LIKE '%a%';

#æ–¹å¼2ï¼š
SELECT last_name , department_id , email
FROM employees
WHERE department_id > 90 OR email LIKE '%a%'
```

## 5 7ç§SQL JOINSçš„å®ç°

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/f26034c1ab012a38f8c4b815863453b9.png)



#### 5.1.1 ä»£ç å®ç°

- æŸ¥æ‰¾å‘˜å·¥ä¸­çš„éƒ¨é—¨idï¼Œå’Œéƒ¨é—¨ä¸­çš„éƒ¨é—¨id
```mysql
# ä¸­å›¾ï¼šå†…è¿æ¥
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e JOIN departments d
ON e.department_id = d.department_id

# å·¦ä¸Šå›¾ï¼šå·¦å¤–è¿æ¥
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e LEFT JOIN departments d
ON e.department_id = d.department_id

# å³ä¸Šå›¾ï¼šå³å¤–è¿æ¥
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e RIGHT JOIN departments d
ON e.department_id = d.department_id

#å·¦ä¸­å›¾ï¼š
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e LEFT JOIN departments d
ON e.department_id = d.department_id
WHERE d.department_id IS NULL;

#å³ä¸­å›¾ï¼š
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e RIGHT JOIN departments d
ON e.department_id = d.department_id
WHERE e.department_id IS NULL;

#å·¦ä¸‹å›¾ï¼šæ»¡å¤–è¿æ¥
#æ–¹å¼1ï¼šå·¦ä¸Šå›¾ + å³ä¸­å›¾
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e LEFT JOIN departments d
ON e.department_id = d.department_id
UNION ALL
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e RIGHT JOIN departments d
ON e.department_id = d.department_id
WHERE e.department_id IS NULL;

#æ–¹å¼2ï¼šå³ä¸Šå›¾ + å·¦ä¸­å›¾
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e RIGHT JOIN departments d
ON e.department_id = d.department_id
UNION ALL
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e LEFT JOIN departments d
ON e.department_id = d.department_id
WHERE d.department_id IS NULL;

# å³ä¸‹å›¾ ï¼š å·¦ä¸­å›¾ + å³ä¸­å›¾
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e LEFT JOIN departments d
ON e.department_id = d.department_id
WHERE d.department_id IS NULL
UNION ALL
SELECT e.employee_id , e.department_id , d.department_name
FROM employees e RIGHT JOIN departments d
ON e.department_id = d.department_id
WHERE e.department_id IS NULL;
```

#### 5.1.2 è¯­æ³•æ ¼å¼å°ç»“

- è§ä¸Šè‡ªå·±æ€»ç»“

## 6 SQL99è¯­æ³•æ–°ç‰¹æ€§

### 6.1 è‡ªç„¶è¿æ¥

- è§æ¡ˆä¾‹
```mysql
SELECT employee_id , last_name , department_name 
FROM employees e JOIN departments d
ON e.department_id = d.department_id
AND e.manager_id = d.manager_id

SELECT employee_id , last_name , department_name 
FROM employees e NATURAL JOIN departments d
```
- è¯¥æ¡ˆä¾‹çš„æ„æ€æ˜¯ï¼šç¬¬ä¸€ä¸ªæ¡ä»¶æ˜¯æ‰¾åˆ°æ¯ä¸ªå‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨åç§°ï¼Œå¹¶ä¸”æ‰€æ‰¾åˆ°çš„æ¯ä¸ªå‘˜å·¥çš„ç®¡ç†è€…ä¸éƒ¨é—¨çš„ç®¡ç†è€…æ˜¯åŒä¸€ä¸ªäºº
- è‡ªç„¶è¿æ¥ï¼šå¯ä»¥ç†è§£ä¸ºç­‰å€¼è¿æ¥ï¼Œä¼šè‡ªåŠ¨æŸ¥è¯¢ä¸¤å¼ è¡¨ä¸­`æ‰€æœ‰ç›¸åŒçš„å­—æ®µ`ï¼Œç„¶åè¿›è¡Œ`ç­‰å€¼è¿æ¥`

### 6.2 USINGè¿æ¥

- æƒ³å¯¹äºNATURALåšçš„ä¸€ä¸ªä¼˜åŒ–æ“ä½œ

```mysql
SELECT employee_id , last_name , department_name 
FROM employees e JOIN departments d
ON e.department_id = d.department_id


SELECT employee_id , last_name , department_name 
FROM employees e JOIN departments d
USING (department_id)
```

- é€‚ç”¨äºä¸¤ä¸ªè¡¨ä¸­åŒåçš„å­—æ®µï¼Œå¯ä»¥ç®€åŒ–ONåç»­çš„ç­‰å€¼è¿æ¥æ“ä½œ
- æ³¨æ„ä¸é€‚ç”¨äºè‡ªè¿æ¥


## 7 ç« ç»“å°ç»“

- è¡¨è¿æ¥çš„çº¦æŸæ¡ä»¶å¯ä»¥ç”¨ä¸‰ç§æ–¹å¼ï¼šWHERE ï¼Œ ON ï¼Œ USING
	- WHERE ï¼šé€‚ç”¨äºæ‰€æœ‰å…³è”æŸ¥è¯¢
		- ï¼ˆå·¦/å³ï¼‰å¤–è¿æ¥çš„æ—¶å€™ï¼ŒSQL92çš„+ä¸é€‚ç”¨äºMySQLï¼Œè€ŒSQL99éœ€è¦å†™æˆ JOIN ... ON ... çš„å½¢å¼
	- ON ï¼šåªèƒ½å’ŒJOINä¸€èµ·ä½¿ç”¨ï¼Œåªèƒ½å†™å…³è”æ¡ä»¶ï¼Œå»ºè®®å’ŒJOINåˆ†å¼€å†™ï¼Œå¯è¯»æ€§æ›´ä½³
		- å¯¹äºæè¿°å…¨å¤–è¿æ¥çš„æ—¶å€™æœ‰å±€é™æ€§ï¼Œéœ€è¦åœ¨åé¢åŠ ä¸ŠWHEREï¼Œè·å¾—å…¨å·¦è¿æ¥æˆ–å…¨å³è¿æ¥åï¼Œå†åˆå¹¶å¾—åˆ°å…¨å¤–è¿æ¥	
	- USING ï¼š åªèƒ½å’ŒJOINä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸”è¦æ±‚ä¸¤ä¸ªå…³è”å­—æ®µåœ¨å…³è”è¡¨ä¸­çš„å­—æ®µåä¸€è‡´ï¼Œåªèƒ½ç”¨äºç­‰å€¼è¿æ¥

- æ¨èä½¿ç”¨ ON è¿æ¥ï¼ï¼ï¼

- æ‹“å±•ç»ƒä¹ 
```mysql
SELECT last_name , job_title , department_name
FROM employees INNER JOIN departments INNER JOIN jobs
ON employees.department_id = departments.department_id 
AND employees.job_id = jobs.job_id

# å»ºè®®ä¸è¦è¿ç»­JOIN
```

- æ³¨æ„ï¼š
- æˆ‘ä»¬è¦`æ§åˆ¶è¿æ¥è¡¨çš„æ•°é‡`ã€‚å¤šè¡¨è¿æ¥å°±ç›¸å½“äºåµŒå¥—forå¾ªç¯ä¸€æ ·ï¼Œéå¸¸æ¶ˆè€—èµ„æºï¼Œä¼šè®©SQLæŸ¥è¯¢æ€§èƒ½ä¸‹é™å¾—å¾ˆä¸¥é‡
- å› æ­¤ä¸è¦è¿æ¥ä¸å¿…è¦çš„è¡¨ï¼Œåœ¨è®¸å¤šDBMSä¸­ï¼Œä¹Ÿä¼šæœ‰æœ€å¤§è¿æ¥è¡¨çš„é™åˆ¶

- è¶…è¿‡ä¸‰ä¸ªè¡¨ç¦æ­¢JOIN
- éœ€è¦JOINçš„å­—æ®µï¼Œæ•°æ®ç±»å‹ä¿æŒç»å¯¹ä¸€è‡´
- å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œä¿è¯è¢«å…³è”çš„å­—æ®µéœ€è¦æœ‰ç´¢å¼•


## 8 é™„å½•ï¼šå¸¸ç”¨çš„SQLæ ‡å‡†

- åœ¨æ­£å¼å¼€å§‹å°†è¿æ¥è¡¨çš„ç§ç±»æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“SQLå­˜åœ¨ä¸åŒç‰ˆæœ¬çš„æ ‡å‡†è§„èŒƒï¼Œå› ä¸ºä¸åŒè§„èŒƒä¸‹çš„è¡¨è¿æ¥æ“ä½œæ˜¯æœ‰åŒºåˆ«çš„

- SQLä¸»è¦æœ‰ä¸¤ä¸ªæ ‡å‡†ï¼Œåˆ†åˆ«æ˜¯ `SQL92` å’Œ `SQL99` ã€‚92å’Œ99ä»£è¡¨çš„æ˜¯æ ‡å‡†æå‡ºçš„æ—¶é—´ï¼Œå½“ç„¶é™¤äº†è¿™ä¸¤ä¸ªæ ‡å‡†ä¹‹å¤–ï¼Œè¿˜æœ‰86 ã€ 89 ã€ 2003 ã€ 2008 ã€ 2011 å’Œ 2016 ç­‰å…¶ä»–æ ‡å‡†

- è¿™ä¹ˆå¤šæ ‡å‡†ï¼Œ`å®é™…ä¸Šæœ€é‡è¦çš„SQLæ ‡å‡†å°±æ˜¯SQL92å’ŒSQL99`

- ä¸€èˆ¬æ¥è¯´92çš„å½¢å¼æ›´ç®€å•ï¼Œä½†æ˜¯å†™çš„SQLè¯­å¥ä¼šæ¯”è¾ƒé•¿ï¼Œå¯è¯»æ€§è¾ƒå·®ã€‚99çš„è¯­æ³•æ›´åŠ å¤æ‚ï¼Œä½†å¯è¯»æ€§æ›´å¼ºã€‚

- 92çš„æ ‡å‡†æœ‰500é¡µï¼Œè€Œ99çš„æ ‡å‡†æœ‰1000é¡µï¼Œæ‰€ä»¥å¾ˆå°‘æœ‰äººèƒ½æŒæ¡æ‰€æœ‰çš„å†…å®¹ï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä¸€äº›æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œæ»¡è¶³æ—¥å¸¸å·¥ä½œå³å¯

- SQL92 å’Œ SQL99 æ˜¯ç»å…¸çš„SQLæ ‡å‡†ï¼Œä¹Ÿåˆ†åˆ«å«åš SQL-2 å’Œ SQL-3 æ ‡å‡†ã€‚ä¹Ÿæ­£æ˜¯è¿™ä¸¤ä¸ªæ ‡å‡†å‘å¸ƒä¹‹åï¼ŒSQLå½±å“åŠ›è¶Šæ¥è¶Šå¤§ï¼Œç”šè‡³è¶…è¶Šäº†æ•°æ®åº“é¢†åŸŸã€‚

- ç°å¦‚ä»ŠSQLä¸ä»…ä»…æ˜¯æ•°æ®åº“é¢†åŸŸçš„ä¸»æµè¯­è¨€ï¼Œè¿˜æ˜¯ä¿¡æ¯é¢†åŸŸä¸­ä¿¡æ¯å¤„ç†çš„ä¸»æµè¯­è¨€

- åœ¨å›¾å½¢æ£€ç´¢ã€å›¾åƒæ£€ç´¢ä»¥åŠè¯­è¨€æ£€ç´¢ä¸­éƒ½èƒ½çœ‹åˆ°SQLè¯­è¨€çš„ä½¿ç”¨
