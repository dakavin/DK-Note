---
æ–‡ç« æ ‡é¢˜: "[[13_äº‹åŠ¡åŸºç¡€çŸ¥è¯†]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  ä»‹ç»æ•°æ®åº“äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µã€ACIDç‰¹æ€§ã€çŠ¶æ€è½¬æ¢ã€ä½¿ç”¨æ–¹æ³•ï¼ˆæ˜¾å¼/éšå¼äº‹åŠ¡ï¼‰ã€å¹¶å‘é—®é¢˜ï¼ˆè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼‰åŠå››ç§éš”ç¦»çº§åˆ«çš„è®¾ç½®
tags:
- "æ•°æ®åº“äº‹åŠ¡"
- "ACIDç‰¹æ€§"
- "äº‹åŠ¡éš”ç¦»çº§åˆ«"
- "å¹¶å‘æŽ§åˆ¶"
- "MySQL"
- "è„è¯»"
- "å¹»è¯»"
- "ä¸å¯é‡å¤è¯»"
ç›¸å…³æ–‡ç« :
- "[[6_æ•°æ®åº“äº‹åŠ¡]]"
- "[[14_MySQLäº‹åŠ¡æ—¥å¿—]]"
- "[[16_å¤šç‰ˆæœ¬å¹¶å‘æŽ§åˆ¶]]"
- "[[1_ðŸ“•åšå®¢è®¾ç½®æ¨¡å—åŠŸèƒ½åˆ†æžã€è¡¨è®¾è®¡]]"
- "[[1_Part1]]"
æ–‡ç« åˆ†ç±»: "ðŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯"
æ–‡ç« è·¯å¾„: "04-ðŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯/01-ðŸ¬ MySQL/02-ðŸš€ é«˜çº§ç‰¹æ€§/13_äº‹åŠ¡åŸºç¡€çŸ¥è¯†.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:09:58
---

### ç¬¬13ç«  äº‹åŠ¡åŸºç¡€çŸ¥è¯†

#### 1. æ•°æ®åº“äº‹åŠ¡æ¦‚è¿°

##### 1.1 åŸºæœ¬æ¦‚å¿µ

äº‹åŠ¡ï¼šä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼Œä½¿æ•°æ®ä»Žä¸€ç§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚

äº‹åŠ¡å¤„ç†çš„åŽŸåˆ™ï¼šä¿è¯æ‰€æœ‰äº‹åŠ¡éƒ½ä½œä¸º`ä¸€ä¸ªå·¥ä½œå•å…ƒ`æ¥æ‰§è¡Œï¼Œå³ä½¿å‡ºçŽ°äº†æ•…éšœï¼Œéƒ½ä¸èƒ½æ”¹å˜è¿™ç§æ‰§è¡Œæ–¹å¼ã€‚å½“åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œæ—¶ï¼Œè¦ä¹ˆæ‰€æœ‰çš„äº‹åŠ¡éƒ½è¢«æäº¤(`commit`)ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹å°±`æ°¸ä¹…`åœ°ä¿å­˜ä¸‹æ¥ï¼›è¦ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå°†`æ”¾å¼ƒ`æ‰€ä½œçš„æ‰€æœ‰`ä¿®æ”¹`ï¼Œæ•´ä¸ªäº‹åŠ¡å›žæ»š(`rollback`)åˆ°æœ€åˆçŠ¶æ€ã€‚

##### 1.2 äº‹åŠ¡çš„ACIDç‰¹æ€§

- åŽŸå­æ€§ï¼ˆatomicityï¼‰ï¼š

åŽŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œè¦ä¹ˆå…¨éƒ¨æäº¤ï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›žæ»šã€‚

- ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ï¼š

ä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œå‰åŽï¼Œæ•°æ®ä»Žä¸€ä¸ª`åˆæ³•æ€§çŠ¶æ€`å˜æ¢åˆ°å¦å¤–ä¸€ä¸ª`åˆæ³•æ€§çŠ¶æ€`ã€‚è¿™ç§çŠ¶æ€æ˜¯`è¯­ä¹‰ä¸Š`çš„è€Œä¸æ˜¯è¯­æ³•ä¸Šçš„ï¼Œè·Ÿå…·ä½“çš„ä¸šåŠ¡æœ‰å…³ã€‚

- éš”ç¦»åž‹ï¼ˆisolationï¼‰ï¼š

äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œ`ä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°`ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹`å¹¶å‘`çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚

- æŒä¹…æ€§ï¼ˆdurabilityï¼‰ï¼š

æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯`æ°¸ä¹…æ€§çš„`ï¼ŒæŽ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚

æŒä¹…æ€§æ˜¯é€šè¿‡`äº‹åŠ¡æ—¥å¿—`æ¥ä¿è¯çš„ã€‚æ—¥å¿—åŒ…æ‹¬äº†`é‡åšæ—¥å¿—`å’Œ`å›žæ»šæ—¥å¿—`ã€‚å½“æˆ‘ä»¬é€šè¿‡äº‹åŠ¡å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå°†æ•°æ®åº“çš„å˜åŒ–ä¿¡æ¯è®°å½•åˆ°é‡åšæ—¥å¿—ä¸­ï¼Œç„¶åŽå†å¯¹æ•°æ®åº“ä¸­å¯¹åº”çš„è¡Œè¿›è¡Œä¿®æ”¹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå³ä½¿æ•°æ®åº“ç³»ç»Ÿå´©æºƒï¼Œæ•°æ®åº“é‡å¯åŽä¹Ÿèƒ½æ‰¾åˆ°æ²¡æœ‰æ›´æ–°åˆ°æ•°æ®åº“ç³»ç»Ÿä¸­çš„é‡åšæ—¥å¿—ï¼Œé‡æ–°æ‰§è¡Œï¼Œä»Žè€Œä½¿äº‹åŠ¡å…·æœ‰æŒä¹…æ€§ã€‚

##### 1.3 äº‹åŠ¡çš„çŠ¶æ€

- æ´»åŠ¨çš„ï¼ˆactiveï¼‰

äº‹åŠ¡å¯¹åº”çš„æ•°æ®åº“æ“ä½œæ­£åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨`æ´»åŠ¨çš„`çŠ¶æ€ã€‚

- éƒ¨åˆ†æäº¤çš„ï¼ˆpartially committedï¼‰

å½“äº‹åŠ¡ä¸­çš„æœ€åŽä¸€ä¸ªæ“ä½œæ‰§è¡Œå®Œæˆï¼Œä½†ç”±äºŽæ“ä½œéƒ½åœ¨å†…å­˜ä¸­æ‰§è¡Œï¼Œæ‰€é€ æˆçš„å½±å“å¹¶`æ²¡æœ‰åˆ·æ–°åˆ°ç£ç›˜`æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨`éƒ¨åˆ†æäº¤çš„`çŠ¶æ€ã€‚

- å¤±è´¥çš„ï¼ˆfailedï¼‰

å½“äº‹åŠ¡å¤„åœ¨`æ´»åŠ¨çš„`æˆ–è€…`éƒ¨åˆ†æäº¤çš„`çŠ¶æ€æ—¶ï¼Œå¯èƒ½é‡åˆ°äº†æŸäº›é”™è¯¯ï¼ˆæ•°æ®åº“è‡ªèº«çš„é”™è¯¯ã€æ“ä½œç³»ç»Ÿé”™è¯¯æˆ–è€…ç›´æŽ¥æ–­ç”µç­‰ï¼‰è€Œæ— æ³•ç»§ç»­æ‰§è¡Œï¼Œæˆ–è€…äººä¸ºçš„åœæ­¢å½“å‰äº‹åŠ¡çš„æ‰§è¡Œï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨`å¤±è´¥çš„`çŠ¶æ€ã€‚

- ä¸­æ­¢çš„ï¼ˆabortedï¼‰

å¦‚æžœäº‹åŠ¡æ‰§è¡Œäº†ä¸€éƒ¨åˆ†è€Œå˜ä¸º`å¤±è´¥çš„`çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠå·²ç»ä¿®æ”¹çš„äº‹åŠ¡ä¸­çš„æ“ä½œè¿˜åŽŸåˆ°äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¦æ’¤é”€å¤±è´¥äº‹åŠ¡å¯¹å½“å‰æ•°æ®åº“é€ æˆçš„å½±å“ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªæ’¤é”€çš„è¿‡ç¨‹ç§°ä¹‹ä¸º`å›žæ»š`ã€‚å½“`å›žæ»š`æ“ä½œæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“æ¢å¤åˆ°äº†æ‰§è¡Œäº‹åŠ¡ä¹‹å‰çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å°±è¯´è¯¥äº‹åŠ¡å¤„åœ¨äº†`ä¸­æ­¢çš„`çŠ¶æ€ã€‚

- æäº¤çš„ï¼ˆcommittedï¼‰

å½“ä¸€ä¸ªå¤„åœ¨`éƒ¨åˆ†æäº¤çš„`çŠ¶æ€çš„äº‹åŠ¡å°†ä¿®æ”¹è¿‡çš„æ•°æ®éƒ½`åŒæ­¥åˆ°ç£ç›˜`ä¸Šä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´è¯¥äº‹åŠ¡å¤„åœ¨äº†`æäº¤çš„`çŠ¶æ€ã€‚

![image-20220403110448951](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031104063.png)

#### 2. å¦‚ä½•ä½¿ç”¨äº‹åŠ¡

##### 2.1 æ˜¾å¼äº‹åŠ¡

æ­¥éª¤1ï¼š `START TRANSACTION`æˆ–è€…`BEGIN`ï¼Œä½œç”¨æ˜¯æ˜¾å¼å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚

```mysql
mysql> BEGIN; 
#æˆ–è€… 
mysql> START TRANSACTION;
```

`START TRANSACTION`è¯­å¥ç›¸è¾ƒäºŽ`BEGIN`ç‰¹åˆ«ä¹‹å¤„åœ¨äºŽï¼ŒåŽè¾¹èƒ½è·Ÿéšå‡ ä¸ª`ä¿®é¥°ç¬¦`ï¼š 

â‘ `READ ONLY`ï¼šæ ‡è¯†å½“å‰äº‹åŠ¡æ˜¯ä¸€ä¸ª`åªè¯»äº‹åŠ¡`ï¼Œä¹Ÿå°±æ˜¯å±žäºŽè¯¥äº‹åŠ¡çš„æ•°æ®åº“æ“ä½œåªèƒ½è¯»å–æ•°æ®ï¼Œè€Œä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚

â‘¡`READ WRITE`ï¼šæ ‡è¯†å½“å‰äº‹åŠ¡æ˜¯ä¸€ä¸ª`è¯»å†™äº‹åŠ¡`ï¼Œä¹Ÿå°±æ˜¯å±žäºŽè¯¥äº‹åŠ¡çš„æ•°æ®åº“æ“ä½œæ—¢å¯ä»¥è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ•°æ®ã€‚

â‘¢`WITH CONSISTENT SNAPSHOT`ï¼šå¯åŠ¨ä¸€è‡´æ€§è¯»ã€‚

æ­¥éª¤2ï¼šä¸€ç³»åˆ—äº‹åŠ¡ä¸­çš„æ“ä½œï¼ˆä¸»è¦æ˜¯DMLï¼Œä¸å«DDLï¼‰

æ­¥éª¤3ï¼šæäº¤äº‹åŠ¡ æˆ– ä¸­æ­¢äº‹åŠ¡ï¼ˆå³å›žæ»šäº‹åŠ¡ï¼‰

```mysql
# æäº¤äº‹åŠ¡ã€‚å½“æäº¤äº‹åŠ¡åŽï¼Œå¯¹æ•°æ®åº“çš„ä¿®æ”¹æ˜¯æ°¸ä¹…æ€§çš„ã€‚
mysql> COMMIT;
```

```mysql
# å›žæ»šäº‹åŠ¡ã€‚å³æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æ²¡æœ‰æäº¤çš„ä¿®æ”¹ 
mysql> ROLLBACK; 

# å°†äº‹åŠ¡å›žæ»šåˆ°æŸä¸ªä¿å­˜ç‚¹ã€‚ 
mysql> ROLLBACK TO [SAVEPOINT]
```

å…¶ä¸­å…³äºŽSAVEPOINTç›¸å…³æ“ä½œæœ‰ï¼š

```mysql
# åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¿å­˜ç‚¹ï¼Œæ–¹ä¾¿åŽç»­é’ˆå¯¹ä¿å­˜ç‚¹è¿›è¡Œå›žæ»šã€‚ä¸€ä¸ªäº‹ç‰©ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªä¿å­˜ç‚¹ã€‚
SAVEPOINT ä¿å­˜ç‚¹åç§°;
```

```mysql
# åˆ é™¤æŸä¸ªä¿å­˜ç‚¹
RELEASE SAVEPOINT ä¿å­˜ç‚¹åç§°;
```

##### 2.2 éšå¼äº‹åŠ¡

- æ˜¾å¼çš„çš„ä½¿ç”¨`START TRANSACTION`æˆ–è€…`BEGIN`è¯­å¥å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚è¿™æ ·åœ¨æœ¬æ¬¡äº‹åŠ¡æäº¤æˆ–è€…å›žæ»šå‰ä¼šæš‚æ—¶å…³é—­æŽ‰è‡ªåŠ¨æäº¤çš„åŠŸèƒ½ã€‚
- æŠŠç³»ç»Ÿå˜é‡`autocommit`çš„å€¼è®¾ç½®ä¸º`OFF`

##### 2.3 éšå¼æäº¤æ•°æ®çš„æƒ…å†µ

- æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData definition languageï¼Œç¼©å†™ä¸ºï¼šDDLï¼‰

- éšå¼ä½¿ç”¨æˆ–ä¿®æ”¹mysqlæ•°æ®åº“ä¸­çš„è¡¨
- äº‹åŠ¡æŽ§åˆ¶æˆ–å…³äºŽé”å®šçš„è¯­å¥
  -  å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æˆ–è€…å›žæ»šæ—¶å°±åˆä½¿ç”¨`START TRANSACTION`æˆ–è€…`BEGIN`è¯­å¥å¼€å¯äº†å¦ä¸€ä¸ªäº‹åŠ¡æ—¶ï¼Œä¼š`éšå¼çš„æäº¤`ä¸Šä¸€ä¸ªäº‹åŠ¡ã€‚
  -  å½“å‰çš„`autocommit`ç³»ç»Ÿå˜é‡çš„å€¼ä¸º`OFF`ï¼Œæˆ‘ä»¬æ‰‹åŠ¨æŠŠå®ƒè°ƒä¸º`ON`æ—¶ï¼Œä¹Ÿä¼š`éšå¼çš„æäº¤`å‰è¾¹è¯­å¥æ‰€å±žçš„äº‹åŠ¡ã€‚
  -  ä½¿ç”¨`LOCK TABLES`ã€`UNLOCK TABLES`ç­‰å…³äºŽé”å®šçš„è¯­å¥ä¹Ÿä¼š`éšå¼çš„æäº¤`å‰è¾¹è¯­å¥æ‰€å±žçš„äº‹åŠ¡ã€‚

#### 3. äº‹åŠ¡éš”ç¦»çº§åˆ«

##### 3.1 æ•°æ®å¹¶å‘é—®é¢˜

1. è„å†™ï¼ˆ`Dirty Write`ï¼‰

å¯¹äºŽä¸¤ä¸ªäº‹åŠ¡ Session Aã€Session Bï¼Œå¦‚æžœäº‹åŠ¡Session A`ä¿®æ”¹äº†`å¦ä¸€ä¸ª`æœªæäº¤`äº‹åŠ¡Session B`ä¿®æ”¹è¿‡`çš„æ•°æ®ï¼Œé‚£å°±æ„å‘³ç€å‘ç”Ÿäº†`è„å†™`

![image-20220403112416944](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124086.png)

2. è„è¯»ï¼ˆ`Dirty Read`ï¼‰

å¯¹äºŽä¸¤ä¸ªäº‹åŠ¡ Session Aã€Session Bï¼ŒSession A`è¯»å–`äº†å·²ç»è¢« Session B`æ›´æ–°`ä½†è¿˜`æ²¡æœ‰è¢«æäº¤`çš„å­—æ®µã€‚ä¹‹åŽè‹¥ Session B`å›žæ»š`ï¼ŒSession A`è¯»å–`çš„å†…å®¹å°±æ˜¯`ä¸´æ—¶ä¸”æ— æ•ˆ`çš„ã€‚

![image-20220403112435995](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124136.png)

3. ä¸å¯é‡å¤è¯»ï¼ˆ`Non-Repeatable Read`ï¼‰

å¯¹äºŽä¸¤ä¸ªäº‹åŠ¡Session Aã€Session Bï¼ŒSession A`è¯»å–`äº†ä¸€ä¸ªå­—æ®µï¼Œç„¶åŽ Session B`æ›´æ–°`äº†è¯¥å­—æ®µã€‚ ä¹‹åŽSession A`å†æ¬¡è¯»å–`åŒä¸€ä¸ªå­—æ®µï¼Œ`å€¼å°±ä¸åŒ`äº†ã€‚é‚£å°±æ„å‘³ç€å‘ç”Ÿäº†ä¸å¯é‡å¤è¯»ã€‚

![image-20220403112458183](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031124331.png)

4. å¹»è¯»ï¼ˆ`Phantom`ï¼‰

å¯¹äºŽä¸¤ä¸ªäº‹åŠ¡Session Aã€Session B, Session A ä»Žä¸€ä¸ªè¡¨ä¸­`è¯»å–`äº†ä¸€ä¸ªå­—æ®µ, ç„¶åŽ Session B åœ¨è¯¥è¡¨ä¸­`æ’å…¥`äº†ä¸€äº›æ–°çš„è¡Œã€‚ ä¹‹åŽ, å¦‚æžœ Session A`å†æ¬¡è¯»å–`åŒä¸€ä¸ªè¡¨, å°±ä¼šå¤šå‡ºå‡ è¡Œã€‚é‚£å°±æ„å‘³ç€å‘ç”Ÿäº†å¹»è¯»ã€‚

![image-20220403112514712](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031125847.png)

æ³¨æ„1ï¼š

æœ‰çš„åŒå­¦ä¼šæœ‰ç–‘é—®ï¼Œé‚£å¦‚æžœSession Bä¸­`å‰”é™¤äº†`ä¸€äº›ç¬¦åˆ`studentno > 0`çš„è®°å½•è€Œä¸æ˜¯æ’å…¥æ–°è®°å½•ï¼Œé‚£ä¹ˆSession Aä¹‹åŽå†æ ¹æ®`studentno > 0`çš„æ¡ä»¶è¯»å–çš„`è®°å½•å˜å°‘äº†`ï¼Œè¿™ç§çŽ°è±¡ç®—ä¸ç®—`å¹»è¯»`å‘¢ï¼Ÿè¿™ç§çŽ°è±¡`ä¸å±žäºŽå¹»è¯»`ï¼Œå¹»è¯»å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªäº‹ç‰©æŒ‰ç…§æŸä¸ª`ç›¸åŒæ¡ä»¶å¤šæ¬¡è¯»å–`è®°å½•æ—¶ï¼ŒåŽè¯»å–æ—¶è¯»åˆ°äº†ä¹‹å‰`æ²¡æœ‰è¯»åˆ°çš„è®°å½•`ã€‚

æ³¨æ„2ï¼š

é‚£å¯¹äºŽå…ˆå‰å·²ç»è¯»åˆ°çš„è®°å½•ï¼Œä¹‹åŽåˆè¯»å–ä¸åˆ°è¿™ç§æƒ…å†µï¼Œç®—å•¥å‘¢ï¼Ÿè¿™ç›¸å½“äºŽå¯¹æ¯ä¸€æ¡è®°å½•éƒ½å‘ç”Ÿäº†`ä¸å¯é‡å¤è¯»`çš„çŽ°è±¡ã€‚å¹»è¯»åªæ˜¯é‡ç‚¹å¼ºè°ƒäº†è¯»å–åˆ°ä¹‹å‰è¯»å–æ²¡æœ‰èŽ·å–åˆ°çš„è®°å½•ã€‚

##### 3.2 SQLä¸­çš„å››ç§éš”ç¦»çº§åˆ«

`SQLæ ‡å‡†`ä¸­è®¾ç«‹äº†4ä¸ª`éš”ç¦»çº§åˆ«`ï¼š

- `READ UNCOMMITTED`ï¼šè¯»æœªæäº¤ï¼Œåœ¨è¯¥éš”ç¦»çº§åˆ«ï¼Œæ‰€æœ‰äº‹åŠ¡éƒ½å¯ä»¥çœ‹åˆ°å…¶ä»–æœªæäº¤äº‹åŠ¡çš„æ‰§è¡Œç»“æžœã€‚ä¸èƒ½é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ã€‚
- `READ COMMITTED`ï¼šè¯»å·²æäº¤ï¼Œå®ƒæ»¡è¶³äº†éš”ç¦»çš„ç®€å•å®šä¹‰ï¼šä¸€ä¸ªäº‹åŠ¡åªèƒ½çœ‹è§å·²ç»æäº¤äº‹åŠ¡æ‰€åšçš„æ”¹å˜ã€‚è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿçš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼ˆä½†ä¸æ˜¯MySQLé»˜è®¤çš„ï¼‰ã€‚å¯ä»¥é¿å…è„è¯»ï¼Œä½†ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ä»ç„¶å­˜åœ¨ã€‚
- `REPEATABLE READ`ï¼šå¯é‡å¤è¯»ï¼Œäº‹åŠ¡Aåœ¨è¯»åˆ°ä¸€æ¡æ•°æ®ä¹‹åŽï¼Œæ­¤æ—¶äº‹åŠ¡Bå¯¹è¯¥æ•°æ®è¿›è¡Œäº†ä¿®æ”¹å¹¶æäº¤ï¼Œé‚£ä¹ˆäº‹åŠ¡Aå†è¯»è¯¥æ•°æ®ï¼Œè¯»åˆ°çš„è¿˜æ˜¯åŽŸæ¥çš„å†…å®¹ã€‚å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»é—®é¢˜ä»ç„¶å­˜åœ¨ã€‚`è¿™æ˜¯MySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«`ã€‚
- `SERIALIZABLE`ï¼šå¯ä¸²è¡ŒåŒ–ï¼Œç¡®ä¿äº‹åŠ¡å¯ä»¥ä»Žä¸€ä¸ªè¡¨ä¸­è¯»å–ç›¸åŒçš„è¡Œã€‚åœ¨è¿™ä¸ªäº‹åŠ¡æŒç»­æœŸé—´ï¼Œç¦æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¯¥è¡¨æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚æ‰€æœ‰çš„å¹¶å‘é—®é¢˜éƒ½å¯ä»¥é¿å…ï¼Œä½†æ€§èƒ½ååˆ†ä½Žä¸‹ã€‚èƒ½é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚

![image-20220403112740425](https://cdn.jsdelivr.net/gh/aoshihuankong/cloudimg@master/img/202204031127542.png)

##### 3.3 å¦‚ä½•è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«

```mysql
SET [GLOBAL|SESSION] TRANSACTION ISOLATION LEVEL éš”ç¦»çº§åˆ«; 
#å…¶ä¸­ï¼Œéš”ç¦»çº§åˆ«æ ¼å¼ï¼š 
> READ UNCOMMITTED 
> READ COMMITTED 
> REPEATABLE READ 
> SERIALIZABLE
```

æˆ–è€…ï¼š

```mysql
SET [GLOBAL|SESSION] TRANSACTION_ISOLATION = 'éš”ç¦»çº§åˆ«' 
#å…¶ä¸­ï¼Œéš”ç¦»çº§åˆ«æ ¼å¼ï¼š 
> READ-UNCOMMITTED 
> READ-COMMITTED 
> REPEATABLE-READ 
> SERIALIZABLE
```

### 