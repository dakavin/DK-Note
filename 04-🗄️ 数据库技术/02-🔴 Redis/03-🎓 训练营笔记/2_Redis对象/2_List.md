---
æ–‡ç« æ ‡é¢˜: "[[2_List]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  ä»‹ç»Redis Listæ•°æ®ç»“æ„çš„åŸºæœ¬æ¦‚å¿µã€é€‚ç”¨åœºæ™¯ã€å¸¸ç”¨æ“ä½œå‘½ä»¤åŠåº•å±‚å®ç°åŸç†ï¼Œé‡ç‚¹åˆ†æZIPLISTã€LINKEDLISTå’ŒQUICKLISTä¸‰ç§ç¼–ç æ–¹å¼çš„æ¼”è¿›è¿‡ç¨‹ã€‚
tags:
- "Redis"
- "List"
- "æ•°æ®ç»“æ„"
- "ZIPLIST"
- "LINKEDLIST"
- "QUICKLIST"
- "ç¼–ç æ–¹å¼"
- "åº•å±‚å®ç°"
ç›¸å…³æ–‡ç« :
- "[[2_Listé¢è¯•ä¸åˆ†æ]]"
- "[[5_Hashé¢è¯•ä¸åˆ†æ]]"
- "[[3_åº•å±‚æ•°æ®ç»“æ„å‹ç¼©åˆ—è¡¨]]"
- "[[2_LinkedListæºç åˆ†æ]]"
- "[[2_List]]"
æ–‡ç« åˆ†ç±»: "ğŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯"
æ–‡ç« è·¯å¾„: "04-ğŸ—„ï¸ æ•°æ®åº“æŠ€æœ¯/02-ğŸ”´ Redis/03-ğŸ“ è®­ç»ƒè¥ç¬”è®°/2_Rediså¯¹è±¡/2_List.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:09:57
---

## 1 æ˜¯ä»€ä¹ˆï¼Ÿ

Redis Listæ˜¯ä¸€ç»„è¿æ¥èµ·æ¥çš„å­—ç¬¦ä¸²é›†åˆ

### 1.1 æœ‰ä»€ä¹ˆé™åˆ¶

Listæœ€å¤§å…ƒç´ ä¸ªæ•°æ˜¯2^32-1 (4294967295)ï¼Œ`æ–°ç‰ˆæœ¬å·²ç»æ˜¯2^64-1äº†`

## 2 é€‚ç”¨åœºæ™¯

Listä½œä¸ºä¸€ä¸ªåˆ—è¡¨å­˜å‚¨ï¼Œå±äºæ¯”è¾ƒåº•å±‚çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨çš„åœºæ™¯éå¸¸å¤šï¼Œæ¯”å¦‚å­˜å‚¨ä¸€æ‰¹ä»»åŠ¡æ•°æ®ï¼Œå­˜å‚¨ä¸€æ‰¹æ¶ˆæ¯ç­‰ã€‚

## 3 å¸¸ç”¨æ“ä½œ

å¸¸ç”¨æ“ä½œè¿˜æ˜¯èšç„¦äºåˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤

åˆ›å»ºï¼šäº§ç”Ÿä¸€ä¸ªListå¯¹è±¡ï¼Œä¸€èˆ¬ç”¨LPUSHã€RPUSHï¼Œåˆ†åˆ«å¯¹åº”ä»å·¦ä¾§è¿›é˜Ÿåˆ—å’Œå³ä¾§è¿›é˜Ÿåˆ—ã€‚

æŸ¥è¯¢ï¼šå¯ä»¥ç”¨LRANGEæ¥è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œå¯ä»¥ç”¨LLENæŸ¥è¯¢å…ƒç´ ä¸ªæ•°ã€‚

æ›´æ–°ï¼šå¯¹åˆ—è¡¨å¯¹è±¡è€Œè¨€å°±æ˜¯è¿½åŠ å…ƒç´ ã€åˆ é™¤å…ƒç´ ç­‰æ“ä½œï¼Œæ¶‰åŠLPUSHã€LPOPã€RPUSHã€RPOPã€LREMç­‰æ“ä½œã€‚

åˆ é™¤ï¼šé’ˆå¯¹Listå¯¹è±¡æœ¬èº«çš„ç”Ÿæˆå’Œé”€æ¯ï¼Œä¸Šä¸€ç« å°†Stringçš„æ—¶å€™æˆ‘ä»¬æœ‰ä»‹ç»ï¼Œå¯ä»¥ç”¨DELå‘½ä»¤ï¼Œä¸‹é¢å†ä»‹ç»ä¸€ç§æ–¹å¼ï¼šé€šè¿‡4.0å¼•å…¥çš„UNLINKå‘½ä»¤è¿›è¡Œå¯¹è±¡åˆ é™¤ã€‚

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/8f92589bcb571c52ebb263c8bdb2a196.png)

ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤çš„ä¾‹å­

### 3.1 å†™æ“ä½œ

#### 3.1.1 LPUSH

è¯­æ³•ï¼šLPUSH key value [value ...]
åŠŸèƒ½ï¼šä»å¤´éƒ¨å¢åŠ å…ƒç´ ï¼Œè¿”å›å€¼ä¸ºListä¸­å…ƒç´ çš„æ€»æ•°ã€‚

```shell
LPUSH list s1 s2 s3
(integer) 3

LPUSH list s4
(integer) 4
```

s4æ˜¯ç¬¬äºŒä¸ªå‘½ä»¤æ’å…¥çš„ï¼Œæ’å…¥ä¹‹åå®ƒå°±åœ¨Listå¤´éƒ¨ï¼Œæ­¤æ—¶Listç»“æ„å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/d281a5db4ef44a56a4dcaa668eb4654d.png)
#### 3.1.2 RPUSH

è¯­æ³•ï¼šRPUSH key value [value ...]
åŠŸèƒ½ï¼šä»å°¾éƒ¨å¢åŠ å…ƒç´ ï¼Œè¿”å›å€¼ä¸ºListä¸­å…ƒç´ çš„æ€»æ•°ã€‚

```shell
RPUSH list s5
(integer) 5
```

s5æ˜¯RPUSHå‘½ä»¤æ’å…¥çš„ï¼Œæ’å…¥ä¹‹åå®ƒå°±åœ¨Listå°¾éƒ¨ï¼Œæ­¤æ—¶Listç»“æ„å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/4504727a0943334742efe26d37944019.png)
#### 3.1.3 LPOP

è¯­æ³•ï¼šLPOP key
åŠŸèƒ½ï¼šç§»é™¤å¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 

```shell
LPOP list
"s4"
```

s4ä»Listä¸­ç§»é™¤ï¼Œæ­¤æ—¶Listç»“æ„å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/7284e68f03987e104a6646d0aa12a3e6.png)
#### 3.1.4 RPOP

è¯­æ³•ï¼šRPOP key
åŠŸèƒ½ï¼šç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ 

```shell
LPOP list
"s5"
```

s5ä»Listä¸­ç§»é™¤ï¼Œæ­¤æ—¶Listç»“æ„å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/80512ab173eaf46ccec8d8bfb09cb672.png)
#### 3.1.5 LREM

è¯­æ³•ï¼šLREM key count value
åŠŸèƒ½ï¼šç§»é™¤å€¼ç­‰äºvalueçš„å…ƒç´ ã€‚å½“count=0ï¼Œåˆ™ç§»é™¤æ‰€æœ‰ç­‰äºvalueçš„å…ƒç´ ã€‚å½“count>0ï¼Œåˆ™ä»å·¦åˆ°å³å¼€å§‹ç§»é™¤countä¸ªã€‚`å½“count<0åˆ™ä»å³åˆ°å·¦ç§»é™¤countä¸ª`ã€‚è¿”å›å€¼ä¸ºè¢«ç§»é™¤å…ƒç´ çš„æ•°é‡ã€‚

```shell
LREM list 0 s2
(integer) 1
```

#### 3.1.6 DEL

è¯­æ³•ï¼šDEL key [key ...]
åŠŸèƒ½ï¼šåˆ é™¤å¯¹è±¡ï¼Œè¿”å›å€¼ä¸ºåˆ é™¤æˆåŠŸäº†å‡ ä¸ªé”®

```shell
DEL list
(integer) 1
```

#### 3.1.7 UNLINK

è¯­æ³•ï¼šUNLINK key [key ...]
åŠŸèƒ½ï¼šåˆ é™¤å¯¹è±¡ï¼Œè¿”å›å€¼ä¸ºåˆ é™¤æˆåŠŸäº†å‡ ä¸ªé”®ã€‚å’ŒDELä¸»è¦æœ‰å¦‚ä¸‹ä¸åŒï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/d48d1e7917c3b04e1cb620be9cf20a03.png)
ç®€å•æ¥è¯´ï¼š
- delå‘½ä»¤åŒæ­¥åˆ é™¤å‘½ä»¤ï¼Œä¼šé˜»å¡å®¢æˆ·ç«¯ï¼ŒæŒ‡å¯¼åˆ é™¤å®Œæˆ
- unlinkå‘½ä»¤æ˜¯å¼‚æ­¥åˆ é™¤å‘½ä»¤ï¼Œåªæ˜¯å–æ¶ˆkeyåœ¨é”®ç©ºé—´çš„å…³è”ï¼Œè®©å…¶ä¸èƒ½å†æŸ¥åˆ°ï¼Œåˆ é™¤æ˜¯å¼‚æ­¥è¿›è¡Œï¼Œæ‰€ä»¥ä¸ä¼šé˜»å¡å®¢æˆ·ç«¯

```shell
LPUSH list s1 s2 s3
(integer) 3

UNLINK list
(integer) 1
```

### 3.2 è¯»æ“ä½œ

æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œæ„é€ åˆ—è¡¨ç”¨äºè¯»æ“ä½œçš„å­¦ä¹ ï¼š
```shell
DEL list
(integer) 1

LPUSH list s1 s2 s3
(integer) 3
```

æ‰§è¡Œå®Œä¹‹åï¼Œæ•°æ®å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/5037d56c6f3820cf5eb072e77d1c0cae.png)
#### 3.2.1 LLEN

è¯­æ³•ï¼šLLEN key
åŠŸèƒ½ï¼šæŸ¥çœ‹Listçš„é•¿åº¦ï¼Œå³Listä¸­å…ƒç´ çš„æ€»æ•°

```shell
LLEN list
(integer) 3
```

#### 3.2.2 LRANGE

è¯­æ³•ï¼šLRANGE key start stop
åŠŸèƒ½ï¼šæŸ¥çœ‹startåˆ°stopä¸ºè§’æ ‡çš„å…ƒç´ ï¼Œ`[0,-1]è¡¨ç¤ºæŸ¥çœ‹æ‰€æœ‰å…ƒç´ `

```shell
LRANGE list 0 1
1) "s3"
2) "s2"
```

startã€stopå¦‚æœä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ªå…ƒç´ ï¼š
```shell
LRANGE list -2 -1
1) "s2"
2) "s1"
```

## 4 åº•å±‚å®ç°

### 4.1 ç¼–ç æ–¹å¼

3.2ç‰ˆæœ¬ä¹‹å‰ï¼ŒListå¯¹è±¡æœ‰ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œä¸€ç§æ˜¯ZIPLISTï¼Œå¦ä¸€ç§æ˜¯LINKEDLIST![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/e402e746e2c934151d1913bc28def3ef.png)
å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œä½¿ç”¨ZIPLISTç¼–ç ï¼š
1. åˆ—è¡¨å¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²å¯¹è±¡`é•¿åº¦éƒ½å°äº64å­—èŠ‚`ï¼›
2. åˆ—è¡¨å¯¹è±¡å…ƒç´ `ä¸ªæ•°å°‘äº512ä¸ª`ï¼Œæ³¨æ„ï¼Œè¿™æ˜¯LISTçš„é™åˆ¶ï¼Œè€Œä¸æ˜¯ZIPLISTçš„é™åˆ¶ï¼›

`ZIPLISTåº•å±‚ç”¨å‹ç¼©åˆ—è¡¨`å®ç°ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾åˆ—è¡¨ä¸­åŒ…å«â€œhelloâ€ã€â€œniuniuâ€ã€â€œmartâ€ä¸‰ä¸ªå…ƒç´ ï¼ŒZIPLISTç¼–ç ç¤ºæ„å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/bf7ac316ae127c2e610559b683c6c044.png)
å¯ä»¥çœ‹åˆ°ï¼Œâ€œhelloâ€ã€â€œniuniuâ€ã€â€œmartâ€éƒ½æŒ¨åœ¨ä¸€èµ·ï¼Œæ­£å¦‚å…¶åå­—ä¸€æ ·ï¼Œ`ZIPLISTå†…å­˜æ’åˆ—å¾—å¾ˆç´§å‡‘ï¼Œå¯ä»¥æœ‰æ•ˆèŠ‚çº¦å†…å­˜ç©ºé—´`

å…¶ä»–å‡ ä¸ªæ•°æ®å­—æ®µæˆ‘ä»¬è¿™é‡Œå¯ä»¥å…ˆä¸å…³å¿ƒï¼Œä¸‹ä¸€èŠ‚ä¼šè¯¦ç»†è®²è§£ZIPLISTç»“æ„ï¼Œç›®å‰æˆ‘ä»¬åªéœ€è¦èƒ½å®è§‚ç†è§£å‹ç¼©åˆ—è¡¨çš„æ•°æ®æ˜¯ç´§å‡‘ç›¸è¿å³å¯ã€‚

å¦‚æœä¸æ»¡è¶³ZIPç¼–ç çš„æ¡ä»¶ï¼Œåˆ™ä½¿ç”¨LINKEDLISTç¼–ç ã€‚ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬è¿˜æ˜¯å‡è®¾åˆ—è¡¨ä¸­åŒ…å«â€œhelloâ€ã€â€œniuniuâ€ã€â€œmartâ€ä¸‰ä¸ªå…ƒç´ ï¼Œå¦‚æœä½¿ç”¨LINKEDLISTç¼–ç ï¼Œåˆ™æ˜¯å‡ ä¸ªStringå¯¹è±¡çš„é“¾æ¥ç»“æ„ï¼Œç»“æ„ç¤ºæ„å›¾å¦‚ä¸‹ï¼š![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/7f01058ef89fda8c32b288b0ba732807.png)
å¯ä»¥çœ‹åˆ°ï¼Œâ€œhelloâ€ã€â€œniuniuâ€ã€â€œmartâ€è¿™ä¸ªå‡ ä¸ªæ•°æ®æ˜¯ä»¥é“¾è¡¨çš„å½¢å¼è¿æ¥åœ¨ä¸€èµ·ï¼Œå®é™…ä¸Šåˆ é™¤æ›´ä¸ºçµæ´»ï¼Œä½†æ˜¯å†…å­˜ä¸å¦‚ZIPLISTç´§å‡‘ï¼Œæ‰€ä»¥åªæœ‰åœ¨åˆ—è¡¨ä¸ªæ•°æˆ–èŠ‚ç‚¹æ•°æ®é•¿åº¦æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨LINKEDLISTç¼–ç ï¼Œä»¥`åŠ å¿«å¤„ç†æ€§èƒ½ï¼Œä¸€å®šç¨‹åº¦ä¸Šç‰ºç‰²äº†å†…å­˜`ã€‚

### 4.2 QUICKLISTæ¨ªç©ºå‡ºä¸–

ä¸Šé¢åˆ†ææœ‰è¯´åˆ°ï¼ŒZIPLISTæ˜¯ä¸ºäº†åœ¨æ•°æ®è¾ƒå°‘æ—¶èŠ‚çº¦å†…å­˜ï¼ŒLINKEDLISTæ˜¯ä¸ºäº†æ•°æ®å¤šæ—¶æé«˜æ›´æ–°æ•ˆç‡ï¼ŒZIPLISTæ•°æ®ç¨å¤šæ—¶æ’å…¥æ•°æ®ä¼šå¯¼è‡´å¾ˆå¤šå†…å­˜å¤åˆ¶ã€‚

ä½†å¦‚æœèŠ‚ç‚¹éå¸¸å¤šçš„æƒ…å†µï¼ŒLINKEDLISTé“¾è¡¨çš„èŠ‚ç‚¹å°±å¾ˆå¤šï¼Œä¼šå ç”¨ä¸å°‘å†…å­˜ã€‚è¿™ç§æƒ…å†µæœ‰æ²¡æœ‰åŠæ³•ä¼˜åŒ–å‘¢ï¼Ÿ

3.2ç‰ˆæœ¬å°±å¼•å…¥äº†QUICKLISTã€‚QUICKLISTå…¶å®å°±æ˜¯ZIPLISTå’ŒLINKEDLISTçš„ç»“åˆä½“ã€‚![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/61b759acc73db2a27a2b8e1eac9ea2f5.png)
LINKEDLISTåŸæ¥æ˜¯å•ä¸ªèŠ‚ç‚¹ï¼Œåªèƒ½å­˜ä¸€ä¸ªæ•°æ®ï¼Œç°åœ¨å•ä¸ªèŠ‚ç‚¹å­˜çš„æ˜¯ZIPLISTï¼Œå³å¤šä¸ªæ•°æ®ã€‚

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/5c20c44f9c7194c1443472d065b3a3fa.png)

è¿™ä¸ªæ–¹æ¡ˆå…¶å®æ˜¯ç”¨ZIPLISTã€LINKEDLISTç»¼åˆçš„ç»“æ„ï¼Œå–ä»£äºŒè€…æœ¬èº«ã€‚
å½“æ•°æ®è¾ƒå°‘çš„æ—¶å€™ï¼ŒQUICKLISTçš„èŠ‚ç‚¹å°±åªæœ‰ä¸€ä¸ªï¼Œæ­¤æ—¶å…¶å®ç›¸å½“äºå°±æ˜¯ä¸€ä¸ªZIPLISTã€‚
å½“æ•°æ®å¾ˆå¤šçš„æ—¶å€™ï¼Œåˆ™åŒæ—¶åˆ©ç”¨äº†ZIPLISTå’ŒLINKEDLISTçš„ä¼˜åŠ¿

### 4.3 ZIPLISTä¼˜åŒ–

ZIPLISTæœ¬èº«å­˜åœ¨ä¸€ä¸ªè¿é”æ›´æ–°çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨Redis 7.0ä¹‹åï¼Œä½¿ç”¨äº†LISTPACKçš„ç¼–ç æ¨¡å¼å–ä»£äº†ZIPLISTï¼Œè€Œä»–ä»¬å…¶å®æœ¬è´¨éƒ½æ˜¯ä¸€ç§å‹ç¼©çš„åˆ—è¡¨ï¼Œæ‰€ä»¥å…¶å®å¯ä»¥ç»Ÿä¸€å«åšå‹ç¼©åˆ—è¡¨ã€‚

ZIPLISTçš„ç»†èŠ‚ï¼Œä»¥åŠLISTPACKæ˜¯æ€ä¹ˆä¼˜åŒ–çš„ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä»‹ç»

## 5 æ€»ç»“

Listæ˜¯Redisä¸­çš„åˆ—è¡¨å®ç°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯åŒç«¯æ“ä½œçš„å¯¹è±¡ï¼Œç¼–ç çš„åº•å±‚æ•°æ®ç»“æ„è®¾è®¡ZIPLISTå’ŒLINKEDLISTã€‚ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è¯¦ç»†åˆ†æLISTçš„åº•å±‚æ•°æ®ç»“æ„å‹ç¼©åˆ—è¡¨ã€‚