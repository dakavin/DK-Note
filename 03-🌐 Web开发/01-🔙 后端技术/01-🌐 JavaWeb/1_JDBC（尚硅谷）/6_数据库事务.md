---
æ–‡ç« æ ‡é¢˜: "[[6_æ•°æ®åº“äº‹åŠ¡]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  ä»‹ç»æ•°æ®åº“äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µã€ACIDå±æ€§ã€éš”ç¦»çº§åˆ«åŠJDBCä¸­çš„äº‹åŠ¡å¤„ç†ï¼Œé€šè¿‡è½¬è´¦æ¡ˆä¾‹æ¼”ç¤ºäº‹åŠ¡æ§åˆ¶å’Œå¹¶å‘é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚
tags:
- "æ•°æ®åº“äº‹åŠ¡"
- "JDBC"
- "ACID"
- "éš”ç¦»çº§åˆ«"
- "å¹¶å‘æ§åˆ¶"
- "MySQL"
- "äº‹åŠ¡å›æ»š"
- "Java"
ç›¸å…³æ–‡ç« :
- "[[13_äº‹åŠ¡åŸºç¡€çŸ¥è¯†]]"
- "[[14_MySQLäº‹åŠ¡æ—¥å¿—]]"
- "[[16_å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶]]"
- "[[2_ğŸ“•æ ‡ç­¾ç®¡ç†ï¼šæ¥å£å¼€å‘]]"
- "[[4_.2023-10-13åç»­å­¦ä¹ åˆ†æ]]"
æ–‡ç« åˆ†ç±»: "ğŸŒ Webå¼€å‘"
æ–‡ç« è·¯å¾„: "03-ğŸŒ Webå¼€å‘/01-ğŸ”™ åç«¯æŠ€æœ¯/01-ğŸŒ JavaWeb/1_JDBCï¼ˆå°šç¡…è°·ï¼‰/6_æ•°æ®åº“äº‹åŠ¡.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:34:19
---

## 1 æ•°æ®åº“äº‹åŠ¡ä»‹ç»

- ä¾‹å­ï¼šAç»™Bè½¬100å—ï¼ˆAçš„ä½™é¢å°‘100ï¼ŒBçš„ä½™é¢å¤š100ï¼‰
- å¦‚æœAçš„ä½™é¢å°‘100ä¸ºä¸€ä¸ªäº‹åŠ¡ï¼ŒBçš„ä½™é¢å¤š100ä¸ºä¸€ä¸ªäº‹åŠ¡
- åœ¨é¡ºåºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼ŒAçš„æ“ä½œå®Œæˆåï¼Œç¨‹åºå‘ç”Ÿå®•æœºï¼Œé‚£ä¹ˆBçš„æ“ä½œä¸ä¼šæ‰§è¡Œï¼Œå°±ä¼šå‘ç”Ÿæ€»é‡‘é¢å°‘äº†100çš„é—®é¢˜
- æ‰€ä»¥`è¦å°†æ•´ä¸ªè¿‡ç¨‹çœ‹åšæ˜¯ä¸€ä¸ªäº‹åŠ¡æ¥æ“ä½œï¼ï¼ï¼`

- **äº‹åŠ¡ï¼šä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒ,ä½¿æ•°æ®ä»ä¸€ç§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚**
	- å³ä¸€è¡Œæˆ–å¤šè¡Œçš„DMLæ“ä½œ

- **äº‹åŠ¡å¤„ç†ï¼ˆäº‹åŠ¡æ“ä½œï¼‰ï¼š** ä¿è¯æ‰€æœ‰äº‹åŠ¡éƒ½ä½œä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒæ¥æ‰§è¡Œï¼Œå³ä½¿å‡ºç°äº†æ•…éšœï¼Œéƒ½ä¸èƒ½æ”¹å˜è¿™ç§æ‰§è¡Œæ–¹å¼ã€‚å½“åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œæ—¶ï¼Œè¦ä¹ˆæ‰€æœ‰çš„äº‹åŠ¡éƒ½**è¢«æäº¤(commit)**ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹å°±æ°¸ä¹…åœ°ä¿å­˜ä¸‹æ¥ï¼›è¦ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå°†æ”¾å¼ƒæ‰€ä½œçš„æ‰€æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªäº‹åŠ¡**å›æ»š(rollback)** åˆ°æœ€åˆçŠ¶æ€ã€‚

- ä¸ºç¡®ä¿æ•°æ®åº“ä¸­æ•°æ®çš„**ä¸€è‡´æ€§**ï¼Œæ•°æ®çš„æ“çºµåº”å½“æ˜¯ç¦»æ•£çš„æˆç»„çš„é€»è¾‘å•å…ƒï¼šå½“å®ƒå…¨éƒ¨å®Œæˆæ—¶ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å¯ä»¥ä¿æŒï¼Œè€Œå½“è¿™ä¸ªå•å…ƒä¸­çš„ä¸€éƒ¨åˆ†æ“ä½œå¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡åº”å…¨éƒ¨è§†ä¸ºé”™è¯¯ï¼Œæ‰€æœ‰ä»èµ·å§‹ç‚¹ä»¥åçš„æ“ä½œåº”å…¨éƒ¨å›é€€åˆ°å¼€å§‹çŠ¶æ€ã€‚ 

## 2 JDBCäº‹åŠ¡å¤„ç†

- æ•°æ®ä¸€æ—¦æäº¤ï¼Œå°±ä¸å¯å›æ»šã€‚
- æ•°æ®`ä»€ä¹ˆæ—¶å€™æ„å‘³ç€æäº¤ï¼Ÿ`
  - **å½“ä¸€ä¸ªè¿æ¥å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡**ï¼šæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª SQL è¯­å¥æ—¶ï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œå°±ä¼šå‘æ•°æ®åº“è‡ªåŠ¨æäº¤ï¼Œè€Œä¸èƒ½å›æ»šã€‚
  - **å…³é—­æ•°æ®åº“è¿æ¥(`con.close()`)ï¼Œæ•°æ®å°±ä¼šè‡ªåŠ¨çš„æäº¤ã€‚** å¦‚æœå¤šä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œä½¿ç”¨çš„æ˜¯è‡ªå·±å•ç‹¬çš„è¿æ¥ï¼Œåˆ™æ— æ³•ä¿è¯äº‹åŠ¡ã€‚å³åŒä¸€ä¸ªäº‹åŠ¡çš„å¤šä¸ªæ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿æ¥ä¸‹ã€‚
- **JDBCç¨‹åºä¸­ä¸ºäº†è®©å¤šä¸ª SQL è¯­å¥ä½œä¸ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œï¼š**
- å¦‚æœè®¾ç½®äº†falseï¼Œå¹¶ä¸”æ²¡æœ‰æ˜¾ç¤ºçš„å¯¹äº‹åŠ¡è¿›è¡Œæäº¤æˆ–å›æ»šï¼Œé‚£ä¹ˆåœ¨è¯¥æ–¹æ³•ç»“æŸæ—¶ï¼Œå¹¶ä¸”äº‹åŠ¡è¶…å‡ºäº†å…¶æœ‰æ•ˆèŒƒå›´ï¼Œè¯¥æ–¹æ³•ä¸­ä»»ä½•çš„DMLæ“ä½œéƒ½ä¼šè¢«å›æ»šï¼ï¼ï¼

  - è°ƒç”¨ Connection å¯¹è±¡çš„ **setAutoCommit(false);** ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡
  - åœ¨æ‰€æœ‰çš„ SQL è¯­å¥éƒ½æˆåŠŸæ‰§è¡Œåï¼Œè°ƒç”¨ **commit();** æ–¹æ³•æäº¤äº‹åŠ¡
  - åœ¨å‡ºç°å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨ **rollback();** æ–¹æ³•å›æ»šäº‹åŠ¡

  > `è‹¥æ­¤æ—¶ Connection æ²¡æœ‰è¢«å…³é—­ï¼Œè¿˜å¯èƒ½è¢«é‡å¤ä½¿ç”¨ï¼Œåˆ™éœ€è¦æ¢å¤å…¶è‡ªåŠ¨æäº¤çŠ¶æ€ setAutoCommit(true)`ã€‚å°¤å…¶æ˜¯åœ¨ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯æ—¶ï¼Œæ‰§è¡Œclose()æ–¹æ³•å‰ï¼Œå»ºè®®æ¢å¤è‡ªåŠ¨æäº¤çŠ¶æ€ã€‚

ã€æ¡ˆä¾‹ï¼šç”¨æˆ·AAå‘ç”¨æˆ·BBè½¬è´¦100ã€‘

```java
public void test2(){  
    Connection con = null;  
    try {  
        con = JDBCUtils.getConnection();  
        con.setAutoCommit(false);  
  
        String sql1 = "UPDATE user_table SET balance = balance - 100 WHERE user = ?";  
        update(con,sql1,"AA");  
  
        System.out.println(10/0);  
        //ä»£ç å‡ºç°å¼‚å¸¸ï¼Œåœ¨catchå¤„ç›´æ¥ä¼šå›æ»š  
  
        String sql2 = "UPDATE user_table SET balance = balance + 100 WHERE user = ?";  
        update(con,sql2,"BB");  
  
        //æ‰§è¡Œåˆ°æ­¤å¤„ï¼Œè¡¨ç¤ºä»£ç æ­£å¸¸è¿è¡Œï¼Œæäº¤  
        System.out.println("ä»£ç æ­£å¸¸è¿è¡Œï¼Œæäº¤æˆåŠŸ");  
        con.commit();  
    } catch (Exception e) {  
        try {  
            System.out.println("ä»£ç å‡ºç°å¼‚å¸¸ï¼Œä¿®æ”¹å¤±è´¥å¹¶å›æ»š");  
            if (con!=null)  
                con.rollback();  
        } catch (SQLException ex) {  
            e.printStackTrace();  
        }  
    } finally {  
        try {  
            if (con!=null)  
                con.setAutoCommit(true);  
            //é’ˆå¯¹äºä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œè¿æ¥ä¼šè¢«é‡å¤ä½¿ç”¨ï¼Œè¦å¤åŸè®¾ç½®  
                con.close();  
        } catch (SQLException e) {  
            e.printStackTrace();  
        }  
    }  
}

```

å…¶ä¸­ï¼Œå¯¹æ•°æ®åº“æ“ä½œçš„æ–¹æ³•ä¸ºï¼š

```java
//ä½¿ç”¨äº‹åŠ¡ä»¥åçš„é€šç”¨çš„å¢åˆ æ”¹æ“ä½œï¼ˆversion 2.0ï¼‰
public void update(Connection conn ,String sql, Object... args) {
	PreparedStatement ps = null;
	try {
		// 1.è·å–PreparedStatementçš„å®ä¾‹ (æˆ–ï¼šé¢„ç¼–è¯‘sqlè¯­å¥)
		ps = conn.prepareStatement(sql);
		// 2.å¡«å……å ä½ç¬¦
		for (int i = 0; i < args.length; i++) {
			ps.setObject(i + 1, args[i]);
		}
		// 3.æ‰§è¡Œsqlè¯­å¥
		ps.execute();
	} catch (Exception e) {
		e.printStackTrace();
	} finally {
		// 4.å…³é—­èµ„æº
		JDBCUtils.closeResource(null, ps);

	}
}
```


## 3 äº‹åŠ¡çš„ACIDå±æ€§    

1. **åŸå­æ€§ï¼ˆAtomicityï¼‰**
    åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ 

2. **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**
    äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚

3. **éš”ç¦»æ€§ï¼ˆIsolationï¼‰**
    äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚

4. **æŒä¹…æ€§ï¼ˆDurabilityï¼‰**
    æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚

### 3.1 æ•°æ®åº“çš„å¹¶å‘é—®é¢˜

- å¯¹äºåŒæ—¶è¿è¡Œçš„å¤šä¸ªäº‹åŠ¡, å½“è¿™äº›äº‹åŠ¡è®¿é—®æ•°æ®åº“ä¸­ç›¸åŒçš„æ•°æ®æ—¶, å¦‚æœæ²¡æœ‰é‡‡å–å¿…è¦çš„éš”ç¦»æœºåˆ¶, å°±ä¼šå¯¼è‡´å„ç§å¹¶å‘é—®é¢˜:
  - **è„è¯»**: å¯¹äºä¸¤ä¸ªäº‹åŠ¡ T1, T2, T1 è¯»å–äº†å·²ç»è¢« T2 æ›´æ–°ä½†è¿˜**æ²¡æœ‰è¢«æäº¤**çš„å­—æ®µã€‚ä¹‹å, è‹¥ T2 å›æ»š, T1è¯»å–çš„å†…å®¹å°±æ˜¯ä¸´æ—¶ä¸”æ— æ•ˆçš„ã€‚
  - **ä¸å¯é‡å¤è¯»**: å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1, T2, T1 è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 **æ›´æ–°**äº†è¯¥å­—æ®µã€‚ä¹‹å, T1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µ, å€¼å°±ä¸åŒäº†ã€‚
  - **å¹»è¯»**: å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1, T2, T1 ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 åœ¨è¯¥è¡¨ä¸­**æ’å…¥**äº†ä¸€äº›æ–°çš„è¡Œã€‚ä¹‹å, å¦‚æœ T1 å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨, å°±ä¼šå¤šå‡ºå‡ è¡Œã€‚

- **æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»æ€§**: æ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…·æœ‰éš”ç¦»å¹¶å‘è¿è¡Œå„ä¸ªäº‹åŠ¡çš„èƒ½åŠ›, ä½¿å®ƒä»¬ä¸ä¼šç›¸äº’å½±å“, é¿å…å„ç§å¹¶å‘é—®é¢˜ã€‚

- ä¸€ä¸ªäº‹åŠ¡ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»çš„ç¨‹åº¦ç§°ä¸ºéš”ç¦»çº§åˆ«ã€‚æ•°æ®åº“è§„å®šäº†å¤šç§äº‹åŠ¡éš”ç¦»çº§åˆ«, ä¸åŒéš”ç¦»çº§åˆ«å¯¹åº”ä¸åŒçš„å¹²æ‰°ç¨‹åº¦, **éš”ç¦»çº§åˆ«è¶Šé«˜, æ•°æ®ä¸€è‡´æ€§å°±è¶Šå¥½, ä½†å¹¶å‘æ€§è¶Šå¼±ã€‚**

### 3.2 å››ç§éš”ç¦»çº§åˆ«

- æ•°æ®åº“æä¾›çš„4ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š


- Oracle æ”¯æŒçš„ 2 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š**READ COMMITED**, SERIALIZABLEã€‚ Oracle é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸º: **READ COMMITED** 

- Mysql æ”¯æŒ 4 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚Mysql é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸º: **REPEATABLE READã€‚**

### 3.3 åœ¨MySqlä¸­è®¾ç½®éš”ç¦»çº§åˆ«

- æ¯å¯åŠ¨ä¸€ä¸ª mysql ç¨‹åº, å°±ä¼šè·å¾—ä¸€ä¸ªå•ç‹¬çš„æ•°æ®åº“è¿æ¥. æ¯ä¸ªæ•°æ®åº“è¿æ¥éƒ½æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ @@tx_isolation, è¡¨ç¤ºå½“å‰çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚

- æŸ¥çœ‹å½“å‰çš„éš”ç¦»çº§åˆ«: 

  ```mysql
  SELECT @@tx_isolation;
  ```

- è®¾ç½®å½“å‰ mySQL è¿æ¥çš„éš”ç¦»çº§åˆ«:  

  ```mysql
  set  transaction isolation level read committed;
  ```

- è®¾ç½®æ•°æ®åº“ç³»ç»Ÿçš„å…¨å±€çš„éš”ç¦»çº§åˆ«:

  ```mysql
  set global transaction isolation level read committed;
  ```

- è¡¥å……æ“ä½œï¼š

  - åˆ›å»ºmysqlæ•°æ®åº“ç”¨æˆ·ï¼š

    ```mysql
    create user tom identified by 'abc123';
    ```

  - æˆäºˆæƒé™

    ```mysql
    #æˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„tomç”¨æˆ·ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸ºabc123.
    grant all privileges on *.* to tom@'%'  identified by 'abc123'; 
    
     #ç»™tomç”¨æˆ·ä½¿ç”¨æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼ï¼Œæˆäºˆatguigudbè¿™ä¸ªåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥çš„æƒé™ã€‚
    grant select,insert,delete,update on atguigudb.* to tom@localhost identified by 'abc123'; 
    
    ```

    
- æ¼”ç¤ºï¼ŒæŸ¥è¯¢äº‹åŠ¡çš„éš”ç¦»ç­‰çº§ å’Œ è®¾ç½®äº‹åŠ¡çš„éš”ç¦»ç­‰çº§

```java
con.getTransactionIsolation()
con.setTransactionIsolation()
```

```java
public class QueryTest {  
  
    @Test  
    public void test1() throws Exception {  
        Connection con = JDBCUtils.getConnection();  
  
        //è·å–å½“å‰è¿æ¥çš„éš”ç¦»çº§åˆ«  
        System.out.println(con.getTransactionIsolation());  
        //è®¾ç½®éš”ç¦»çº§åˆ«  
//        con.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);  
        con.setAutoCommit(false);  
        String sql = "SELECT user,password,balance FROM user_table WHERE user = ?";  
        ArrayList<User> list = getInstance(con, User.class, sql, "CC");  
        System.out.println(list.get(0));  
    }  
  
    @Test  
    public void test2() throws Exception {  
        Connection con = JDBCUtils.getConnection();  
  
        //è·å–å½“å‰è¿æ¥çš„éš”ç¦»çº§åˆ«  
        System.out.println(con.getTransactionIsolation());  
        con.setAutoCommit(false);  
        String sql = "UPDATE user_table SET balance = ? WHERE user = ?";  
        update(con,sql,5000,"CC");  
  
        Thread.sleep(15000);  
        System.out.println("ä¿®æ”¹ç»“æŸ");  
    }  
  
    //é€šç”¨çš„æŸ¥è¯¢æ“ä½œï¼Œæ¶‰åŠéš”ç¦»çº§åˆ«  
    public <T> ArrayList<T> getInstance(Connection con,Class<T> clazz, String sql, Object ... args){  
        PreparedStatement ps = null;  
        ResultSet rs = null;  
        try {  
            ps = con.prepareStatement(sql);  
            for (int i = 0; i < args.length; i++) {  
                ps.setObject(i+1,args[i]);  
            }  
  
            rs = ps.executeQuery();  
            ResultSetMetaData md = rs.getMetaData();  
            int columnCount = md.getColumnCount();  
            ArrayList<T> list = new ArrayList<>();  
            while (rs.next()){  
                T t = clazz.getConstructor().newInstance();  
                for (int i = 0; i < columnCount; i++) {  
                    String columnName = md.getColumnLabel(i + 1);  
                    Object columnValue = rs.getObject(columnName);  
  
                    Field field = clazz.getDeclaredField(columnName);  
                    field.setAccessible(true);  
                    field.set(t,columnValue);  
                }  
                list.add(t);  
            }  
            return list;  
        } catch (Exception e) {  
            e.printStackTrace();  
        } finally {  
            JDBCUtils.queryClose(null,ps,rs);  
        }  
        return null;  
    }  
}
```