---
æ–‡ç« æ ‡é¢˜: "[[0_åŸºç¡€åŠ å¼º]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  ä»‹ç»äº†JavaåŸºç¡€åŠ å¼ºå†…å®¹ï¼ŒåŒ…æ‹¬JUnitå•å…ƒæµ‹è¯•ä½¿ç”¨æ–¹æ³•ã€åå°„æœºåˆ¶çš„æ¦‚å¿µå’Œåº”ç”¨ã€æ³¨è§£çš„å®šä¹‰å’Œä½¿ç”¨ï¼Œä»¥åŠé€šè¿‡æ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨åå°„å’Œæ³¨è§£å®ç°æ¡†æ¶è®¾è®¡ã€‚
tags:
- "Java"
- "JUnit"
- "å•å…ƒæµ‹è¯•"
- "åå°„"
- "æ³¨è§£"
- "æ¡†æ¶è®¾è®¡"
- "ç™½ç›’æµ‹è¯•"
- "å…ƒæ³¨è§£"
ç›¸å…³æ–‡ç« :
- "[[11_åå°„]]"
- "[[12_æ³¨è§£]]"
- "[[1_Javaåå°„]]"
- "[[1_Part1-BUG]]"
- "[[2_é™æ€ä»£ç†çš„ç»§æ‰¿æ€§ç†è§£]]"
æ–‡ç« åˆ†ç±»: "ğŸŒ Webå¼€å‘"
æ–‡ç« è·¯å¾„: "03-ğŸŒ Webå¼€å‘/01-ğŸ”™ åç«¯æŠ€æœ¯/01-ğŸŒ JavaWeb/2_JavaWeb(é»‘é©¬)/0_åŸºç¡€åŠ å¼º.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­ æ ¸å¿ƒèƒ½åŠ›
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:34:19
---

## 1 Juintå•å…ƒæµ‹è¯•

* `æµ‹è¯•åˆ†ç±»`ï¼š
	1. `é»‘ç›’æµ‹è¯•`ï¼šä¸éœ€è¦å†™ä»£ç ï¼Œç»™è¾“å…¥å€¼ï¼Œ`çœ‹ç¨‹åºæ˜¯å¦èƒ½å¤Ÿè¾“å‡ºæœŸæœ›çš„å€¼`ã€‚
	2. `ç™½ç›’æµ‹è¯•`ï¼šéœ€è¦å†™ä»£ç çš„ã€‚`å…³æ³¨ç¨‹åºå…·ä½“çš„æ‰§è¡Œæµç¨‹`ã€‚

* `Junitä½¿ç”¨ï¼šç™½ç›’æµ‹è¯•ä¸­çš„ä¸€ç§`
* <font color="#ff0000">æ­¥éª¤</font>ï¼š
	1. å®šä¹‰ä¸€ä¸ªæµ‹è¯•ç±»(æµ‹è¯•ç”¨ä¾‹)
		* <font color="#ff0000">å»ºè®®</font>ï¼š
		* <font color="#ff0000">æµ‹è¯•ç±»å</font>ï¼šè¢«æµ‹è¯•çš„ç±»åTest		CalculatorTest
		* <font color="#ff0000">åŒ…å</font>ï¼šxxx.xxx.xx.test		cn.itcast.test
	2. å®šä¹‰æµ‹è¯•æ–¹æ³•ï¼šå¯ä»¥ç‹¬ç«‹è¿è¡Œ
		* å»ºè®®ï¼š
		* æ–¹æ³•åï¼štestæµ‹è¯•çš„æ–¹æ³•å		testAdd()  
		* è¿”å›å€¼ï¼švoid
		* å‚æ•°åˆ—è¡¨ï¼šç©ºå‚
	3. ç»™æ–¹æ³•åŠ @Test
	4. å¯¼å…¥junitä¾èµ–ç¯å¢ƒ

* `åˆ¤å®šç»“æœ`ï¼š
	* <font color="#ff0000">çº¢è‰²ï¼šå¤±è´¥</font>
	* <font color="#00b050">ç»¿è‰²ï¼šæˆåŠŸ</font>
	* `ä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨æ–­è¨€æ“ä½œæ¥å¤„ç†ç»“æœ`
		* Assert.assertEquals(æœŸæœ›çš„ç»“æœ,è¿ç®—çš„ç»“æœ);
```java
@Test  
public void testAdd(){  
    System.out.println("æˆ‘è¢«æ‰§è¡Œäº†");  
    Calculator calculator = new Calculator();  
    int add = calculator.add(1, 2);  
    //å‡å¦‚addæ–¹æ³•å†™é”™äº†  
    //ä½¿ç”¨æ–­è¨€  
    Assert.assertEquals(3,add);  
}
```

* è¡¥å……ï¼š
* `@Before`:
	* ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æµ‹è¯•æ–¹æ³•ä¹‹å‰è¢«è‡ªåŠ¨æ‰§è¡Œ
	* æ‰€ä»¥ï¼š`ä¸€èˆ¬ä¼šç”¨äºèµ„æºçš„ç”³è¯·`
```java
@Before  
public void init(){  
    System.out.println("init...");  
}
```

* `@After`:
	* ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹åè‡ªåŠ¨è¢«æ‰§è¡Œ
	* æ‰€ä»¥ï¼š`ä¸€èˆ¬ä¼šç”¨äºèµ„æºçš„å…³é—­`
```java
@After  
public void close(){  
    System.out.println("close...");  
}
```

## 2 åå°„ï¼šæ¡†æ¶è®¾è®¡çš„çµé­‚

### 2.1 ç›¸å…³æ¦‚å¿µ

* `æ¡†æ¶`ï¼š`åŠæˆå“è½¯ä»¶`ã€‚å¯ä»¥åœ¨æ¡†æ¶çš„åŸºç¡€ä¸Šè¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œç®€åŒ–ç¼–ç 
* `åå°„`ï¼šå°†ç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…ä¸ºå…¶ä»–å¯¹è±¡ï¼Œè¿™å°±æ˜¯åå°„æœºåˆ¶
* å¥½å¤„ï¼š
	1. å¯ä»¥åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ“ä½œè¿™äº›å¯¹è±¡ã€‚
	2. å¯ä»¥è§£è€¦ï¼Œæé«˜ç¨‹åºçš„å¯æ‰©å±•æ€§ã€‚

### 2.2 è·å–classå¯¹è±¡çš„æ–¹å¼


- `Class.forName("å…¨ç±»å")`ï¼š<font color="#d83931">å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classå¯¹è±¡</font>
	* å¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œå°†ç±»åå®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚è¯»å–æ–‡ä»¶ï¼ŒåŠ è½½ç±»

- `ç±»å.class`ï¼šé€šè¿‡ç±»åçš„å±æ€§classè·å–
	* å¤šç”¨äºå‚æ•°çš„ä¼ é€’

 - `å¯¹è±¡.getClass()`ï¼šgetClass()æ–¹æ³•åœ¨Objectç±»ä¸­å®šä¹‰ç€ã€‚
	* å¤šç”¨äºå¯¹è±¡çš„è·å–å­—èŠ‚ç çš„æ–¹å¼

* ç»“è®ºï¼š
	<font color="#d83931">åŒä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶(\*.class)åœ¨ä¸€æ¬¡ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œä¸è®ºé€šè¿‡å“ªä¸€ç§æ–¹å¼è·å–çš„Classå¯¹è±¡éƒ½æ˜¯åŒä¸€ä¸ª</font>ã€‚

### 2.3 Classå¯¹è±¡åŠŸèƒ½

- `è·å–æˆå‘˜å˜é‡ä»¬`
	* Field\[] getFields() ï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æˆå‘˜å˜é‡
	* Field getField(String name)   è·å–æŒ‡å®šåç§°çš„ publicä¿®é¥°çš„æˆå‘˜å˜é‡
	* Field\[] getDeclaredFields()  è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡ï¼Œä¸è€ƒè™‘ä¿®é¥°ç¬¦
	* Field getDeclaredField(String name)  

-  `è·å–æ„é€ æ–¹æ³•ä»¬`
	* Constructor\<?>[] getConstructors()  
	* Constructor\<T> getConstructor(ç±»\<?>... parameterTypes)  

	* Constructor\<T> getDeclaredConstructor(ç±»\<?>... parameterTypes)  
	* Constructor\<?>[] getDeclaredConstructors()  

- `è·å–æˆå‘˜æ–¹æ³•ä»¬`ï¼š
	* Method[] getMethods()  
	* Method getMethod(String name, ç±»\<?>... parameterTypes)  

	* Method[] getDeclaredMethods()  
	* Method getDeclaredMethod(String name, ç±»\<?>... parameterTypes)  
- `è·å–å…¨ç±»å`	
	* String getName()  

### 2.4 Fieldï¼šæˆå‘˜å˜é‡

- è®¾ç½®å€¼
	* void set(Object obj, Object value)  

-  è·å–å€¼
	* get(Object obj) 

-  å¿½ç•¥è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å®‰å…¨æ£€æŸ¥
	* setAccessible(true):æš´åŠ›åå°„

### 2.5 Constructor:æ„é€ æ–¹æ³•

* T newInstance(Object... initargs)  

* å¦‚æœä½¿ç”¨ç©ºå‚æ•°æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œ`æ“ä½œå¯ä»¥ç®€åŒ–ï¼šClasså¯¹è±¡çš„newInstanceæ–¹æ³•`ï¼Œæ‰€ä»¥javaBeanä¸­ï¼Œéœ€è¦æä¾›ä¸€ä¸ªç©ºå‚çš„æ„é€ å™¨

### 2.6 Methodï¼šæ–¹æ³•å¯¹è±¡

- æ‰§è¡Œæ–¹æ³•ï¼š
	* Object invoke(Object obj, Object... args)  

* è·å–æ–¹æ³•åç§°ï¼š
	* String getName:è·å–æ–¹æ³•å

### 2.7 æ¡ˆä¾‹

* æ¡ˆä¾‹ï¼š
	* éœ€æ±‚ï¼šå†™ä¸€ä¸ª"æ¡†æ¶"ï¼Œä¸èƒ½æ”¹å˜è¯¥ç±»çš„ä»»ä½•ä»£ç çš„å‰æä¸‹ï¼Œå¯ä»¥å¸®æˆ‘ä»¬åˆ›å»ºä»»æ„ç±»çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ‰§è¡Œå…¶ä¸­ä»»æ„æ–¹æ³•
		* å®ç°ï¼š
			1. é…ç½®æ–‡ä»¶
			2. åå°„
		* æ­¥éª¤ï¼š
			1. å°†éœ€è¦åˆ›å»ºçš„å¯¹è±¡çš„å…¨ç±»åå’Œéœ€è¦æ‰§è¡Œçš„æ–¹æ³•å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­
			2. åœ¨ç¨‹åºä¸­åŠ è½½è¯»å–é…ç½®æ–‡ä»¶
			3. ä½¿ç”¨åå°„æŠ€æœ¯æ¥åŠ è½½ç±»æ–‡ä»¶è¿›å†…å­˜
			4. åˆ›å»ºå¯¹è±¡
			5. æ‰§è¡Œæ–¹æ³•

```java
public class ReflectTest {  
    @Test  
    public void test() throws Exception{  
        //åŠ è½½é…ç½®æ–‡ä»¶  
        Properties pro = new Properties();  
        pro.load(ClassLoader.getSystemResourceAsStream("class.properties"));  
        //è·å–ç±»çš„åœ°å€  
        String className = pro.getProperty("className");  
        //è·å–æ–¹æ³•å  
        String methodName = pro.getProperty("methodName");  
        //é€šè¿‡å…¨ç±»åè·å–è¯¥ç±»çš„Classç±»å¯¹è±¡  
        Class<?> clazz = Class.forName(className);  
        //è·å–è¯¥ç±»çš„å®ä¾‹  
        Object instance = clazz.getDeclaredConstructor().newInstance();  
        //è·å–è¯¥ç±»çš„addæ–¹æ³•  
        Method add = clazz.getDeclaredMethod(methodName,int.class,int.class);  
        //è°ƒç”¨è¯¥ç±»çš„addæ–¹æ³•  
        Object invoke = add.invoke(instance, 1,3);  
        System.out.println(invoke);  
    }  
}
```

## 3 æ³¨è§£

### 3.1 æ¦‚å¿µ

* æ³¨è§£æ¦‚å¿µï¼š`è¯´æ˜ç¨‹åºçš„ã€‚ç»™è®¡ç®—æœºçœ‹çš„`
* åŒºåˆ«æ³¨é‡Šï¼š`ç”¨æ–‡å­—æè¿°ç¨‹åºçš„ã€‚ç»™ç¨‹åºå‘˜çœ‹çš„`

* å®šä¹‰ï¼šæ³¨è§£ï¼ˆAnnotationï¼‰ï¼Œä¹Ÿå«å…ƒæ•°æ®ã€‚ä¸€ç§ä»£ç çº§åˆ«çš„è¯´æ˜ã€‚å®ƒæ˜¯JDK1.5åŠä»¥åç‰ˆæœ¬å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ï¼Œä¸ç±»ã€æ¥å£ã€æšä¸¾æ˜¯åœ¨åŒä¸€ä¸ªå±‚æ¬¡ã€‚å®ƒå¯ä»¥å£°æ˜åœ¨åŒ…ã€ç±»ã€å­—æ®µã€æ–¹æ³•ã€å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°ç­‰çš„å‰é¢ï¼Œç”¨æ¥å¯¹è¿™äº›å…ƒç´ è¿›è¡Œè¯´æ˜ï¼Œæ³¨é‡Šã€‚
* æ¦‚å¿µæè¿°ï¼š
	* `JDK1.5ä¹‹åçš„æ–°ç‰¹æ€§`
	* `è¯´æ˜ç¨‹åºçš„`
	* `ä½¿ç”¨æ³¨è§£ï¼š@æ³¨è§£åç§°`

### 3.2 åˆ†ç±»

- `ç¼–å†™æ–‡æ¡£`ï¼šé€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„æ³¨è§£(å…ƒæ•°æ®)ç”Ÿæˆæ–‡æ¡£ã€ç”Ÿæˆæ–‡æ¡£docæ–‡æ¡£ã€‘

- `ä»£ç åˆ†æ`ï¼šé€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„æ³¨è§£å¯¹ä»£ç è¿›è¡Œåˆ†æã€ä½¿ç”¨åå°„ã€‘

- `ç¼–è¯‘æ£€æŸ¥`ï¼šé€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„æ³¨è§£è®©ç¼–è¯‘å™¨èƒ½å¤Ÿå®ç°åŸºæœ¬çš„ç¼–è¯‘æ£€æŸ¥ã€Overrideã€‘

### 3.3 JDKä¸­é¢„å®šä¹‰çš„ä¸€äº›æ³¨è§£

* `@Override`	ï¼šæ£€æµ‹è¢«è¯¥æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•æ˜¯å¦æ˜¯ç»§æ‰¿è‡ªçˆ¶ç±»(æ¥å£)çš„
* `@Deprecated`ï¼šè¯¥æ³¨è§£æ ‡æ³¨çš„å†…å®¹ï¼Œè¡¨ç¤ºå·²è¿‡æ—¶
* `@SuppressWarnings`ï¼šå‹åˆ¶è­¦å‘Š
	* `ä¸€èˆ¬ä¼ é€’å‚æ•°all`  @SuppressWarnings("all")

### 3.4 è‡ªå®šä¹‰æ³¨è§£

* æ ¼å¼ï¼š
```java
å…ƒæ³¨è§£
public @interface æ³¨è§£åç§°{
	å±æ€§åˆ—è¡¨;
}
```

* æœ¬è´¨ï¼š`æ³¨è§£æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é»˜è®¤ç»§æ‰¿Annotationæ¥å£`
	* public interface MyAnno extends java.lang.annotation.Annotation {}

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/b89e6a6fa4ab1f97c8775c0f729bdd6e.png)



* å±æ€§ï¼š`æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•`
* è¦æ±‚ï¼š
	1. å±æ€§çš„`è¿”å›å€¼ç±»å‹æœ‰ä¸‹åˆ—å–å€¼`
		* åŸºæœ¬æ•°æ®ç±»å‹
		* String
		* æšä¸¾
		* æ³¨è§£
		* ä»¥ä¸Šç±»å‹çš„æ•°ç»„
	2. å®šä¹‰äº†å±æ€§ï¼Œåœ¨`ä½¿ç”¨æ—¶éœ€è¦ç»™å±æ€§èµ‹å€¼`
		1. å¦‚æœå®šä¹‰å±æ€§æ—¶ï¼Œä½¿ç”¨defaultå…³é”®å­—ç»™å±æ€§é»˜è®¤åˆå§‹åŒ–å€¼ï¼Œåˆ™ä½¿ç”¨æ³¨è§£æ—¶ï¼Œå¯ä»¥ä¸è¿›è¡Œå±æ€§çš„èµ‹å€¼ã€‚
		2. å¦‚æœåªæœ‰ä¸€ä¸ªå±æ€§éœ€è¦èµ‹å€¼ï¼Œå¹¶ä¸”å±æ€§çš„åç§°æ˜¯valueï¼Œåˆ™valueå¯ä»¥çœç•¥ï¼Œç›´æ¥å®šä¹‰å€¼å³å¯ã€‚
		3. æ•°ç»„å±æ€§èµ‹å€¼æ—¶ï¼Œå€¼ä½¿ç”¨{}åŒ…è£¹ã€‚å¦‚æœæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªå€¼ï¼Œåˆ™{}å¯ä»¥çœç•¥

![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/d6125de5329a7629775085847371118d.png)


- å…ƒæ³¨è§£ï¼š`ç”¨äºæè¿°æ³¨è§£çš„æ³¨è§£`
	* `@Target`ï¼šæè¿°æ³¨è§£èƒ½å¤Ÿ`ä½œç”¨çš„ä½ç½®`
		* ElementTypeå–å€¼ï¼š
			* TYPEï¼šå¯ä»¥ä½œç”¨äºç±»ä¸Š
			* METHODï¼šå¯ä»¥ä½œç”¨äºæ–¹æ³•ä¸Š
			* FIELDï¼šå¯ä»¥ä½œç”¨äºæˆå‘˜å˜é‡ä¸Š
	* `@Retention`ï¼šæè¿°æ³¨è§£è¢«`ä¿ç•™çš„é˜¶æ®µ`
		* @Retention(RetentionPolicy.RUNTIME)ï¼šå½“å‰è¢«æè¿°çš„æ³¨è§£ï¼Œä¼šä¿ç•™åˆ°classå­—èŠ‚ç æ–‡ä»¶ä¸­ï¼Œå¹¶è¢«JVMè¯»å–åˆ°
	* `@Documented`ï¼šæè¿°æ³¨è§£`æ˜¯å¦è¢«æŠ½å–åˆ°apiæ–‡æ¡£ä¸­`
	* `@Inherited`ï¼šæè¿°æ³¨è§£`æ˜¯å¦è¢«å­ç±»ç»§æ‰¿
`
### 3.5 è·å–æ³¨è§£ä¸­å®šä¹‰çš„å±æ€§å€¼

- `ä½¿ç”¨åå°„è·å–æ³¨è§£ä¸­çš„ä¿¡æ¯`ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨ä½¿ç”¨é…ç½®æ–‡ä»¶äº†

1. è·å–æ³¨è§£`å®šä¹‰çš„ä½ç½®çš„å¯¹è±¡`  ï¼ˆClassï¼ŒMethod,Fieldï¼‰
2. è·å–æŒ‡å®šçš„æ³¨è§£
	* getAnnotation(Class)
	//å…¶å®å°±æ˜¯åœ¨å†…å­˜ä¸­ç”Ÿæˆäº†ä¸€ä¸ªè¯¥æ³¨è§£æ¥å£çš„å­ç±»å®ç°å¯¹è±¡
3. è°ƒç”¨æ³¨è§£ä¸­çš„æŠ½è±¡æ–¹æ³•è·å–é…ç½®çš„å±æ€§å€¼
```java
//æ³¨è§£ä»£ç 
@Target(ElementType.TYPE)  
@Retention(RetentionPolicy.RUNTIME)  
public @interface Pro {  
    String className();  
    String methodName();  
}  

//Pro an = ReflectTest.class.getAnnotation(Pro.class);
//ä¸Šè¿°ä»£ç ï¼Œç›¸å½“äºç”Ÿæˆäº†ä¸€ä¸ªProImlçš„å®ä¾‹
class ProIml implements Pro{  
    @Override  
    public String className() {  
        return "com.dakkk.junit.Calculator";  
    }  
    @Override  
    public String methodName() {  
        return "add";  
    }  
}

//å…·ä½“åå°„ç±»ä»£ç 
@Pro(className = "com.dakkk.junit.Calculator",methodName = "add")  
public class ReflectTest {  
    public static void main(String[] args) {  
        //1.è§£ææ³¨è§£  
        //æœ¬è´¨å°±æ˜¯åœ¨å†…å­˜ä¸­ç”Ÿæˆäº†ä¸€ä¸ªè¯¥æ³¨è§£çš„å­ç±»å®ç°å¯¹è±¡ï¼Œç›¸å½“äºï¼Œè§æ³¨è§£ä»£ç è§£æ  
        Pro an = ReflectTest.class.getAnnotation(Pro.class);  
        //2.è°ƒç”¨æ³¨è§£å¯¹è±¡ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•ï¼Œè·å–è¿”å›å€¼  
        String className = an.className();  
        String methodName = an.methodName();  
        //åç»­æ­¥éª¤ä¸åœ¨é‡å¤  
    }  
}
```


### 3.6 æ¡ˆä¾‹ï¼šç®€å•çš„æµ‹è¯•æ¡†æ¶

- `è¢«æµ‹è¯•çš„ç±»`
```java
public class Calculator {  
    //åŠ æ³•  
    @Check  
    public void add(){  
        String str = null;  
        str.toCharArray();  
        System.out.println("1 + 0 = " + (1 + 0));  
    }  
    //å‡æ³•  
    @Check  
    public void sub(){  
        System.out.println("1 - 0 = " + (1 - 0));  
    }  
    //ä¹˜æ³•  
    @Check  
    public void mul(){  
        System.out.println("1 * 0 = " + (1 * 0));  
    }  
    //é™¤æ³•  
    @Check  
    public void div(){  
        System.out.println("1 / 0 = " + (1 / 0));  
    }  
  
    public void show(){  
        System.out.println("æ°¸æ— bug...");  
    }  
}
```

- `æ³¨è§£`
```java
@Target(ElementType.METHOD)  
@Retention(RetentionPolicy.RUNTIME)  
public @interface Check {  
}
```

- `æµ‹è¯•ç±»`
```java
public class TestCheck {  
    @Test  
    public void test() throws Exception {  
        //1.åˆ›å»ºè®¡ç®—å™¨å¯¹è±¡  
        Calculator c = new Calculator();  
        //2.è·å–å­—èŠ‚ç æ–‡ä»¶å¯¹è±¡  
        Class cls = c.getClass();  
        //3.è·å–æ‰€æœ‰æ–¹æ³•  
        Method[] methods = cls.getMethods();  
        int num = 0; //è¡¨ç¤ºå‡ºç°å¼‚å¸¸çš„æ¬¡æ•°  
        BufferedWriter bw = new BufferedWriter(new FileWriter("bug.txt"));  
        for(Method method:methods){  
            //4.åˆ¤æ–­æ–¹æ³•ä¸Šæ˜¯å¦æœ‰checkæ³¨è§£  
            if (method.isAnnotationPresent(Check.class)){  
                //5.æœ‰ï¼Œæ‰§è¡Œ  
                try {  
                    method.invoke(c);  
                } catch (Exception e) {  
                    //6.æ•è·å¼‚å¸¸  
                    //è®°å½•åˆ°æ–‡ä»¶ä¸­  
                    num++;  
                    bw.write(method.getName()+"æ–¹æ³•å‡ºç°å¼‚å¸¸äº†");  
                    bw.newLine();  
                    bw.write("å¼‚å¸¸çš„åç§°ï¼š"+e.getCause().getClass().getSimpleName());  
                    bw.newLine();  
                    bw.write("å¼‚å¸¸çš„åŸå› ï¼š"+e.getCause().getMessage());  
                    bw.newLine();  
                    bw.write("------------------------------");  
                    bw.newLine();  
                }  
            }  
        }  
        bw.write("æœ¬æ¬¡æµ‹è¯•ä¸€å…±å‡ºç°" + num + "æ¬¡å¼‚å¸¸");  
        bw.flush();  
        bw.close();  
    }  
}
```

### 3.7 å°ç»“

1. ä»¥åå¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨æ³¨è§£ï¼Œè€Œä¸æ˜¯è‡ªå®šä¹‰æ³¨è§£
2. æ³¨è§£ç»™è°ç”¨ï¼Ÿ
	1. ç¼–è¯‘å™¨
	2. ç»™è§£æç¨‹åºç”¨ï¼Œå¦‚ï¼šCheckTest
3. æ³¨è§£ä¸æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥ç†è§£ä¸ºæ³¨è§£å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾