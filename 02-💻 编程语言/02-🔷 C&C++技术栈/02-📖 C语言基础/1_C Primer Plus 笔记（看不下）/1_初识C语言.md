---
文章标题: "[[1_初识C语言]]" 
文章作者: Dakkk
文章概要: |
  文章概述C语言起源、优缺点、应用领域及标准发展。它阐述了计算机工作原理、高级语言与编译器关系，并详述C语言的编译链接机制及理想编程七步。最后，介绍了主流环境下的编译器使用，为C语言初学者奠定基础。
tags:
- "C语言"
- "编译器"
- "编译链接"
- "编程基础"
- "计算机原理"
- "软件开发"
- "C语言标准"
- "GCC"
相关文章:
- "[[3_库的制作与使用]]"
- "[[1_MinGW编译器的安装和配置]]"
- "[[14_(进阶)程序编译+链接]]"
- "[[_常用函数]]"
- "[[0_课程完整内容]]"
文章分类: "💻 编程语言"
文章路径: "02-💻 编程语言/02-🔷 C&C++技术栈/02-📖 C语言基础/1_C Primer Plus 笔记（看不下）/1_初识C语言.md"
文章难度: 入门 🌱
目前阶段: ✅ 已完成
重要性: ⭐⭐⭐⭐⭐ 精通必备
创建时间: 2024-08-11 18:15:12
修改时间: 2025-05-27 21:58:16
---

## 1 起源和优缺点

### 1.1 起源

- 1972年，贝尔实验室的丹尼斯·里奇（Dennis Ritch）和肯·汤普逊（Ken Thompson）在开发UNIX操作系统时设计了C语言。

- 是在B语言（汤普逊发明）的基础上进行设计

- C语言设计的初衷是将其作为程序员使用的一种编程工具，因此，其主要目标是成为有用的语言

### 1.2 优缺点

**优点：**
- 设计特性：让用户能轻松地完成自顶向下的规划、结构化编程和模块化设计
- 高效性：具有通常是汇编语言才具有的微调控制能力，即**根据具体情况微调程序以获得最大运行速度或最有效地使用内存**
- 可移植性：在一种系统中编写的C程序稍作修改或不修改就能在其他系统运行
	- C语言与UNIX关系密切，UNIX系统通常会将C编译器作为软件包的一部分。安装Linux时，通常也会安装C编译器（将C代码转换成计算机内部指令的程序）
- 强大而灵活：
	- 功能强大且灵活的UNIX操作系统，大部分是用C语言写的
	- 许多语言的编译器和解释器都是用C语言编写的
- 面向程序员：程序员利用C可以访问硬件、操控内存中的位
	- 大多数C实现都有一个大型的库，包含众多有用的C函数（用于处理程序员经常需要解决的问题）

**缺点：**
- C语言**使用指针**，而涉及指针的编程错误往往难以察觉
- C语言紧凑简洁，结合了大量的运算符，代码可能让人及其费解
- ......

## 2 C语言的应用范围

早在20世纪80年代，C语言就已经成为小型计算机（UNIX系统）使用的主流语言，之后，C语言的应用范围扩展到微型机（个人计算机）和大型机（庞然大物）

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/07/78c1cd2473f4eb1460de6e4ff475b4da.png)

20世纪90年代，许多软件公司开始改用C++来开发大型的编程项目。
- **C++在C语言的基础上嫁接了面向对象编程工具**
- C++几乎是C的超集，这意味着任何C程序差不多就是一个C++程序

其他应用：
- 虽然这些年来C++和JAVA非常流行，但是C语言仍是软件业中的核心技能
- C语言已成为**嵌入式系统编程**的流行语言，如汽车、照相机、DVD播放机和其他现代化设备的微处理器
- C语言还从长期被FORTRAN独占的科学编程领域分得一杯羹
- C在Linux开发中扮演着极其重要的角色，即开发操作系统
## 3 计算机能做什么

了解一下计算机的工作原理，有利于理解用C语言编写程序和运行程序时所发生的事情之间有什么联系！

现代的计算机由多种部件构成。
- **中央处理单元（CPU）**承担绝大部分的运算工作  
- **随机存取内存（RAM）**是存储程序和文件的工作区；
- **永久内存存储设备**（过去一般指机械硬盘，现在还包括固态硬盘）即使在关闭计算机后，也不会丢失之前存储的程序和文件。
- **各种外围设备**（如，键盘、鼠标、触摸屏、监视器）提供人与计算机之间的交互

**CPU的工作原理**
- 从内存中获取并执行一条指令
- 再从内存中获取并执行下一条指令
- 诸如此类（1Ghz的CPU一秒钟能重复这样的操作大约十亿次）

**CPU的工作区**
- 小工作区——由若干个寄存器组成，每个寄存器都可以存储一个数字
- 一个寄存器存储下一条指令的内存地址，CPU使用该地址来获取和更新下一条指令
- 获取指令后，CPU在另一个寄存器中存储该指令，并更新第1个寄存器存储下一条指令的地址

**两数相加举例**
- 从内存位置2000上把一个数字拷贝到寄存器1
- 从内存位置2004上把另一个数字拷贝到寄存器2
- 把寄存器2中的内容与寄存器1中的内容相加，把结果存储在寄存器1中
- 把寄存器1中的内容拷贝到内存位置2008

>  你要做的是，必须用数字码来表示以上的每个步骤！（很麻烦）
## 4 高级计算机语言和编译器

**高级编程语言，如C**
- 不必用数字码表示指令
- 使用的指令更贴近你如何想这个问题
- 在更抽象的层面表达你的想法，不用考虑CPU在完成任务时具体需要哪些步骤
- 如：`totla = mine + yours;`

> 此时就产生了纠纷，对我们而言高级编程语言易懂好写，而对机器来说是不懂的
> 所以，我们就需要编译器了，通过编辑器将高级语言翻译为机器看得懂的机器语言（指令集）

编译器的另外一个优势
- 使用合适的编译器或编译器集，便可把一种高级语言程序转换成供各种不同类型CPU使用的机器语言程序

## 5 语言标准

C语言发展之初，并没有所谓的C标准。78年，布莱恩·柯林汉（BrianKernighan）和丹尼斯·里奇（DennisRitchie）合著的The C ProgrammingLanguage（《C语言程序设计》）第1版是公认的C标准，通常称之为K&R C或经典C。

与大多数语言不同的是，C语言比其他语言更依赖库，因此需要一个标准库。实际上，由于缺乏官方标准，**UNIX实现提供的库已成为了标准库**。

### 5.1 第1个 ANSI/ISO C 标准（C89/C90）

美国国家标准协会（ANSI）于1983年组建了一个委员会（X3J11），开发了一套新标准，并于1989年正式公布。该标准（ANSI C）定义了C语言和C标准库。国际标准化组织于1990年采用了这套C标准（ISO C）。

ISO C和ANSI C是完全相同的标准。ANSI/ISO标准的最终版本通常叫作C89（因为ANSI于1989年批准该标准）或C90（因为ISO于1990年批准该标准）。
### 5.2 C99标准

1994年，ANSI/ISO联合委员会（C9X委员会）开始修订C标准，最终发布了C99标准。委员会的用意不是在C语言中添加新特性，而是为了达到新的目标
- 第1个目标是，支持国际化编程。
- 第2个目标是，“调整现有实践致力于解决明显的缺陷”。
- 第3个目标是，为适应科学和工程项目中的关键数值计算，提高C的适应性，让C比FORTRAN更有竞争力。
### 5.3 C11标准

标准委员会在2007年承诺C标准的下一个版本是C1X，2011年终于发布了C11标准。
- 出于对当前编程安全的担忧，不那么强调“信任程序员”目标了。
- 不应要求服务小型机市场的供应商支持其目标环境中用不到的特性

## 6 使用C的7步（理想状态）

**第一步：定义程序的目标**
- 首先自己要明确自己想做什么，思考你的程序需要哪些信息，要进行哪些计算和控制，以及程序应该要报告什么信息
- 不涉及具体的计算机语言，应该用一般术语来描述问题

**第二步：设计程序**
- 思考如何用程序完成目标
	- 用户界面应该是怎样的？
	- 如何组织程序？
	- 目标用户是谁？
	- 准备花多长时间来完成这个程序？
- 决定在程序（还可能是辅助文件）中如何表示数据，以及用什么方法处理数据
- **通常，选择一个合适的方式表示信息可以更容易地设计程序和处理数据**

**第三步：编写代码**
- 把你设计的程序翻译成C语言，这里是真正需要使用C语言的地方。
- 在这一步骤中，应该给自己编写的程序添加文字注释

**第四步：编译**
- **编译的细节取决于编程的环境**
- 编译C代码和C库为一个可执行程序
	- 不同的计算机使用不同的机器语言方案，C编译器负责把C代码翻译成特定的机器语言。
	- C编译器还将源代码与C库的代码合并成最终的程序（更精确地说，应该是由一个被称为链接器的程序来链接库函数，但是在大多数系统中，编译器运行链接器）。
	- 最后，生成一个用户可以运行的可执行文件，其中包含着计算机能理解的代码
- 检查C语言程序是否有效

**第五步：运行程序**
- 在常见环境（包括Windows命令提示符模式、UNIX终端模式和Linux终端模式）中运行程序要输入可执行文件的文件名
- 在Windows和Macintosh提供的集成开发环境（IDE）中，用户可以在IDE中编辑和执行C程序

**第六步：测试和调试程序**
- 查找并修复程序错误的过程叫调试。
- 随着你越来越老练，你所写的程序中的错误也会越来越不易察觉。

**第七步：维护和修改代码**
- 创建完程序后，你发现程序有错，或者想扩展程序的用途，这时就要修改程序。

**说明**
- 编程并非像描述那样是一个线性的过程。有时，要**在不同的步骤之间往复**。
- 磨刀不误砍柴工，应该养成先规划再动手编写代码的好习惯，用纸和笔记录下程序的目标和设计框架。这样在编写代码的过程中会更加得心应手、条理清晰。

## 7 编程机制

生成程序的具体过程因计算机环境而异。C环境一般有以下5种环境
- UNIX
- Linux
- MS-DOS（一些人仍在使用）
- Windows
- Macintosh OS

**源代码文件**
- 用C语言编写程序时，编写的内容被存储在文本文件中，该文件被称为源代码文件（source code file）
- 文件名以.c结尾

### 7.1 ❗目标代码文件、可执行文件和库

C编程的基本策略是，用程序把源代码文件转换为可执行文件（其中包含可直接运行的机器语言代码）。典型的C实现通过编译和链接两个步骤来完成这一过程

**编译器把源代码转换成中间代码，链接器把中间代码和其他代码合并，生成可执行文件。**

**中间文件有多种形式：**
- 最普遍的形式：把源代码转换为机器语言代码，并把结果放在目标代码文件（或简称目标文件）中（这里假设源代码只有一个文件）。
	- 此时目标文件中包含机器语言代码，但是不能直接运行该文件
	- 因为目标文件中存储的是编译器翻译的源代码，这还不是一个完整的程序
	- 目标代码文件`缺失启动代码（startupcode）`。启动代码充当着程序和操作系统之间的接口
	- 目标代码还`缺少库函数`

**链接器的作用是，把你编写的目标代码、系统的标准启动代码和库代码这3部分合并成一个文件，即可执行文件**

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/07/358fe9cabfa326dc1e8a6ec2d7e09d12.png)

有些系统会分别运行编译程序和链接程序

而有些系统，编译器会自动启动链接器，用户给出编译命令即可
### 7.2 UNIX系统

**编辑**
- 使用通用的UNIX编辑器即可

**编译**
- 以前，UNIX C编译器要调用语言定义的cc命令，目前已退出历史舞台
- UNIX系统提供的其他C编译器，还是以 cc 命令作为编译器的别名
```shell
# 编译指令
cc inform.c
```

- 编译后，会输出一个 out 为后缀的文件（可执行文件）
```shell
# 执行该文件
xxx.out
```

- 注意：
	- 如果在存储该可执行文件，需要重命名，否则下次编译时会覆盖当前的可执行文件
	- 编译期间，会生成一个 `inform.o` 的目标代码文件，但是在链接过程完成后，会将其删除，不过原始程序有多个源代码文件，则会保留目标代码文件

### 7.3 GNU编译器集合和LLVM项目

**GNU编译器**

GNU项目始于1987年，是一个开发大量自由UNIX软件的集合（GNU的意思是“GNU’sNot UNIX”，即GNU不是UNIX）

GNU编译器集合（也被称为**GCC**，其中包含GCC C编译器）是该项目的产品之一

GCC有各种版本以适应不同的硬件平台和操作系统，包括UNIX、Linux和Windows。用gcc命令便可调用GCC C编译器。许多使用gcc的系统都用cc作为gcc的别名。

**LLVM项目**

cc的另一个替代品，该项目是与编译器相关的开源软件集合，始于伊利诺伊大学2000年的研究项目。它的Clang编译器处理C代码，可以通过**clang**调用

gcc和clang命令都可以根据不同的版本选择运行时选项来调用不同C标准
```shell
# 调用C99标准
gcc -std=c99 inform.c[3] 

# 接受C11之前的草案标准
gcc -std=c1x inform.c

# 接受C11标准版本
gcc -std=c11 inform.c
```
### 7.4 Linux系统

在Linux中准备C程序与在UNIX系统中几乎一样，不同的是要使用GNU提供的GCC公共域C编译器。编译命令类似于：
```shell
gcc inform.c
```

一般情况下，在安装Linux时，根据需要可以安装GCC，安装过程中会将cc作为gcc的别名
### 7.5 PC的命令行编译器

C编译器不是标准Windows软件包的一部分，因此需要从别处获取并安装C编译器。

**可以下载Cygwin和MinGW，这样便可在PC上通过命令行使用GCC编译器。**

注意：字处理器文件（TXT）和 源代码文件（文本文件）的区别

与UNIX编译器不同，C编译器生成的中间目标代码文件的扩展名是.obj（也可能是其他扩展名），且不会删除这些组件文件

一般执行可执行文件都不需要输入exe后缀，如concrete.exe文件
```shell
C>concrete
```
### 7.6 Windows / Linux

许多供应商（包括微软、Embarcadero、Digital Mars）都提供Windows下的集成开发环境，或称为IDE（目前，大多数IDE都是C和C++结合的编译器）。
- Visual Studio
- Visual Code
- Clion
- Pelles C
- 等等

集成开发环境IDE，可处理C也可处理C++，因此要指定待处理的程序是C还是C++

**IDE可能会遇到的问题**
-   在程序执行完毕后，执行程序的窗口立即消失，可以在return之间添加 `getchar();`
	- 如果涉及用户输入数据的话，enter确认会被getchar读取，所以需要再加一个getchar来暂停程序

许多Linux系统都可以安装在Windows系统，即在Windows系统中运行Linux程序，也可以在Linux系统中运行Windows程序

**不能通过Windows系统访问Linux文件，但是可以通过Linux系统访问Windows文档**
