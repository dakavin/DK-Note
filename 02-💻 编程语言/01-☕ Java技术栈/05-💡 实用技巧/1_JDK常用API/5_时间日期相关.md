---
æ–‡ç« æ ‡é¢˜: "[[5_æ—¶é—´æ—¥æœŸç›¸å…³]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« å¯¹æ¯”äº†Javaæ—§ç‰ˆæ—¥æœŸæ—¶é—´APIä¸JDK 8 `java.time`æ–°APIã€‚é˜è¿°æ—§APIç¼ºé™·åï¼Œè¯¦ç»†ä»‹ç»äº†`LocalDate`ã€`LocalTime`ã€`LocalDateTime`ã€`Instant`ã€`DateTimeFormatter`ç­‰æ ¸å¿ƒæ–°ç±»ï¼Œæ¶µç›–äº†æ—¥æœŸæ—¶é—´åˆ›å»ºã€ä¿®æ”¹ã€æ ¼å¼åŒ–ã€è®¡ç®—é—´éš”åŠå¤„ç†æ—¶åŒºç­‰ç°ä»£ç”¨æ³•ã€‚
æ–‡ç« æ ‡ç­¾:
- "Javaæ—¥æœŸæ—¶é—´"
- "JDK8"
- "java.time"
- "LocalDate"
- "LocalDateTime"
- "Instant"
- "DateTimeFormatter"
- "æ—¶é—´é—´éš”"
ç›¸å…³æ–‡ç« : æš‚æ—  ğŸ¤·
æ–‡ç« åˆ†ç±»: "ğŸ’» ç¼–ç¨‹è¯­è¨€"
æ–‡ç« è·¯å¾„: "02-ğŸ’» ç¼–ç¨‹è¯­è¨€/01-â˜• JavaæŠ€æœ¯æ ˆ/05-ğŸ’¡ å®ç”¨æŠ€å·§/1_JDKå¸¸ç”¨API/5_æ—¶é—´æ—¥æœŸç›¸å…³.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ğŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-26 07:22:08
---

## 1 JDK8ä¹‹å‰

### 1.1 java.lang.Systemç±»çš„æ–¹æ³•

- Systemç±»æä¾›çš„public static long currentTimeMillis()ï¼šç”¨æ¥è¿”å›å½“å‰æ—¶é—´ä¸1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®ã€‚
  
  - æ­¤æ–¹æ³•é€‚äºè®¡ç®—æ—¶é—´å·®ã€‚
  
- è®¡ç®—ä¸–ç•Œæ—¶é—´çš„ä¸»è¦æ ‡å‡†æœ‰ï¼š
  - UTC(Coordinated Universal Time)
  - GMT(Greenwich Mean Time)
  - CST(Central Standard Time)
  
  > åœ¨å›½é™…æ— çº¿ç”µé€šä¿¡åœºåˆï¼Œä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„æ—¶é—´ï¼Œç§°ä¸ºé€šç”¨åè°ƒæ—¶(UTC, Universal Time Coordinated)ã€‚UTCä¸æ ¼æ—å°¼æ²»å¹³å‡æ—¶(GMT, Greenwich Mean Time)ä¸€æ ·ï¼Œéƒ½ä¸è‹±å›½ä¼¦æ•¦çš„æœ¬åœ°æ—¶ç›¸åŒã€‚è¿™é‡Œï¼ŒUTCä¸GMTå«ä¹‰å®Œå…¨ç›¸åŒã€‚ 

### 1.2 java.util.Date

è¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ã€‚

- æ„é€ å™¨ï¼š
  - Date()ï¼šä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡å¯ä»¥è·å–æœ¬åœ°å½“å‰æ—¶é—´ã€‚
  - Date(long æ¯«ç§’æ•°)ï¼šæŠŠè¯¥æ¯«ç§’å€¼æ¢ç®—æˆæ—¥æœŸæ—¶é—´å¯¹è±¡
- å¸¸ç”¨æ–¹æ³•
  - getTime(): è¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 GMT ä»¥æ¥æ­¤ Date å¯¹è±¡è¡¨ç¤ºçš„æ¯«ç§’æ•°ã€‚
  - toString(): æŠŠæ­¤ Date å¯¹è±¡è½¬æ¢ä¸ºä»¥ä¸‹å½¢å¼çš„ Stringï¼š dow mon dd hh:mm:ss zzz yyyy å…¶ä¸­ï¼š dow æ˜¯ä¸€å‘¨ä¸­çš„æŸä¸€å¤© (Sun, Mon, Tue, Wed, Thu, Fri, Sat)ï¼Œzzzæ˜¯æ—¶é—´æ ‡å‡†ã€‚
  - å…¶å®ƒå¾ˆå¤šæ–¹æ³•éƒ½è¿‡æ—¶äº†ã€‚
- ä¸¾ä¾‹ï¼š

```java
@Test
public void test1(){
    Date d = new Date();
    System.out.println(d);
}

@Test
public void test2(){
    long time = System.currentTimeMillis();
    System.out.println(time);//1559806982971
    //å½“å‰ç³»ç»Ÿæ—¶é—´è·ç¦»1970-1-1 0:0:0 0æ¯«ç§’çš„æ—¶é—´å·®ï¼Œæ¯«ç§’ä¸ºå•ä½
}

@Test
public void test3(){
    Date d = new Date();
    long time = d.getTime();
    System.out.println(time);//1559807047979
}

@Test
public void test4(){
    long time = 1559807047979L;
    Date d = new Date(time);
    System.out.println(d);
}

@Test
public void test5(){
    long time = Long.MAX_VALUE;
    Date d = new Date(time);
    System.out.println(d);
}
```

### 1.3 java.text.SimpleDateFormat

- java.text.SimpleDateFormatç±»æ˜¯ä¸€ä¸ªä¸ä¸è¯­è¨€ç¯å¢ƒæœ‰å…³çš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚
- å¯ä»¥è¿›è¡Œæ ¼å¼åŒ–ï¼šæ—¥æœŸ --> æ–‡æœ¬
- å¯ä»¥è¿›è¡Œè§£æï¼šæ–‡æœ¬ --> æ—¥æœŸ
- **æ„é€ å™¨ï¼š**
  - SimpleDateFormat() ï¼šé»˜è®¤çš„æ¨¡å¼å’Œè¯­è¨€ç¯å¢ƒåˆ›å»ºå¯¹è±¡
  - public SimpleDateFormat(String pattern)ï¼šè¯¥æ„é€ æ–¹æ³•å¯ä»¥ç”¨å‚æ•°patternæŒ‡å®šçš„æ ¼å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡
- **æ ¼å¼åŒ–ï¼š**
  - public String format(Date date)ï¼šæ–¹æ³•æ ¼å¼åŒ–æ—¶é—´å¯¹è±¡date
- **è§£æï¼š**
  - public Date parse(String source)ï¼šä»ç»™å®šå­—ç¬¦ä¸²çš„å¼€å§‹è§£ææ–‡æœ¬ï¼Œä»¥ç”Ÿæˆä¸€ä¸ªæ—¥æœŸã€‚

![](assets/image-20230922020148709.png)


```java
//æ ¼å¼åŒ–
@Test
public void test1(){
    Date d = new Date();

    SimpleDateFormat sf = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ SSSæ¯«ç§’  E Z");
    //æŠŠDateæ—¥æœŸè½¬æˆå­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æ ¼å¼è½¬
    String str = sf.format(d);
    System.out.println(str);
}
//è§£æ
@Test
public void test2() throws ParseException{
    String str = "2022å¹´06æœˆ06æ—¥ 16æ—¶03åˆ†14ç§’ 545æ¯«ç§’  æ˜ŸæœŸå›› +0800";
    SimpleDateFormat sf = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ SSSæ¯«ç§’  E Z");
    Date d = sf.parse(str);
    System.out.println(d);
}
```

### 1.4 java.util.Calendar(æ—¥å†)

- Dateç±»çš„APIå¤§éƒ¨åˆ†è¢«åºŸå¼ƒäº†ï¼Œæ›¿æ¢ä¸ºCalendarã€‚

- `Calendar` ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸»ç”¨ç”¨äºå®Œæˆæ—¥æœŸå­—æ®µä¹‹é—´ç›¸äº’æ“ä½œçš„åŠŸèƒ½ã€‚

- è·å–Calendarå®ä¾‹çš„æ–¹æ³•

  - ä½¿ç”¨`Calendar.getInstance()`æ–¹æ³•

    ![](assets/image-20230922020203799.png)
  - è°ƒç”¨å®ƒçš„å­ç±»GregorianCalendarï¼ˆå…¬å†ï¼‰çš„æ„é€ å™¨ã€‚

    ![](assets/image-20230922020212035.png)

- ä¸€ä¸ªCalendarçš„å®ä¾‹æ˜¯ç³»ç»Ÿæ—¶é—´çš„æŠ½è±¡è¡¨ç¤ºï¼Œå¯ä»¥ä¿®æ”¹æˆ–è·å– YEARã€MONTHã€DAY_OF_WEEKã€HOUR_OF_DAY ã€MINUTEã€SECONDç­‰ `æ—¥å†å­—æ®µ`å¯¹åº”çš„æ—¶é—´å€¼ã€‚
  - public int get(int field)ï¼šè¿”å›ç»™å®šæ—¥å†å­—æ®µçš„å€¼
  - public void set(int field,int value) ï¼šå°†ç»™å®šçš„æ—¥å†å­—æ®µè®¾ç½®ä¸ºæŒ‡å®šçš„å€¼
  - public void add(int field,int amount)ï¼šæ ¹æ®æ—¥å†çš„è§„åˆ™ï¼Œä¸ºç»™å®šçš„æ—¥å†å­—æ®µæ·»åŠ æˆ–è€…å‡å»æŒ‡å®šçš„æ—¶é—´é‡
  - public final Date getTime()ï¼šå°†Calendarè½¬æˆDateå¯¹è±¡
  - public final void setTime(Date date)ï¼šä½¿ç”¨æŒ‡å®šçš„Dateå¯¹è±¡é‡ç½®Calendarçš„æ—¶é—´
  
- å¸¸ç”¨å­—æ®µ
	![](assets/image-20230922020222575.png)

- æ³¨æ„ï¼š
  - è·å–æœˆä»½æ—¶ï¼šä¸€æœˆæ˜¯0ï¼ŒäºŒæœˆæ˜¯1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ12æœˆæ˜¯11
  - è·å–æ˜ŸæœŸæ—¶ï¼šå‘¨æ—¥æ˜¯1ï¼Œå‘¨äºŒæ˜¯2 ï¼Œ ã€‚ã€‚ã€‚ã€‚å‘¨å…­æ˜¯7

- ç¤ºä¾‹ä»£ç ï¼š
```java
import org.junit.Test;

import java.util.Calendar;
import java.util.TimeZone;

public class TestCalendar {
    @Test
    public void test1(){
        Calendar c = Calendar.getInstance();
        System.out.println(c);

        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH)+1;
        int day = c.get(Calendar.DATE);
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        System.out.println(year + "-" + month + "-" + day + " " + hour + ":" + minute);
    }

    @Test
    public void test2(){
        TimeZone t = TimeZone.getTimeZone("America/Los_Angeles");
        Calendar c = Calendar.getInstance(t);
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH)+1;
        int day = c.get(Calendar.DATE);
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        System.out.println(year + "-" + month + "-" + day + " " + hour + ":" + minute);
    }
    
    @Test
    public void test3(){
        Calendar calendar = Calendar.getInstance();
		// ä»ä¸€ä¸ª Calendar å¯¹è±¡ä¸­è·å– Date å¯¹è±¡
		Date date = calendar.getTime();
        
		// ä½¿ç”¨ç»™å®šçš„ Date è®¾ç½®æ­¤ Calendar çš„æ—¶é—´
		date = new Date(234234235235L);
		calendar.setTime(date);
		calendar.set(Calendar.DAY_OF_MONTH, 8);
		System.out.println("å½“å‰æ—¶é—´æ—¥è®¾ç½®ä¸º8å,æ—¶é—´æ˜¯:" + calendar.getTime());
        
		calendar.add(Calendar.HOUR, 2);
		System.out.println("å½“å‰æ—¶é—´åŠ 2å°æ—¶å,æ—¶é—´æ˜¯:" + calendar.getTime());
        
		calendar.add(Calendar.MONTH, -2);
		System.out.println("å½“å‰æ—¥æœŸå‡2ä¸ªæœˆå,æ—¶é—´æ˜¯:" + calendar.getTime());  
    }
}
```

## 2 JDK8åŠä¹‹å

å¦‚æœæˆ‘ä»¬å¯ä»¥è·Ÿåˆ«äººè¯´ï¼šâ€œæˆ‘ä»¬åœ¨1502643933071è§é¢ï¼Œåˆ«æ™šäº†ï¼â€é‚£ä¹ˆå°±å†ç®€å•ä¸è¿‡äº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æ—¶é—´ä¸æ˜¼å¤œå’Œå››å­£æœ‰å…³ï¼Œäºæ˜¯äº‹æƒ…å°±å˜å¤æ‚äº†ã€‚JDK 1.0ä¸­åŒ…å«äº†ä¸€ä¸ªjava.util.Dateç±»ï¼Œä½†æ˜¯å®ƒçš„å¤§å¤šæ•°æ–¹æ³•å·²ç»åœ¨JDK 1.1å¼•å…¥Calendarç±»ä¹‹åè¢«å¼ƒç”¨äº†ã€‚è€ŒCalendarå¹¶ä¸æ¯”Dateå¥½å¤šå°‘ã€‚å®ƒä»¬é¢ä¸´çš„é—®é¢˜æ˜¯ï¼š

- å¯å˜æ€§ï¼šåƒæ—¥æœŸå’Œæ—¶é—´è¿™æ ·çš„ç±»åº”è¯¥æ˜¯ä¸å¯å˜çš„ã€‚

- åç§»æ€§ï¼šDateä¸­çš„å¹´ä»½æ˜¯ä»1900å¼€å§‹çš„ï¼Œè€Œæœˆä»½éƒ½ä»0å¼€å§‹ã€‚

- æ ¼å¼åŒ–ï¼šæ ¼å¼åŒ–åªå¯¹Dateæœ‰ç”¨ï¼ŒCalendaråˆ™ä¸è¡Œã€‚

- æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›ä¸èƒ½å¤„ç†é—°ç§’ç­‰ã€‚

  > é—°ç§’ï¼Œæ˜¯æŒ‡ä¸ºä¿æŒåè°ƒä¸–ç•Œæ—¶æ¥è¿‘äºä¸–ç•Œæ—¶æ—¶åˆ»ï¼Œç”±å›½é™…è®¡é‡å±€ç»Ÿä¸€è§„å®šåœ¨å¹´åº•æˆ–å¹´ä¸­ï¼ˆä¹Ÿå¯èƒ½åœ¨å­£æœ«ï¼‰å¯¹åè°ƒä¸–ç•Œæ—¶å¢åŠ æˆ–å‡å°‘1ç§’çš„è°ƒæ•´ã€‚ç”±äºåœ°çƒè‡ªè½¬çš„ä¸å‡åŒ€æ€§å’Œé•¿æœŸå˜æ…¢æ€§ï¼ˆä¸»è¦ç”±æ½®æ±æ‘©æ“¦å¼•èµ·çš„ï¼‰ï¼Œä¼šä½¿ä¸–ç•Œæ—¶ï¼ˆæ°‘ç”¨æ—¶ï¼‰å’ŒåŸå­æ—¶ä¹‹é—´ç›¸å·®è¶…è¿‡åˆ°Â±0.9ç§’æ—¶ï¼Œå°±æŠŠåè°ƒä¸–ç•Œæ—¶å‘å‰æ‹¨1ç§’ï¼ˆè´Ÿé—°ç§’ï¼Œæœ€åä¸€åˆ†é’Ÿä¸º59ç§’ï¼‰æˆ–å‘åæ‹¨1ç§’ï¼ˆæ­£é—°ç§’ï¼Œæœ€åä¸€åˆ†é’Ÿä¸º61ç§’ï¼‰ï¼› é—°ç§’ä¸€èˆ¬åŠ åœ¨å…¬å†å¹´æœ«æˆ–å…¬å†å…­æœˆæœ«ã€‚
  >
  > ç›®å‰ï¼Œå…¨çƒå·²ç»è¿›è¡Œäº†27æ¬¡é—°ç§’ï¼Œå‡ä¸ºæ­£é—°ç§’ã€‚

æ€»ç»“ï¼š`å¯¹æ—¥æœŸå’Œæ—¶é—´çš„æ“ä½œä¸€ç›´æ˜¯Javaç¨‹åºå‘˜æœ€ç—›è‹¦çš„åœ°æ–¹ä¹‹ä¸€`ã€‚

ç¬¬ä¸‰æ¬¡å¼•å…¥çš„APIæ˜¯æˆåŠŸçš„ï¼Œå¹¶ä¸”Java 8ä¸­å¼•å…¥çš„java.time API å·²ç»çº æ­£äº†è¿‡å»çš„ç¼ºé™·ï¼Œå°†æ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…å®ƒéƒ½ä¼šä¸ºæˆ‘ä»¬æœåŠ¡ã€‚

Java 8 ä»¥ä¸€ä¸ªæ–°çš„å¼€å§‹ä¸º Java åˆ›å»ºä¼˜ç§€çš„ APIã€‚æ–°çš„æ—¥æœŸæ—¶é—´APIåŒ…å«ï¼š

* `java.time` â€“ åŒ…å«å€¼å¯¹è±¡çš„åŸºç¡€åŒ…
* `java.time.chrono` â€“ æä¾›å¯¹ä¸åŒçš„æ—¥å†ç³»ç»Ÿçš„è®¿é—®ã€‚
* `java.time.format` â€“ æ ¼å¼åŒ–å’Œè§£ææ—¶é—´å’Œæ—¥æœŸ
* `java.time.temporal` â€“ åŒ…æ‹¬åº•å±‚æ¡†æ¶å’Œæ‰©å±•ç‰¹æ€§
* `java.time.zone` â€“ åŒ…å«æ—¶åŒºæ”¯æŒçš„ç±»

è¯´æ˜ï¼šæ–°çš„ java.time ä¸­åŒ…å«äº†æ‰€æœ‰å…³äºæ—¶é’Ÿï¼ˆClockï¼‰ï¼Œæœ¬åœ°æ—¥æœŸï¼ˆLocalDateï¼‰ã€æœ¬åœ°æ—¶é—´ï¼ˆLocalTimeï¼‰ã€æœ¬åœ°æ—¥æœŸæ—¶é—´ï¼ˆLocalDateTimeï¼‰ã€æ—¶åŒºï¼ˆZonedDateTimeï¼‰å’ŒæŒç»­æ—¶é—´ï¼ˆDurationï¼‰çš„ç±»ã€‚

å°½ç®¡æœ‰68ä¸ªæ–°çš„å…¬å¼€ç±»å‹ï¼Œä½†æ˜¯å¤§å¤šæ•°å¼€å‘è€…åªä¼šç”¨åˆ°åŸºç¡€åŒ…å’ŒformatåŒ…ï¼Œå¤§æ¦‚å æ€»æ•°çš„ä¸‰åˆ†ä¹‹ä¸€ã€‚

### 2.1 æœ¬åœ°æ—¥æœŸæ—¶é—´ï¼šLocalDateã€LocalTimeã€LocalDateTime

| æ–¹æ³•                                                         | **æè¿°**                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| `now() `/ now(ZoneId zone)                                   | é™æ€æ–¹æ³•ï¼Œæ ¹æ®å½“å‰æ—¶é—´åˆ›å»ºå¯¹è±¡/æŒ‡å®šæ—¶åŒºçš„å¯¹è±¡                |
| `of(xx,xx,xx,xx,xx,xxx)`                                     | é™æ€æ–¹æ³•ï¼Œæ ¹æ®æŒ‡å®šæ—¥æœŸ/æ—¶é—´åˆ›å»ºå¯¹è±¡                          |
| getDayOfMonth()/getDayOfYear()                               | è·å¾—æœˆä»½å¤©æ•°(1-31) /è·å¾—å¹´ä»½å¤©æ•°(1-366)                      |
| getDayOfWeek()                                               | è·å¾—æ˜ŸæœŸå‡ (è¿”å›ä¸€ä¸ª DayOfWeek æšä¸¾å€¼)                        |
| getMonth()                                                   | è·å¾—æœˆä»½, è¿”å›ä¸€ä¸ª Month æšä¸¾å€¼                              |
| getMonthValue() / getYear()                                  | è·å¾—æœˆä»½(1-12) /è·å¾—å¹´ä»½                                     |
| getHours()/getMinute()/getSecond()                           | è·å¾—å½“å‰å¯¹è±¡å¯¹åº”çš„å°æ—¶ã€åˆ†é’Ÿã€ç§’                             |
| withDayOfMonth()/withDayOfYear()/withMonth()/withYear()      | å°†æœˆä»½å¤©æ•°ã€å¹´ä»½å¤©æ•°ã€æœˆä»½ã€å¹´ä»½ä¿®æ”¹ä¸ºæŒ‡å®šçš„å€¼å¹¶è¿”å›æ–°çš„å¯¹è±¡ |
| with(TemporalAdjuster  t)                                    | å°†å½“å‰æ—¥æœŸæ—¶é—´è®¾ç½®ä¸ºæ ¡å¯¹å™¨æŒ‡å®šçš„æ—¥æœŸæ—¶é—´                     |
| plusDays(), plusWeeks(), plusMonths(), plusYears(),plusHours() | å‘å½“å‰å¯¹è±¡æ·»åŠ å‡ å¤©ã€å‡ å‘¨ã€å‡ ä¸ªæœˆã€å‡ å¹´ã€å‡ å°æ—¶               |
| minusMonths() / minusWeeks()/minusDays()/minusYears()/minusHours() | ä»å½“å‰å¯¹è±¡å‡å»å‡ æœˆã€å‡ å‘¨ã€å‡ å¤©ã€å‡ å¹´ã€å‡ å°æ—¶                 |
| plus(TemporalAmount t)/minus(TemporalAmount t)               | æ·»åŠ æˆ–å‡å°‘ä¸€ä¸ª Duration æˆ– Period                            |
| isBefore()/isAfter()                                         | æ¯”è¾ƒä¸¤ä¸ª LocalDate                                           |
| isLeapYear()                                                 | åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´ï¼ˆåœ¨LocalDateç±»ä¸­å£°æ˜ï¼‰                        |
| format(DateTimeFormatter  t)                                 | æ ¼å¼åŒ–æœ¬åœ°æ—¥æœŸã€æ—¶é—´ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²                         |
| parse(Charsequence text)                                     | å°†æŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²è§£æä¸ºæ—¥æœŸã€æ—¶é—´                           |

```java
import org.junit.Test;

import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.LocalTime;

public class TestLocalDateTime {
    @Test
    public void test01(){
        LocalDate now = LocalDate.now();
        System.out.println(now);
    }
    @Test
    public void test02(){
        LocalTime now = LocalTime.now();
        System.out.println(now);
    }
    @Test
    public void test03(){
        LocalDateTime now = LocalDateTime.now();
        System.out.println(now);
    }
    @Test
    public void test04(){
        LocalDate lai = LocalDate.of(2019, 5, 13);
        System.out.println(lai);
    }
	@Test
    public void test05(){
        LocalDate lai = LocalDate.of(2019, 5, 13);
        System.out.println(lai.getDayOfYear());
    }
	@Test
    public void test06(){
        LocalDate lai = LocalDate.of(2019, 5, 13);
        LocalDate go = lai.plusDays(160);
        System.out.println(go);//2019-10-20
    }
    @Test
    public void test7(){
        LocalDate now = LocalDate.now();
        LocalDate before = now.minusDays(100);
        System.out.println(before);//2019-02-26
    }   
}
```

### 2.2 ç¬æ—¶ï¼šInstant

-  Instantï¼šæ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç¬æ—¶ç‚¹ã€‚ è¿™å¯èƒ½è¢«ç”¨æ¥è®°å½•åº”ç”¨ç¨‹åºä¸­çš„äº‹ä»¶æ—¶é—´æˆ³ã€‚
   -  æ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´1970å¹´01æœˆ01æ—¥00æ—¶00åˆ†00ç§’(åŒ—äº¬æ—¶é—´1970å¹´01æœˆ01æ—¥08æ—¶00åˆ†00ç§’)èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚
- `java.time.Instant`è¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„ä¸€ç‚¹ï¼Œè€Œä¸éœ€è¦ä»»ä½•ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæ—¶åŒºã€‚æ¦‚å¿µä¸Šè®²ï¼Œ`å®ƒåªæ˜¯ç®€å•çš„è¡¨ç¤ºè‡ª1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ï¼ˆUTCï¼‰å¼€å§‹çš„ç§’æ•°ã€‚`

| **æ–¹æ³•**                        | **æè¿°**                                                     |
| ------------------------------- | ------------------------------------------------------------ |
| `now()`                         | é™æ€æ–¹æ³•ï¼Œè¿”å›é»˜è®¤UTCæ—¶åŒºçš„Instantç±»çš„å¯¹è±¡                   |
| `ofEpochMilli(long epochMilli)` | é™æ€æ–¹æ³•ï¼Œè¿”å›åœ¨1970-01-01 00:00:00åŸºç¡€ä¸ŠåŠ ä¸ŠæŒ‡å®šæ¯«ç§’æ•°ä¹‹åçš„Instantç±»çš„å¯¹è±¡ |
| atOffset(ZoneOffset offset)     | ç»“åˆå³æ—¶çš„åç§»æ¥åˆ›å»ºä¸€ä¸ª OffsetDateTime                      |
| `toEpochMilli()`                | è¿”å›1970-01-01 00:00:00åˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°ï¼Œå³ä¸ºæ—¶é—´æˆ³        |

> ä¸­å›½å¤§é™†ã€ä¸­å›½é¦™æ¸¯ã€ä¸­å›½æ¾³é—¨ã€ä¸­å›½å°æ¹¾ã€è’™å¤å›½ã€æ–°åŠ å¡ã€é©¬æ¥è¥¿äºšã€è²å¾‹å®¾ã€è¥¿æ¾³å¤§åˆ©äºšå·çš„æ—¶é—´ä¸UTCçš„æ—¶å·®å‡ä¸º+8ï¼Œä¹Ÿå°±æ˜¯UTC+8ã€‚
>
> instant.atOffset(ZoneOffset.ofHours(8));

![](assets/image-20230922020254910.png)


> æ•´ä¸ªåœ°çƒåˆ†ä¸ºäºŒåå››æ—¶åŒºï¼Œæ¯ä¸ªæ—¶åŒºéƒ½æœ‰è‡ªå·±çš„æœ¬åœ°æ—¶é—´ã€‚åŒ—äº¬æ—¶åŒºæ˜¯ä¸œå…«åŒºï¼Œé¢†å…ˆUTCå…«ä¸ªå°æ—¶ï¼Œåœ¨ç”µå­é‚®ä»¶ä¿¡å¤´çš„DateåŸŸè®°ä¸º+0800ã€‚å¦‚æœåœ¨ç”µå­é‚®ä»¶çš„ä¿¡å¤´ä¸­æœ‰è¿™ä¹ˆä¸€è¡Œï¼š 
>
>  Date: Fri, 08 Nov 2002 09:42:22 +0800 
>
>  è¯´æ˜ä¿¡ä»¶çš„å‘é€åœ°çš„åœ°æ–¹æ—¶é—´æ˜¯äºŒâ—‹â—‹äºŒå¹´åä¸€æœˆå…«å·ï¼Œæ˜ŸæœŸäº”ï¼Œæ—©ä¸Šä¹ç‚¹å››åäºŒåˆ†ï¼ˆäºŒåäºŒç§’ï¼‰ï¼Œè¿™ä¸ªåœ°æ–¹çš„æœ¬åœ°æ—¶é¢†å…ˆUTCå…«ä¸ªå°æ—¶(+0800ï¼Œ å°±æ˜¯ä¸œå…«åŒºæ—¶é—´)ã€‚ç”µå­é‚®ä»¶ä¿¡å¤´çš„DateåŸŸä½¿ç”¨äºŒåå››å°æ—¶çš„æ—¶é’Ÿï¼Œè€Œä¸ä½¿ç”¨AMå’ŒPMæ¥æ ‡è®°ä¸Šä¸‹åˆã€‚ 
>

### 2.3 æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ï¼šDateTimeFormatter

è¯¥ç±»æä¾›äº†ä¸‰ç§æ ¼å¼åŒ–æ–¹æ³•ï¼š

- (äº†è§£)é¢„å®šä¹‰çš„æ ‡å‡†æ ¼å¼ã€‚å¦‚ï¼šISO_LOCAL_DATE_TIMEã€ISO_LOCAL_DATEã€ISO_LOCAL_TIME


- (äº†è§£)æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDate(FormatStyle.LONG)

  ```java
  // æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDateTime()
  // FormatStyle.MEDIUM / FormatStyle.SHORT :é€‚ç”¨äºLocalDateTime
  				
  // æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDate()
  // FormatStyle.FULL / FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT : é€‚ç”¨äºLocalDate
  ```

- è‡ªå®šä¹‰çš„æ ¼å¼ã€‚å¦‚ï¼šofPattern(â€œyyyy-MM-dd hh:mm:ssâ€)


| **æ–¹**   **æ³•**                    | **æ**   **è¿°**                                     |
| ---------------------------------- | --------------------------------------------------- |
| **ofPattern(String**  **pattern)** | é™æ€æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šå­—ç¬¦ä¸²æ ¼å¼çš„DateTimeFormatter |
| **format(TemporalAccessor** **t)** | æ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸã€æ—¶é—´ï¼Œè¿”å›å­—ç¬¦ä¸²                    |
| **parse(CharSequence**  **text)**  | å°†æŒ‡å®šæ ¼å¼çš„å­—ç¬¦åºåˆ—è§£æä¸ºä¸€ä¸ªæ—¥æœŸã€æ—¶é—´            |

ä¸¾ä¾‹ï¼š

```java
import org.junit.Test;

import java.time.LocalDateTime;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.time.format.FormatStyle;

public class TestDatetimeFormatter {
    @Test
    public void test1(){
        // æ–¹å¼ä¸€ï¼šé¢„å®šä¹‰çš„æ ‡å‡†æ ¼å¼ã€‚å¦‚ï¼šISO_LOCAL_DATE_TIME;ISO_LOCAL_DATE;ISO_LOCAL_TIME
        DateTimeFormatter formatter = DateTimeFormatter.ISO_LOCAL_DATE_TIME;
        // æ ¼å¼åŒ–:æ—¥æœŸ-->å­—ç¬¦ä¸²
        LocalDateTime localDateTime = LocalDateTime.now();
        String str1 = formatter.format(localDateTime);
        System.out.println(localDateTime);
        System.out.println(str1);//2022-12-04T21:02:14.808

        // è§£æï¼šå­—ç¬¦ä¸² -->æ—¥æœŸ
        TemporalAccessor parse = formatter.parse("2022-12-04T21:02:14.808");
        LocalDateTime dateTime = LocalDateTime.from(parse);
        System.out.println(dateTime);
    }

    @Test
    public void test2(){
        LocalDateTime localDateTime = LocalDateTime.now();
        // æ–¹å¼äºŒï¼š
        // æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDateTime()
        // FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT :é€‚ç”¨äºLocalDateTime
        DateTimeFormatter formatter1 = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.LONG);
        
        // æ ¼å¼åŒ–
        String str2 = formatter1.format(localDateTime);
        System.out.println(str2);// 2022å¹´12æœˆ4æ—¥ ä¸‹åˆ09æ—¶03åˆ†55ç§’

        // æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDate()
        // FormatStyle.FULL / FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT : é€‚ç”¨äºLocalDate
        DateTimeFormatter formatter2 = DateTimeFormatter.ofLocalizedDate(FormatStyle.FULL);
        // æ ¼å¼åŒ–
        String str3 = formatter2.format(LocalDate.now());
        System.out.println(str3);// 2022å¹´12æœˆ4æ—¥ æ˜ŸæœŸæ—¥
    }

    @Test
    public void test3(){
        //æ–¹å¼ä¸‰ï¼šè‡ªå®šä¹‰çš„æ–¹å¼ï¼ˆå…³æ³¨ã€é‡ç‚¹ï¼‰
        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern("yyyy/MM/dd HH:mm:ss");
        //æ ¼å¼åŒ–
        String strDateTime = dateTimeFormatter.format(LocalDateTime.now());
        System.out.println(strDateTime); //2022/12/04 21:05:42
        //è§£æ
        TemporalAccessor accessor = dateTimeFormatter.parse("2022/12/04 21:05:42");
        LocalDateTime localDateTime = LocalDateTime.from(accessor);
        System.out.println(localDateTime); //2022-12-04T21:05:42
    }
}
```

### 2.4 å…¶å®ƒAPI

**1ã€æŒ‡å®šæ—¶åŒºæ—¥æœŸæ—¶é—´ï¼šZondIdå’ŒZonedDateTime**

- ZoneIdï¼šè¯¥ç±»ä¸­åŒ…å«äº†æ‰€æœ‰çš„æ—¶åŒºä¿¡æ¯ï¼Œä¸€ä¸ªæ—¶åŒºçš„IDï¼Œå¦‚ Europe/Paris

- ZonedDateTimeï¼šä¸€ä¸ªåœ¨ISO-8601æ—¥å†ç³»ç»Ÿæ—¶åŒºçš„æ—¥æœŸæ—¶é—´ï¼Œå¦‚ 2007-12-03T10:15:30+01:00 Europe/Parisã€‚
  - å…¶ä¸­æ¯ä¸ªæ—¶åŒºéƒ½å¯¹åº”ç€IDï¼Œåœ°åŒºIDéƒ½ä¸ºâ€œ{åŒºåŸŸ}/{åŸå¸‚}â€çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼šAsia/Shanghaiç­‰

- å¸¸è§æ—¶åŒºIDï¼š


```java
Asia/Shanghai
UTC
America/New_York
```

- å¯ä»¥é€šè¿‡ZondIdè·å–æ‰€æœ‰å¯ç”¨çš„æ—¶åŒºIDï¼š


```java
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.util.Set;

public class TestZone {
    @Test
    public void test01() {
        //éœ€è¦çŸ¥é“ä¸€äº›æ—¶åŒºçš„id
        //Set<String>æ˜¯ä¸€ä¸ªé›†åˆï¼Œå®¹å™¨
        Set<String> availableZoneIds = ZoneId.getAvailableZoneIds();
        //å¿«æ·æ¨¡æ¿iter
        for (String availableZoneId : availableZoneIds) {
            System.out.println(availableZoneId);
        }
    }

    @Test
    public void test02(){
        ZonedDateTime t1 = ZonedDateTime.now();
        System.out.println(t1);

        ZonedDateTime t2 = ZonedDateTime.now(ZoneId.of("America/New_York"));
        System.out.println(t2);
    }
}

```

**2ã€æŒç»­æ—¥æœŸ/æ—¶é—´ï¼šPeriodå’ŒDuration**

- æŒç»­æ—¶é—´ï¼šDurationï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš”
- æ—¥æœŸé—´éš”ï¼šPeriodï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš”

```java
import org.junit.Test;

import java.time.Duration;
import java.time.LocalDate;
import java.time.LocalDateTime;
import java.time.Period;

public class TestPeriodDuration {
    @Test
    public void test01(){
        LocalDate t1 = LocalDate.now();
        LocalDate t2 = LocalDate.of(2018, 12, 31);
        Period between = Period.between(t1, t2);
        System.out.println(between);

        System.out.println("ç›¸å·®çš„å¹´æ•°ï¼š"+between.getYears());
        System.out.println("ç›¸å·®çš„æœˆæ•°ï¼š"+between.getMonths());
        System.out.println("ç›¸å·®çš„å¤©æ•°ï¼š"+between.getDays());
        System.out.println("ç›¸å·®çš„æ€»æ•°ï¼š"+between.toTotalMonths());
    }

    @Test
    public void test02(){
        LocalDateTime t1 = LocalDateTime.now();
        LocalDateTime t2 = LocalDateTime.of(2017, 8, 29, 0, 0, 0, 0);
        Duration between = Duration.between(t1, t2);
        System.out.println(between);

        System.out.println("ç›¸å·®çš„æ€»å¤©æ•°ï¼š"+between.toDays());
        System.out.println("ç›¸å·®çš„æ€»å°æ—¶æ•°ï¼š"+between.toHours());
        System.out.println("ç›¸å·®çš„æ€»åˆ†é’Ÿæ•°ï¼š"+between.toMinutes());
        System.out.println("ç›¸å·®çš„æ€»ç§’æ•°ï¼š"+between.getSeconds());
        System.out.println("ç›¸å·®çš„æ€»æ¯«ç§’æ•°ï¼š"+between.toMillis());
        System.out.println("ç›¸å·®çš„æ€»çº³ç§’æ•°ï¼š"+between.toNanos());
        System.out.println("ä¸å¤Ÿä¸€ç§’çš„çº³ç§’æ•°ï¼š"+between.getNano());
    }
    @Test
    public void test03(){
        //Duration:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš”ï¼Œä»¥ç§’å’Œçº³ç§’ä¸ºåŸºå‡†
		LocalTime localTime = LocalTime.now();
		LocalTime localTime1 = LocalTime.of(15, 23, 32);
		//between():é™æ€æ–¹æ³•ï¼Œè¿”å›Durationå¯¹è±¡ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ—¶é—´çš„é—´éš”
		Duration duration = Duration.between(localTime1, localTime);
		System.out.println(duration);

		System.out.println(duration.getSeconds());
		System.out.println(duration.getNano());

		LocalDateTime localDateTime = LocalDateTime.of(2016, 6, 12, 15, 23, 32);
		LocalDateTime localDateTime1 = LocalDateTime.of(2017, 6, 12, 15, 23, 32);

		Duration duration1 = Duration.between(localDateTime1, localDateTime);
		System.out.println(duration1.toDays());
    }
    
    @Test
    public void test4(){
        //Period:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš”ï¼Œä»¥å¹´ã€æœˆã€æ—¥è¡¡é‡
		LocalDate localDate = LocalDate.now();
		LocalDate localDate1 = LocalDate.of(2028, 3, 18);

		Period period = Period.between(localDate, localDate1);
		System.out.println(period);

		System.out.println(period.getYears());
		System.out.println(period.getMonths());
		System.out.println(period.getDays());

		Period period1 = period.withYears(2);
		System.out.println(period1);

    }
}

```

3ã€Clockï¼šä½¿ç”¨æ—¶åŒºæä¾›å¯¹å½“å‰å³æ—¶ã€æ—¥æœŸå’Œæ—¶é—´çš„è®¿é—®çš„æ—¶é’Ÿã€‚

4ã€

TemporalAdjuster : æ—¶é—´æ ¡æ­£å™¨ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦è·å–ä¾‹å¦‚ï¼šå°†æ—¥æœŸè°ƒæ•´åˆ°â€œä¸‹ä¸€ä¸ªå·¥ä½œæ—¥â€ç­‰æ“ä½œã€‚
TemporalAdjusters : è¯¥ç±»é€šè¿‡é™æ€æ–¹æ³•(firstDayOfXxx()/lastDayOfXxx()/nextXxx())æä¾›äº†å¤§é‡çš„å¸¸ç”¨ TemporalAdjuster çš„å®ç°ã€‚

```java
@Test
public void test1(){
    // TemporalAdjuster:æ—¶é—´æ ¡æ­£å™¨
	// è·å–å½“å‰æ—¥æœŸçš„ä¸‹ä¸€ä¸ªå‘¨æ—¥æ˜¯å“ªå¤©ï¼Ÿ
	TemporalAdjuster temporalAdjuster = TemporalAdjusters.next(DayOfWeek.SUNDAY);
	LocalDateTime localDateTime = LocalDateTime.now().with(temporalAdjuster);
	System.out.println(localDateTime);
	// è·å–ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ˜¯å“ªå¤©ï¼Ÿ
	LocalDate localDate = LocalDate.now().with(new TemporalAdjuster() {
   	 	@Override
   	 	public Temporal adjustInto(Temporal temporal) {
        	LocalDate date = (LocalDate) temporal;
     	  	if (date.getDayOfWeek().equals(DayOfWeek.FRIDAY)) {
           		return date.plusDays(3);
        	} else if (date.getDayOfWeek().equals(DayOfWeek.SATURDAY)) {
            	return date.plusDays(2);
        	} else {
            	return date.plusDays(1);
        	}
    	}
	});
	System.out.println("ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥æ˜¯ï¼š" + localDate);

}
```

### 2.5 ä¸ä¼ ç»Ÿæ—¥æœŸå¤„ç†çš„è½¬æ¢

| **ç±»**                                                       | **To** **é—ç•™ç±»**                     | **From** **é—ç•™ç±»**         |
| ------------------------------------------------------------ | ------------------------------------- | --------------------------- |
| **java.time.Instantä¸java.util.Date**                        | Date.from(instant)                    | date.toInstant()            |
| **java.time.Instantä¸java.sql.Timestamp**                    | Timestamp.from(instant)               | timestamp.toInstant()       |
| **java.time.ZonedDateTimeä¸java.util.GregorianCalendar**     | GregorianCalendar.from(zonedDateTime) | cal.toZonedDateTime()       |
| **java.time.LocalDateä¸java.sql.Time**                       | Date.valueOf(localDate)               | date.toLocalDate()          |
| **java.time.LocalTimeä¸java.sql.Time**                       | Date.valueOf(localDate)               | date.toLocalTime()          |
| **java.time.LocalDateTimeä¸java.sql.Timestamp**              | Timestamp.valueOf(localDateTime)      | timestamp.toLocalDateTime() |
| **java.time.ZoneIdä¸java.util.TimeZone**                     | Timezone.getTimeZone(id)              | timeZone.toZoneId()         |
| **java.time.format.DateTimeFormatterä¸java.text.DateFormat** | formatter.toFormat()                  | æ—                           |
