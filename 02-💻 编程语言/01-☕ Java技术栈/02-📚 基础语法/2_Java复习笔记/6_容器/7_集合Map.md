---
æ–‡ç« æ ‡é¢˜: "[[7_é›†åˆMap]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æ–‡ç« æ·±å…¥åˆ†æJava `Map` æ¥å£çš„ `HashMap`ã€`Hashtable`ã€`LinkedHashMap` å’Œ `TreeMap`ã€‚å¯¹æ¯”å®ƒä»¬çš„çº¿ç¨‹å®‰å…¨ã€nullå¤„ç†åŠåº•å±‚ç»“æ„ï¼ˆæ•£åˆ—è¡¨ã€çº¢é»‘æ ‘ï¼‰ï¼Œå¼ºè°ƒ `key` çš„ `hashCode()` å’Œ `equals()` é‡è¦æ€§ã€‚æ€»ç»“äº†ä¸åŒå®ç°çš„æ€§èƒ½ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚
æ–‡ç« æ ‡ç­¾:
- "HashMap"
- "Hashtable"
- "LinkedHashMap"
- "TreeMap"
- "Javaé›†åˆ"
- "Mapæ¥å£"
- "equals"
- "hashCode"
- "æ•£åˆ—è¡¨"
ç›¸å…³æ–‡ç« :
- "[[4_é›†åˆSet]]"
- "[[2_ Collection]]"
- "[[13_æ•°æ®ç»“æ„ä¸é›†åˆæºç ]]"
æ–‡ç« åˆ†ç±»: "ğŸ’» ç¼–ç¨‹è¯­è¨€"
æ–‡ç« è·¯å¾„: "02-ğŸ’» ç¼–ç¨‹è¯­è¨€/01-â˜• JavaæŠ€æœ¯æ ˆ/02-ğŸ“š åŸºç¡€è¯­æ³•/2_Javaå¤ä¹ ç¬”è®°/6_å®¹å™¨/7_é›†åˆMap.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2024-08-11 18:15:12
---

## 1 HashMap

HashMapæ˜¯ä¸€ä¸ªæ•£åˆ—è¡¨ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹ï¼ˆkey-valueï¼‰æ˜ å°„ã€‚

æ—¢ç„¶è¦ä»‹ç»HashMapï¼Œé‚£ä¹ˆå°±é¡ºå¸¦ä»‹ç»Hashtableï¼Œä¸¤è€…è¿›è¡Œå¯¹æ¯”ã€‚

HashMapå’ŒHashtableéƒ½æ˜¯Mapæ¥å£çš„ç»å…¸å®ç°ç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»å®Œå…¨ç±»ä¼¼äºä¹‹å‰ä»‹ç»çš„ArrayListå’ŒVectorçš„å…³ç³»ã€‚ç”±äºHashtableæ˜¯ä¸ªå¤è€çš„Mapå®ç°ç±»ï¼ˆä»HashTableçš„å‘½åè§„èŒƒå°±å¯ä»¥çœ‹å‡ºï¼Œtæ²¡æœ‰å¤§å†™ï¼‰ï¼Œéœ€è¦æ–¹æ³•æ¯”è¾ƒç¹çï¼Œä¸ç¬¦åˆMapæ¥å£çš„è§„èŒƒã€‚ä½†æ˜¯Hashtableä¹Ÿå…·æœ‰HashMapä¸å…·æœ‰çš„æœ‰ç‚¹ã€‚ä¸‹é¢æˆ‘ä»¬è¿›è¡Œä¸¤è€…ä¹‹é—´çš„æ¯”å¯¹ã€‚

## 2 HashMapå’ŒHashtableçš„åŒºåˆ«

1. Hashtableæ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„Mapå®ç°ï¼Œä½†HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„å®ç°ï¼Œæ‰€æœ‰HashMapæ¯”Hashtableçš„æ€§èƒ½å¥½ä¸€äº›ï¼›ä½†å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªMapå¯¹è±¡ï¼Œé‡‡ç”¨Hashtableå®ç°ç±»ä¼šæ›´å¥½
2. Hashtableä¸å…è®¸ä½¿ç”¨nullä½œä¸ºkeyå’Œvalueï¼Œå¦åˆ™ä¼šå‘ç”ŸNullPointExceptionå¼‚å¸¸ï¼›ä½†æ˜¯HashMapå¯ä»¥ä½¿ç”¨nullä½œä¸ºkeyå’Œvalue

## 3 HashMapåˆ¤æ–­keyå’Œvalueç›¸ç­‰çš„æ ‡å‡†

### 3.1 keyåˆ¤æ–­ç›¸ç­‰çš„æ ‡å‡†

ç±»ä¼¼äºHashSetï¼ŒHashMapä¸Hashtableåˆ¤æ–­ä¸¤ä¸ªkeyç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªkeyé€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueï¼Œä¸¤ä¸ªkeyçš„å“ˆå¸Œå€¼ä¹Ÿç›¸ç­‰ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªkey æ˜¯ç›¸ç­‰çš„

`æ³¨æ„ï¼š`ç”¨ä½œkeyçš„å¯¹è±¡å¿…é¡»å®ç°äº†hashCode()æ–¹æ³•å’Œequals()æ–¹æ³•ã€‚å¹¶ä¸”æœ€å¥½ä¸¤è€…è¿”å›çš„ç»“æœä¸€è‡´ï¼Œå³å¦‚æœequals()è¿”å›trueï¼ŒhashCode()ç›¸ç­‰ã€‚

### 3.2 valueåˆ¤æ–­ç›¸ç­‰çš„æ ‡å‡†

HashMapä¸Hashtableåˆ¤æ–­ä¸¤ä¸ªvalueç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªvalueé€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueå³å¯

`æ³¨æ„ï¼š`HashMapä¸­keyæ‰€ç»„æˆçš„é›†åˆå…ƒç´ ä¸èƒ½é‡å¤ï¼Œvalueæ‰€ç»„æˆçš„é›†åˆå…ƒç´ å¯ä»¥é‡å¤

ä¸‹é¢ç¨‹åºç¤ºèŒƒäº†HashMapåˆ¤æ–­keyä¸valueç›¸ç­‰çš„æ ‡å‡†
```java
public class A {
    public int count;

    public A(int count) {
        this.count = count;
    }
    //æ ¹æ®countå€¼æ¥è®¡ç®—hashCodeå€¼
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + count;
        return result;
    }
    //æ ¹æ®countå€¼æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        A other = (A) obj;
        if (count != other.count)
            return false;
        return true;
    }
    

}
```

```java
public class B {
    public int count;
    public B(int count) {
        this.count = count;
    }
     //æ ¹æ®countå€¼æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        B other = (B) obj;
        if (count != other.count)
            return false;
        return true;
    }

}
```

```java
public class HashMapTest {
    public static void main(String[] args){
        HashMap map = new HashMap();
        map.put(new A(1000), "é›†åˆSet");
        map.put(new A(2000), "é›†åˆList");
        map.put(new A(3000), new B(1000));
       //ä»…ä»…equals()æ¯”è¾ƒä¸ºtrueï¼Œä½†è®¤ä¸ºæ˜¯ç›¸åŒçš„value
        boolean isContainValue = map.containsValue(new B(1000));
        System.out.println(isContainValue);
      //è™½ç„¶æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œä½†æ˜¯equals()å’ŒhashCode()è¿”å›ç»“æœéƒ½ç›¸ç­‰
        boolean isContainKey = map.containsKey(new A(1000));
        System.out.println(isContainKey);
      //equals()å’ŒhashCode()è¿”å›ç»“æœä¸æ»¡è¶³keyç›¸ç­‰çš„æ¡ä»¶
        System.out.println(map.containsKey(new A(4000)));
    }
    
}
```
![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/1dac0ec9e8f906e4680d603a62193d08.png)

`æ³¨æ„ï¼š` å¦‚æœæ˜¯åŠ å…¥HashMapçš„keyæ˜¯ä¸ªå¯å˜å¯¹è±¡ï¼Œåœ¨åŠ å…¥åˆ°é›†åˆååˆä¿®æ”¹keyçš„æˆå‘˜å˜é‡çš„å€¼ï¼Œå¯èƒ½å¯¼è‡´hashCode()å€¼ä»¥åŠequal()çš„æ¯”è¾ƒç»“æœå‘ç”Ÿå˜åŒ–ï¼Œæ— æ³•è®¿é—®åˆ°è¯¥keyã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦ä¿®æ”¹ã€‚

## 4 HashMapçš„æœ¬è´¨

ä¸‹é¢æˆ‘ä»¬ä»æºç è§’åº¦æ¥ç†è§£HashMap

### 4.1 HashMapçš„æ„é€ å‡½æ•°

```dart
// é»˜è®¤æ„é€ å‡½æ•°ã€‚
HashMap()

// æŒ‡å®šâ€œå®¹é‡å¤§å°â€çš„æ„é€ å‡½æ•°
HashMap(int capacity)

// æŒ‡å®šâ€œå®¹é‡å¤§å°â€å’Œâ€œåŠ è½½å› å­â€çš„æ„é€ å‡½æ•°
HashMap(int capacity, float loadFactor)

// åŒ…å«â€œå­Mapâ€çš„æ„é€ å‡½æ•°
HashMap(Map<? extends K, ? extends V> map)
```

ä»æ„é€ å‡½æ•°ä¸­ï¼Œç†è§£åˆ°ä¸¤ä¸ªé‡è¦çš„å…ƒç´ ï¼šå®¹é‡å¤§å°ï¼ˆcapacityï¼‰ä»¥åŠåŠ è½½å› å­ï¼ˆloadFactorï¼‰

å®¹é‡å¤§å°ï¼ˆcapacityï¼‰æ˜¯å“ˆå¸Œè¡¨çš„å®¹é‡ï¼Œåˆå§‹å®¹é‡æ˜¯å“ˆå¸Œè¡¨åœ¨åˆ›å»ºæ—¶çš„å®¹é‡ï¼ˆå³`DEFAULT_INITIAL_CAPACITY = 1 << 4`ï¼‰

åŠ è½½å› å­ æ˜¯å“ˆå¸Œè¡¨åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢åŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ã€‚å½“å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°è¶…è¿‡äº† åŠ è½½å› å­ä¸ç‚¹å‰å®¹é‡çš„ä¹˜ç§¯æ—¶ï¼Œåˆ™è¦å¯¹è¯¥å“ˆå¸Œè¡¨è¿›è¡Œresizeæ“ä½œï¼ˆå³é‡å»ºå†…éƒ¨æ•°æ®ç»“æ„ï¼‰ï¼Œä»è€Œå“ˆå¸Œè¡¨å°†å…·æœ‰å¤§çº¦ä¸¤å€çš„æ¡¶æ•°

é€šå¸¸ï¼Œé»˜è®¤åŠ è½½å› å­æ˜¯0.75ï¼ˆå³`DEFAULT_LOAD_FACTOR = 0.75f`ï¼‰ï¼Œè¿™æ˜¯åœ¨æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¸Šå¯»æ±‚çš„ä¸€ç§æŠ˜ä¸­ã€‚åŠ è½½å› å­è¿‡é«˜è™½ç„¶å‡å°‘äº†ç©ºé—´å¼€é”€ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ äº†æŸ¥è¯¢æˆæœ¬ï¼ˆåœ¨å¤§å¤šæ•°HashMapç±»çš„æ“ä½œä¸­ï¼ŒåŒ…æ‹¬getå’Œputæ“ä½œï¼Œéƒ½åæ˜ äº†è¿™ä¸€ç‚¹ï¼‰ã€‚åœ¨è®¾ç½®å®¹é‡æ—¶åº”è¯¥è€ƒè™‘åˆ°æ˜ å°„ä¸­æ‰€éœ€çš„æ¡ç›®æ•°ä»¥åŠåŠ è½½å› å­ï¼Œä»¥ä¾¿æœ€å¤§é™åº¦åœ°å‡å°‘resizeæ“ä½œã€‚å¦‚æœå®¹é‡å¤§äºæœ€å¤§æ¡ç›®æ•°é™¤ä»¥åŠ è½½å› å­ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿrehashæ“ä½œ
### 4.2 Nodeç±»å‹

HashMapæ˜¯é€šè¿‡â€œæ‹‰é“¾æ³•â€å®ç°çš„å“ˆå¸Œè¡¨ã€‚å®ƒåŒ…æ‹¬å‡ ä¸ªé‡è¦çš„æˆå‘˜å˜é‡ï¼štableï¼Œsizeï¼Œthresholdï¼ŒloadFactorã€‚

tableæ˜¯ä¸€ä¸ªNode[]æ•°ç»„ç±»å‹ï¼Œè€ŒNodeå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹éƒ½æ˜¯å­˜å‚¨åœ¨Nodeæ•°ç»„ä¸­çš„

sizeæ˜¯HashMapçš„å¤§å°ï¼Œå®ƒæ˜¯HashMapä¿å­˜çš„é”®å€¼å¯¹çš„æ•°é‡

thresholdæ˜¯HashMapçš„é˜ˆå€¼ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´HashMapçš„å®¹é‡ã€‚thresholdçš„å€¼ = â€œå®¹é‡ * åŠ è½½å› å­â€ ï¼Œ å½“HashMapä¸­å­˜å‚¨æ•°æ®çš„æ•°é‡è¾¾åˆ°thresholdæ—¶ï¼Œå°±éœ€è¦å°†HashMapçš„å®¹é‡åŠ å€

loadFactorå°±æ˜¯åŠ è½½å› å­

è¦æƒ³ç†è§£HashMapï¼Œé¦–å…ˆå°±è¦ç†è§£åŸºäºNodeå®ç°çš„â€œæ‹‰é“¾æ³•â€ã€‚

Javaä¸­æ•°æ®å­˜å‚¨æ–¹å¼æœ€åº•å±‚çš„ä¸¤ç§ç»“æ„ï¼Œä¸€ç§æ˜¯æ•°ç»„ï¼Œä¸€ç§å°±æ˜¯é“¾è¡¨ã€‚

æ•°ç»„çš„ç‰¹ç‚¹ï¼šè¿ç»­ç©ºé—´ï¼Œå¯»å€è¿…é€Ÿï¼Œä½†åœ¨åˆ é™¤æˆ–æ·»åŠ å…ƒç´ çš„æ—¶å€™éœ€è¦æœ‰è¾ƒå¤§å¹…åº¦çš„ç§»åŠ¨ï¼Œæ‰€ä»¥æŸ¥è¯¢å¿«ï¼Œå¢åˆ æ…¢

è€Œé“¾è¡¨æ­£å¥½ç›¸åï¼Œç”±äºç©ºé—´ä¸è¿ç»­ï¼Œå¯»å€å›°éš¾ï¼Œå¢åˆ å…ƒç´ åªéœ€è¦ä¿®æ”¹æŒ‡é’ˆï¼Œæ‰€ä»¥æŸ¥è¯¢é€Ÿåº¦æ…¢ï¼Œå¢åˆ å¿«ã€‚

æœ‰æ²¡æœ‰ä¸€ç§æ•°æ®ç»“æ„æ¥ç»¼åˆä¸€ä¸‹æ•°ç»„å’Œé“¾è¡¨ï¼Œä»¥å‘æŒ¥å®ƒä»¬å„è‡ªçš„ä¼˜åŠ¿ï¼Ÿ

`å“ˆå¸Œè¡¨ï¼`

å“ˆå¸Œè¡¨å…·æœ‰è¾ƒå¿«ï¼ˆå¸¸é‡çº§ï¼‰çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œä»¥åŠç›¸å¯¹è¾ƒå¿«çš„å¢åˆ é€Ÿåº¦ï¼Œæ‰€ä»¥å¾ˆé€‚åˆåœ¨æµ·é‡æ•°æ®çš„ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä¸€èˆ¬å®ç°å“ˆå¸Œè¡¨çš„æ–¹æ³•é‡‡ç”¨â€œæ‹‰é“¾æ³•â€ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºâ€œé“¾è¡¨çš„æ•°ç»„â€ï¼Œå¦‚ä¸‹å›¾ 
![|380](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2024/04/ce832653ab1b67d84348a650ac3375fd.png)

å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å“ˆå¸Œè¡¨æ˜¯ç”±æ•°ç»„+é“¾è¡¨çµ„æˆçš„ï¼Œä¸€ä¸ªé•¿åº¦ä¸º16çš„æ•°ç»„ä¸­ï¼Œæ¯å€‹å…ƒç´ å­˜å‚¨çš„æ˜¯ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚é‚£ä¹ˆè¿™äº›å…ƒç´ æ˜¯æŒ‰ç…§ä»€ä¹ˆæ ·çš„è§„åˆ™å­˜å‚¨åˆ°æ•°ç»„ä¸­å‘¢ï¼Ÿ  
ä¸€èˆ¬æƒ…æ³æ˜¯é€šè¿‡hash(key)è·å¾—ï¼Œä¹Ÿå°±æ˜¯å…ƒç´ çš„keyçš„å“ˆå¸Œå€¼ã€‚å¦‚æœhash(key)å€¼ç›¸ç­‰ï¼Œåˆ™éƒ½å­˜å…¥è¯¥hashå€¼æ‰€å¯¹åº”çš„é“¾è¡¨ä¸­ã€‚å®ƒçš„å…§éƒ¨å…¶å®æ˜¯ç”¨ä¸€å€‹Nodeæ•°ç»„ä¾†å®ç°ã€‚

**æ‰€ä»¥æ¯ä¸ªæ•°ç»„å…ƒç´ ä»£è¡¨ä¸€ä¸ªé“¾è¡¨ï¼Œå…¶ä¸­çš„å…±åŒç‚¹å°±æ˜¯hash(key)ç›¸ç­‰ã€‚**

ä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸‹é“¾è¡¨çš„åŸºæœ¬å…ƒç´ Nodeã€‚

```java
static class Node<K,V> implements Map.Entry<K,V> {
        final int hash;
        final K key;
        V value;
        // æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
        Node<K,V> next;
        //æ„é€ å‡½æ•°ã€‚
      // è¾“å…¥å‚æ•°åŒ…æ‹¬"å“ˆå¸Œå€¼(hash)", "é”®(key)", "å€¼(value)", "ä¸‹ä¸€èŠ‚ç‚¹(next)"
        Node(int hash, K key, V value, Node<K,V> next) {
            this.hash = hash;
            this.key = key;
            this.value = value;
            this.next = next;
        }

        public final K getKey()        { return key; }
        public final V getValue()      { return value; }
        public final String toString() { return key + "=" + value; }

        public final int hashCode() {
            return Objects.hashCode(key) ^ Objects.hashCode(value);
        }

        public final V setValue(V newValue) {
            V oldValue = value;
            value = newValue;
            return oldValue;
        }
         // åˆ¤æ–­ä¸¤ä¸ªNodeæ˜¯å¦ç›¸ç­‰
        // è‹¥ä¸¤ä¸ªNodeçš„â€œkeyâ€å’Œâ€œvalueâ€éƒ½ç›¸ç­‰ï¼Œåˆ™è¿”å›trueã€‚
        // å¦åˆ™ï¼Œè¿”å›false
        public final boolean equals(Object o) {
            if (o == this)
                return true;
            if (o instanceof Map.Entry) {
                Map.Entry<?,?> e = (Map.Entry<?,?>)o;
                if (Objects.equals(key, e.getKey()) &&
                    Objects.equals(value, e.getValue()))
                    return true;
            }
            return false;
        }
    }
```

å†æ­¤ç»“æ„ä¸‹ï¼Œå®ç°äº†é›†åˆçš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œç”±äºæœ¬ç¯‡çš„ç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œå°±ä¸å…·ä½“ä»‹ç»å…¶æºç å®ç°äº†ã€‚

### 4.3 HashMapéå†æ–¹å¼

1.éå†HashMapçš„é”®å€¼å¯¹

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®entrySet()è·å–HashMapçš„â€œé”®å€¼å¯¹â€çš„Seté›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

2.éå†HashMapçš„é”®

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®keySet()è·å–HashMapçš„â€œé”®â€çš„Seté›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

3.éå†HashMapçš„å€¼

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®value()è·å–HashMapçš„â€œå€¼â€çš„é›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

### 4.4 LinkedHashMap

HashSetæœ‰ä¸€ä¸ªLinkedHashSetå­ç±»ï¼ŒHashMapä¹Ÿæœ‰ä¸€ä¸ªLinkedHashMapå­ç±»ï¼›

LinkedHashMapä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤key-valueå¯¹çš„æ¬¡åºã€‚  

LinkedHashMapéœ€è¦ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºï¼Œå› æ­¤æ€§èƒ½ç•¥ä½äºHashMapçš„æ€§èƒ½ï¼›ä½†æ˜¯å› ä¸ºå®ƒä»¥é“¾è¡¨æ¥ç»´æŠ¤å†…éƒ¨é¡ºåºï¼Œæ‰€ä»¥åœ¨è¿­ä»£è®¿é—®**Mapé‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰è¾ƒå¥½çš„æ€§èƒ½**ã€‚è¿­ä»£è¾“å‡ºLinkedHashMapçš„å…ƒç´ æ—¶ï¼Œå°†ä¼šæŒ‰ç…§æ·»åŠ key-valueå¯¹çš„é¡ºåºè¾“å‡ºã€‚  

**æœ¬è´¨ä¸Šæ¥è®²ï¼ŒLinkedHashMap=æ•£åˆ—è¡¨+å¾ªç¯åŒå‘é“¾è¡¨**

## 5 TreeMap

TreeMapæ˜¯SortedMapæ¥å£çš„å®ç°ç±»ã€‚TreeMap æ˜¯ä¸€ä¸ª**æœ‰åºçš„key-valueé›†åˆ**ï¼Œå®ƒæ˜¯é€šè¿‡çº¢é»‘æ ‘å®ç°çš„ï¼Œæ¯ä¸ªkey-valueå¯¹å³ä½œä¸ºçº¢é»‘æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚

### 5.1 TreeMapçš„æ’åºæ–¹å¼

TreeMapæœ‰ä¸¤ç§æ’åºæ–¹å¼ï¼Œå’ŒTreeSetä¸€æ ·ã€‚

`è‡ªç„¶æ’åº`ï¼šTreeMapçš„æ‰€æœ‰keyå¿…é¡»å®ç°Comparableæ¥å£ï¼Œè€Œä¸”æ‰€æœ‰çš„keyåº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¦åˆ™ä¼šæŠ›å‡ºClassCastExceptionå¼‚å¸¸ã€‚

`å®šåˆ¶æ’åº`ï¼šåˆ›å»ºTreeMapæ—¶ï¼Œä¼ å…¥ä¸€ä¸ªComparatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMapä¸­çš„æ‰€æœ‰keyè¿›è¡Œæ’åºã€‚

### 5.2 TreeMapä¸­åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ keyã€valueç›¸ç­‰çš„æ ‡å‡†

ç±»ä¼¼äºTreeSetä¸­åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†ï¼ŒTreeMapä¸­åˆ¤æ–­ä¸¤ä¸ªkeyç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ªkeyé€šè¿‡compareTo()æ–¹æ³•è¿”å›0ï¼ŒTreeMapå³è®¤ä¸ºè¿™ä¸¤ä¸ªkeyæ˜¯ç›¸ç­‰çš„ã€‚

TreeMapä¸­åˆ¤æ–­ä¸¤ä¸ªvalueç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ªvalueé€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueã€‚

**æ³¨æ„ï¼š**å¦‚æœä½¿ç”¨è‡ªå®šä¹‰ç±»ä½œä¸ºTreeMapçš„keyï¼Œä¸”æƒ³è®©TreeMapè‰¯å¥½åœ°å·¥ä½œï¼Œåˆ™é‡å†™è¯¥ç±»çš„equals()æ–¹æ³•å’ŒcompareTo()æ–¹æ³•æ—¶åº”ä¿æŒä¸€è‡´çš„è¿”å›ç»“æœï¼šä¸¤ä¸ªkeyé€šè¿‡equals()æ–¹æ³•æ¯”è¾ƒè¿”å›trueæ—¶ï¼Œå®ƒä»¬é€šè¿‡compareTo()æ–¹æ³•æ¯”è¾ƒåº”è¯¥è¿”å›0ã€‚å¦‚æœä¸¤ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœä¸ä¸€è‡´ï¼ŒTreeMapä¸Mapæ¥å£çš„è§„åˆ™å°±ä¼šå†²çªã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œä¸TreeSetç±»ä¼¼ï¼ŒTreeMapæ ¹æ®æ’åºç‰¹æ€§ï¼Œä¹Ÿæ·»åŠ äº†ä¸€éƒ¨åˆ†æ–°çš„æ–¹æ³•ï¼Œä¸TreeSetä¸­çš„ä¸€è‡´ã€‚å¯ä»¥å‚è€ƒå‰é¢çš„æ–‡ç« ã€‚
### 5.3 TreeMapçš„æœ¬è´¨

`çº¢é»‘æ ‘`

R-B Treeï¼Œå…¨ç§°æ˜¯Red-Black Treeï¼Œåˆç§°ä¸ºâ€œçº¢é»‘æ ‘â€ï¼Œå®ƒä¸€ç§ç‰¹æ®Šçš„äºŒå‰æŸ¥æ‰¾æ ‘ã€‚çº¢é»‘æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰å­˜å‚¨ä½è¡¨ç¤ºèŠ‚ç‚¹çš„é¢œè‰²ï¼Œå¯ä»¥æ˜¯çº¢(Red)æˆ–é»‘(Black)ã€‚

çº¢é»‘æ ‘çš„ç‰¹æ€§:  
ï¼ˆ1ï¼‰æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯é»‘è‰²ï¼Œæˆ–è€…æ˜¯çº¢è‰²ã€‚  
ï¼ˆ2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚  
ï¼ˆ3ï¼‰æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚ [æ³¨æ„ï¼šè¿™é‡Œå¶å­èŠ‚ç‚¹ï¼Œæ˜¯æŒ‡ä¸ºç©º(NILæˆ–NULL)çš„å¶å­èŠ‚ç‚¹ï¼]  
ï¼ˆ4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ã€‚  
ï¼ˆ5ï¼‰ä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ä¸ŠåŒ…å«ç›¸åŒæ•°ç›®çš„é»‘èŠ‚ç‚¹ã€‚

æ³¨æ„ï¼š  
(01) ç‰¹æ€§(3)ä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œæ˜¯åªä¸ºç©º(NILæˆ–null)çš„èŠ‚ç‚¹ã€‚  
(02) ç‰¹æ€§(5)ï¼Œç¡®ä¿æ²¡æœ‰ä¸€æ¡è·¯å¾„ä¼šæ¯”å…¶ä»–è·¯å¾„é•¿å‡ºä¿©å€ã€‚å› è€Œï¼Œçº¢é»‘æ ‘æ˜¯ç›¸å¯¹æ˜¯æ¥è¿‘å¹³è¡¡çš„äºŒå‰æ ‘ã€‚

**çº¢é»‘æ ‘çš„æ—¶é—´å¤æ‚åº¦ä¸º: O(log n)**  
æ›´å¤šå…³äºçº¢é»‘æ ‘çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼Œå¯ä»¥å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://link.jianshu.com/?t=http://www.cnblogs.com/skywang12345/p/3245399.html)ã€‚

**å¯ä»¥è¯´TreeMapçš„å¢åˆ æ”¹æŸ¥ç­‰æ“ä½œéƒ½æ˜¯åœ¨ä¸€é¢—çº¢é»‘æ ‘çš„åŸºç¡€ä¸Šè¿›è¡Œæ“ä½œçš„ã€‚**
### 5.4 TreeMapéå†æ–¹å¼

éå†TreeMapçš„é”®å€¼å¯¹

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®entrySet()è·å–TreeMapçš„â€œé”®å€¼å¯¹â€çš„Seté›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

éå†TreeMapçš„é”®

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®keySet()è·å–TreeMapçš„â€œé”®â€çš„Seté›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

éå†TreeMapçš„å€¼

ç¬¬ä¸€æ­¥ï¼šæ ¹æ®value()è·å–TreeMapçš„â€œå€¼â€çš„é›†åˆã€‚  
ç¬¬äºŒæ­¥ï¼šé€šè¿‡Iteratorè¿­ä»£å™¨éå†â€œç¬¬ä¸€æ­¥â€å¾—åˆ°çš„é›†åˆã€‚

## 6 Mapå®ç°ç±»çš„æ€§èƒ½åˆ†æåŠé€‚ç”¨åœºæ™¯

HashMapä¸Hashtableå®ç°æœºåˆ¶å‡ ä¹ä¸€æ ·ï¼Œä½†æ˜¯HashMapæ¯”Hashtableæ€§èƒ½æ›´å¥½äº›ã€‚  
LinkedHashMapæ¯”HashMapæ…¢ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒéœ€è¦ç»´æŠ¤ä¸€ä¸ªåŒå‘é“¾è¡¨ã€‚  
TreeMapæ¯”HashMapä¸Hashtableæ…¢ï¼ˆå°¤å…¶åœ¨æ’å…¥ã€åˆ é™¤key-valueæ—¶æ›´æ…¢ï¼‰ï¼Œå› ä¸ºTreeMapåº•å±‚é‡‡ç”¨çº¢é»‘æ ‘æ¥ç®¡ç†é”®å€¼å¯¹ã€‚  
**é€‚ç”¨åœºæ™¯ï¼š**  
ä¸€èˆ¬çš„åº”ç”¨åœºæ™¯ï¼Œå°½å¯èƒ½å¤šè€ƒè™‘ä½¿ç”¨HashMapï¼Œå› ä¸ºå…¶ä¸ºå¿«é€ŸæŸ¥è¯¢è®¾è®¡çš„ã€‚  
å¦‚æœéœ€è¦ç‰¹å®šçš„æ’åºæ—¶ï¼Œè€ƒè™‘ä½¿ç”¨TreeMapã€‚  
å¦‚æœä»…ä»…éœ€è¦æ’å…¥çš„é¡ºåºæ—¶ï¼Œè€ƒè™‘ä½¿ç”¨LinkedHashMapã€‚
