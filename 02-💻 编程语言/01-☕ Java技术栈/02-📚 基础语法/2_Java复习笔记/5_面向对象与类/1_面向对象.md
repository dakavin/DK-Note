---
æ–‡ç« æ ‡é¢˜: "[[1_é¢å‘å¯¹è±¡]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸‰å¤§æ ¸å¿ƒç‰¹å¾ï¼šå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚é€šè¿‡Javaç¤ºä¾‹ï¼Œé˜è¿°äº†å°è£…å¦‚ä½•é™ä½è€¦åˆï¼Œç»§æ‰¿å¦‚ä½•å®ç°ä»£ç å¤ç”¨ï¼ˆDRYåŸåˆ™ï¼‰ï¼Œä»¥åŠå¤šæ€å¦‚ä½•é€šè¿‡åŠ¨æ€ç»‘å®šå®ç°çµæ´»è¡Œä¸ºã€‚æ–‡ç« è¿˜æ¢è®¨äº†ç»„åˆæ¨¡å¼ä½œä¸ºç»§æ‰¿çš„æ›¿ä»£ï¼Œå¹¶è§£é‡Šäº†Javaä¸­`Object`ç±»çš„å¸¸ç”¨æ–¹æ³•ã€‚
tags:
- "é¢å‘å¯¹è±¡"
- "å°è£…"
- "ç»§æ‰¿"
- "å¤šæ€"
- "Java"
- "ç»„åˆ"
- "è€¦åˆ"
ç›¸å…³æ–‡ç« :
- "[[6_é¢å‘å¯¹è±¡åŸºç¡€]]"
- "[[5_Javaé¢å‘å¯¹è±¡]]"
- "[[9_superå’Œthis]]"
- "[[10_æ–¹æ³•çš„é‡è½½å’Œé‡å†™]]"
- "[[3_å®šä¹‰ä½ è‡ªå·±çš„ç±»]]"
æ–‡ç« åˆ†ç±»: "ğŸ’» ç¼–ç¨‹è¯­è¨€"
æ–‡ç« è·¯å¾„: "02-ğŸ’» ç¼–ç¨‹è¯­è¨€/01-â˜• JavaæŠ€æœ¯æ ˆ/02-ğŸ“š åŸºç¡€è¯­æ³•/2_Javaå¤ä¹ ç¬”è®°/5_é¢å‘å¯¹è±¡ä¸ç±»/1_é¢å‘å¯¹è±¡.md"
æ–‡ç« éš¾åº¦: åˆçº§ ğŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­â­â­ ç²¾é€šå¿…å¤‡
åˆ›å»ºæ—¶é—´: 2024-08-11 18:15:12
ä¿®æ”¹æ—¶é—´: 2025-05-27 21:36:04
---

## 1 æ¦‚è¿°

ä¸‰å¤§ç‰¹å¾ï¼š`å°è£… + ç»§æ‰¿ + å¤šæ€`

## 2 å°è£…

å°è£…éšè—äº†å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å‡ºæ¥å£ã€‚å¯¹å¤–æš´éœ²å‡ºå°½å¯èƒ½å°‘çš„ç»†èŠ‚ï¼Œå½“å†…éƒ¨ç»†èŠ‚å®ç°éœ€è¦æ”¹å˜æ—¶ï¼Œå¤–é¢å¯ä»¥å°½å¯èƒ½å°‘åœ°è¿›è¡Œæ›´æ”¹æˆ–è€…ä¸è¿›è¡Œæ›´æ”¹

### 2.1 è€¦åˆ

ä¸€ä¸ªç±»è°ƒç”¨äº†å¦ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç±»å°±å…·æœ‰è€¦åˆå…³ç³»ã€‚

- ä½è€¦åˆ -> è°ƒç”¨å°è£…çš„æ¥å£ => å†…éƒ¨ç»†èŠ‚æ›´æ”¹æ—¶ï¼Œå¤–éƒ¨æ— éœ€æ”¹åŠ¨ => é™ä½è‡ªèº«å’Œä¾èµ–è½¯ä»¶ä¹‹é—´çš„ç›¸äº’å…³ç³»
- é«˜è€¦åˆ -> è°ƒç”¨å°è£…çš„æ¥å£çš„å†…éƒ¨ç»†èŠ‚ => å†…éƒ¨ç»†èŠ‚æ›´æ”¹æ—¶ï¼Œå¤–éƒ¨éœ€è¦æ”¹åŠ¨

## 3 ç»§æ‰¿

DRY => Do not Repeat Yourself => äº‹ä¸è¿‡ä¸‰ï¼Œä¸‰åˆ™é‡æ„ => **ç»§æ‰¿çš„æœ¬è´¨æ˜¯æç‚¼å‡ºå…¬å…±ä»£ç ï¼Œé¿å…é‡å¤**

### 3.1 å•æ ¹ç»§æ‰¿ & å•ä¸€ç»§æ‰¿

å½“ç±»ä¸ç»§æ‰¿ä»»ä½•å…¶ä»–ç±»æ—¶ï¼Œé»˜è®¤ç»§æ‰¿äº† `Object` => å¯ä»¥ä¿è¯ Java ä¸–ç•Œä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ‹¥æœ‰æŸä¸ªè¡Œä¸ºï¼Œå› ä¸ºæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº† `Object`

**åœ¨ Java ä¸­ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä¸èƒ½åŒæ—¶ç»§æ‰¿å¤šä¸ªç±»**

**å¤šé‡ç»§æ‰¿** => å½“ç»§æ‰¿çš„ç±»ä¸­å…·æœ‰ç›¸åŒçš„è¡Œä¸ºæ—¶ï¼Œä¸çŸ¥é“åº”è¯¥å»é€‰æ‹©å“ªä¸€ä¸ªè¡Œä¸º => **è±å½¢ç»§æ‰¿**

### 3.2 å‘ä¸Š | å‘ä¸‹è½¬å‹

1. ä¸€ä¸ªå­ç±»ç±»å‹çš„å¯¹è±¡æ°¸è¿œæ˜¯ä¸€ä¸ªçˆ¶ç±»ç±»å‹çš„å¯¹è±¡
2. å½“éœ€è¦ä¸€ä¸ªçˆ¶ç±»å‹æ—¶ï¼Œæ€»å¯ä»¥ä¼ é€’ä¸€ä¸ªå­ç±»å‹
3. **å‘ä¸Šè½¬å‹æ˜¯å®‰å…¨çš„ï¼Œå‘ä¸‹è½¬å‹æ˜¯ä¸å®‰å…¨çš„**
4. å¦‚æœè¦è¿›è¡Œä¸å®‰å…¨çš„è½¬å‹ï¼Œå¿…é¡»è¿›è¡Œ**å¼ºåˆ¶è½¬æ¢**ï¼Œå¹¶ä¸”åœ¨è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸

### 3.3 java.lang.Object

#### 3.3.1 equals

`Object.equals()` => æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ => **å½“é‡å†™ `equals()` æ–¹æ³•æ—¶ï¼Œè¦åŒæ—¶é‡å†™ `hashCode()` æ–¹æ³•**

#### 3.3.2 toString

ç”¨æ¥å¯¹ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤º => å¯ä»¥ç”¨æ¥çœ‹ä¸€ä¸‹å¯¹è±¡ä¸­çš„æ•°æ® => å¯ä»¥é€šè¿‡é‡å†™ `Object.toString()` æ–¹æ³•æ¥è®©æ•°æ®æ›´å¥½çš„å±•ç¤º => `System.out.println(Animal)`  
æ‰“å°ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å¯¹è±¡çš„ `toString()` æ–¹æ³•

```java
public class Animal {
    String name;

    @Override
    public String toString() {
        return "Animal{" +
                "name='" + name + '\'' +
                '}';
    }
}
```

#### 3.3.3 override

é‡å†™è¡Œä¸º => æ–¹æ³•ç­¾åæ²¡æœ‰æ”¹å˜ï¼Œæ–¹æ³•çš„å†…éƒ¨ç»†èŠ‚**é‡å†™** => æœ€ä½³å®è·µï¼š**æ°¸è¿œä½¿ç”¨ `@Override` æ³¨è§£**

## 4 å¤šæ€

å¤šæ€ => é¢å‘å¯¹è±¡çš„çµé­‚ => ä¸€ä¸ªæ–¹æ³•è¡¨ç°å‡ºäº†ä¸åŒçš„å½¢æ€ => **ä¸åŒçš„ç±»ä¸­çš„æ–¹æ³•æœ‰ä¸åŒçš„å®ç°**

- _å®ä¾‹æ–¹æ³•_ é»˜è®¤æ˜¯å¤šæ€çš„ => åœ¨è¿è¡Œæ—¶æ ¹æ® `this` æ¥å†³å®šè°ƒç”¨å“ªä¸ªæ–¹æ³• => ä¾‹ï¼šå¤šä¸ªç±»ç»§æ‰¿äº†åŒä¸€ä¸ªç±»ï¼Œè¦†ç›–äº†åŒä¸€ä¸ªæ–¹æ³•
- _é™æ€æ–¹æ³•_ æ²¡æœ‰å¤šæ€
- **å‚æ•°é™æ€ç»‘å®šï¼Œæ¥æ”¶è€…åŠ¨æ€ç»‘å®š** => å¤šæ€åªå¯¹ _æ–¹æ³•çš„æ¥æ”¶è€…_ æœ‰æ•ˆ => å¤šæ€åªé€‰æ‹©æ¥æ”¶è€…çš„ç±»å‹ï¼Œä¸é€‰æ‹©å‚æ•°çš„ç±»å‹
    
    ```java
    class Main {
        public static void main(String[] args) {
            Base object = new Sub();
            ParamsBase params = new ParamsSub();
            // æ–¹æ³•çš„æ¥æ”¶è€… object
            object.print(params); // I Sub, the param is ParamsBase.
            object.print((ParamsSub) params); // I Sub, the param is ParamSub.
        }
    }
    
    class Base {
        public void print(ParamsBase param) {
            System.out.println("I am Base, the param is ParamsBase.");
        }
    
        public void print(ParamsSub param) {
            System.out.println("I am Base, the param is ParamSub.");
        }
    }
    
    class Sub extends Base {
        @Override
        public void print(ParamsBase param) {
            System.out.println("I Sub, the param is ParamsBase.");
        }
    
        @Override
        public void print(ParamsSub param) {
            System.out.println("I Sub, the param is ParamSub.");
        }
    }
    
    class ParamsBase { }
    
    class ParamsSub extends ParamsBase { }    
    ```
    
- æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ç”±**ç±»å®é™…çš„å¯¹è±¡**å†³å®šå¦‚ä½•å“åº”è¿™ä¸ªæŠ½è±¡çš„æ–¹æ³•

### 4.1 ç­–ç•¥æ¨¡å¼ä½“ç°å¤šæ€

```java
class User {
    private boolean vip;

    public boolean isVip() {
        return vip;
    }
}

class PriceCalculator {
    public int calculate(DiscountStrategy discountStrategy, int price, User user) throws IllegalAccessException {
        // æ¯æ¬¡æ–°å¢ä¸€ç§ç­–ç•¥å°±è¦å¤šåŠ ä¸€ä¸ªç±»
        return discountStrategy.discount(price, user);

//        switch (strategy) {
//            case "NoDiscount":
//                return price;
//            case "95":
//                return (int) (price * 0.95);
//            case "VIP":
//                if (user.isVip()) {
//                    return (int) (price * 0.85);
//                }
//                return (int) (price * 0.95);
//            // ...
//            default:
//                throw new IllegalAccessException();
//    }
    }
}

class DiscountStrategy {
    public int discount(int price, User user) {
        return price;
    }
}

class NoDiscountStrategy extends DiscountStrategy {
    @Override
    public int discount(int price, User user) {
        return price;
    }
}

class Discount95Strategy extends DiscountStrategy {
    @Override
    public int discount(int price, User user) {
        return (int) (price * 0.95);
    }
}

class VipDiscountStrategy extends DiscountStrategy {
    @Override
    public int discount(int price, User user) {
        if (user.isVip()) {
            return (int) (price * 0.85);
        }
        return (int) (price * 0.95);
    }
}
```

```java
// java.util.concurrent.RejectedExecutionHandler

public interface RejectedExecutionHandler {
}

public static class AbortPolicy implements RejectedExecutionHandler {
}

public static class CallerRunsPolicy implements RejectedExecutionHandler {
}

public static class DiscardOldestPolicy implements RejectedExecutionHandler {
}

public static class DiscardPolicy implements RejectedExecutionHandler {
}
```

## 5 ç»„åˆ

```java
public class Main {
    class Driver {
        void drive() {
            // 100 è¡Œå¤æ‚ä»£ç  
        }

        void fixCar() {
            // 50 è¡Œå¤æ‚ä»£ç 
        }
    }

    class Doctor {
        void fixPatient() {
            // 30 è¡Œå¤æ‚ä»£ç 
        }
    }

    // ç»„åˆ Driver & Doctor
    class DoctorDriver {
        Driver driver;
        Doctor doctor;

        void driver() {
            driver.drive();
        }

        void fixCar() {
            driver.fixCar();
        }

        void fixPatient() {
            doctor.fixPatient();
        }
    }
}
```

### 5.1 ç»§æ‰¿ vs ç»„åˆ

- ç»§æ‰¿ => is-a
- ç»„åˆ => has-a

