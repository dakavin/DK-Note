
## 1、面试考点分析

本节考点为Redis内存的认知考察。

重点是知道数据到底是怎么存的，以及了解过期字典。

## 2、面试题

### 2.1 SET a b，这个数据的存储结构是怎么样的？

分析：
- 考察对内存存储的理解，在Redis中，存储是一个字典结构。

回答：
- Redis中存储的是字典结构，SET a b之后，a会放在字典的对应偏移位置（index），b作为对应的value进行存储。

### 2.2 SET a 100 ex 60之后，调用TTL a，此时这个过期信息是存储在哪里的？

分析：
- 考察是否知道过期信息的存储方式

回答：
- 如果添加了对键a的ttl，则会立马将其key添加到过期字典expires上，`并存储对应时间戳`

### 2.3 某个key有过期时间之后，那么它即在数据字典里，又在过期字典里，这是占了两份内存？（这样问的其实不多，但是这个知识点要知道）

分析：
- 字典Key的考察

回答：
- 无论是数据字典还是过期字典里面的Key对象，实际上存储的都是String对象指针，所以并不是会重复占用内容，Redis对内存的使用都是很珍惜的。