
## 1、面试题

### 1.1 Redis6.0之后引入了多线程，你知道为什么吗?

分析：
- 重点是时代发展，为了应对大流量业务

回答：
- 随着时代的发展，很多业务的请求量剧增，IO操作确实成为了瓶颈，比如`读取请求、发送回包`成为了性能提升的瓶颈，所以在维持单线程框架执行Redis指令的基础上引入了多线程IO操作

### 1.2 Redis6.0的多线程是默认开启的吗？

分析：
- 基础考察

回答：
- 不是，默认是关闭的，如果想要开启需要再redis.conf配置文件中修改

### 1.3 Redis6.0的多线程主要负责命令执行的那一块

分析：
- 考察多线程的定位

回答：
- `读取并解析指令以及回包`
- 单线程模式下是一个线程完成读取、解析、执行、将回包放入客户端缓冲区；
- 多线程模式下，会将不同的client放入`clients_pending_read任务队列`中，后续会通过Round-Robin轮询负载均衡策略把这些client分给其他IO线程和主线程进行读取和解析；
- 在回包的时候，也是利用Roung-Robin轮询负载均衡策略把`等待回包队列`中的任务连续均匀地分配给IO线程各自的本地FIFO任务队列和主线程自己，主线程轮询等待所有IO线程完成回包任务。

