---
æ–‡ç« æ ‡é¢˜: "[[6_STM32CubeMXå®žçŽ°HALç‚¹ç¯]]" 
æ–‡ç« ä½œè€…: Dakkk
æ–‡ç« æ¦‚è¦: |
  ä»‹ç»ä½¿ç”¨STM32CubeMXé…ç½®GPIOæŽ§åˆ¶LEDï¼Œä»ŽåŽŸç†å›¾åˆ†æžã€GPIOå·¥ä½œåŽŸç†åˆ°CubeMXé…ç½®å’ŒHALåº“å‡½æ•°ä½¿ç”¨çš„å®Œæ•´å…¥é—¨æ•™ç¨‹ã€‚
tags:
- "STM32"
- "STM32CubeMX"
- "GPIO"
- "HALåº“"
- "LEDæŽ§åˆ¶"
- "åµŒå…¥å¼å¼€å‘"
- "æŽ¨æŒ½è¾“å‡º"
- "å¼€æ¼è¾“å‡º"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[2-1_ä¼ ç»Ÿæ‰‹åŠ¨åˆ›å»ºå·¥ç¨‹æ–¹æ³•]]"
- "[[2-2_STM32CubeMXä»‹ç»]]"
- "[[3_ä¸åŒç¼–ç¨‹æ–¹å¼-å¯„å­˜å™¨ã€æ ‡å‡†åº“ã€HALåº“ã€LLåº“]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: åˆçº§ ðŸ’§
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:32:59
---
### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)





### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)




### åˆ†æžè¯´æ˜Ž

è¿™æ˜¯ä¸€ç¯‡STM32å…¥é—¨çº§æ•™ç¨‹"
- "ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨STM32CubeMXå›¾å½¢åŒ–å·¥å…·é…ç½®GPIOæ¥æŽ§åˆ¶LEDã€‚æ–‡ç« ä»ŽåŽŸç†å›¾åˆ†æžå¼€å§‹"
- "è¯¦ç»†è®²è§£äº†GPIOçš„å·¥ä½œåŽŸç†ï¼ˆåŒ…æ‹¬ä¿æŠ¤äºŒæžç®¡ã€ä¸Šä¸‹æ‹‰ç”µé˜»ã€æŽ¨æŒ½/å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼‰"
- "ç„¶åŽæ¼”ç¤ºäº†CubeMXçš„é…ç½®è¿‡ç¨‹å’ŒHALåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚å†…å®¹ç»“æž„æ¸…æ™°"
- "é€‚åˆSTM32åˆå­¦è€…å­¦ä¹ GPIOåŸºç¡€æ“ä½œå’ŒHALåº“ç¼–ç¨‹ã€‚"
ç›¸å…³æ–‡ç« :
- "[[7_GPIOè¾“å…¥æŒ‰é”®]]"
- "[[0_è¯¾ç¨‹å®Œæ•´å†…å®¹]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/06_ðŸ“•è®¾å¤‡æ ‘ä¸­æ–­çš„å±žæ€§æè¿° (æœ€å¸¸ç”¨)]]"
- "[[../../../06-ðŸ§ Linuxç³»ç»Ÿ/09-ðŸ—ï¸ Linuxè®¾å¤‡æ¨¡åž‹ä¸Žè®¾å¤‡æ ‘(é‡ç‚¹)/3_è®¾å¤‡æ ‘åŸºç¡€/07_è®¾å¤‡æ ‘ä¸­ GPIO ç›¸å…³å±žæ€§ (å®šä¹‰)]]"
- "[[1_æœ¬ç« ä»£ç åŠæ–‡ç« èŽ·å–]]"
æ–‡ç« åˆ†ç±»: "ðŸ”§ åµŒå…¥å¼å¼€å‘"
æ–‡ç« è·¯å¾„: "05-ðŸ”§ åµŒå…¥å¼å¼€å‘/02-ðŸš€ 32å•ç‰‡æœº/01-ðŸ“– STM32åŸºç¡€/6_STM32CubeMXå®žçŽ°HALç‚¹ç¯.md"
æ–‡ç« éš¾åº¦: ä¸­çº§ ðŸŒ³
ç›®å‰é˜¶æ®µ: âœ… å·²å®Œæˆ
é‡è¦æ€§: â­â­â­ é‡è¦æŠ€èƒ½
åˆ›å»ºæ—¶é—´: 2025-02-10 02:26:34
ä¿®æ”¹æ—¶é—´: 2025-05-27 23:05:39
---

## 1 åŽŸç†å›¾è¯´æ˜Ž

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ed3ba3500601be85d07b79893deca71f.png)

LEDå¤–æŽ¥ç”µæºï¼Œç®¡è„šæŽ§åˆ¶æ‹‰ä½Žï¼ˆç®¡è„šæ˜¯è¾“å‡ºçš„ï¼‰ï¼Œå½¢æˆç”µåŽ‹å·®ï¼Œé‚£ä¹ˆLEDå°±å¯ä»¥äº®
åä¹‹ï¼Œç®¡è„šæ‹‰é«˜ï¼Œè¾“å‡ºé«˜ç”µå¹³ï¼ŒLEDå°±æ˜¯ç­çš„
- PA4 ---> LED3
- PA5 ---> LED2
- PA6 ---> LED1
## 2 æ–°å»ºå·¥ç¨‹

æ‰“å¼€æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ProjectTemplatesï¼Œåœ¨å³ä¾§çš„PinOut Viewä¸­æ‰¾åˆ°PA6
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e5b1ca93cffa06ba757d3fc1bc1fb6d0.png)

è®¾ç½®PA6ä¸ºè¾“å‡ºæ¨¡å¼ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°PA6è¿™ä¸ªIOæ˜¯æ”¯æŒå¤šç§åŠŸèƒ½çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/7c070e0ef5858595e5d2ddede91141d2.png)

ä¾‹å¦‚ADCã€SPIã€TIMã€GPIOè¿™äº›åŠŸèƒ½ï¼Œä¸ŽèŠ¯ç‰‡æ‰‹å†Œæ˜¯ä¸€ä¸€å¯¹åº”çš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/5e70177eea86efab7ae910d1e7696fd2.png)

## 3 GPIOè¾“å‡ºå‚æ•°è¯´æ˜Ž

### 3.1 GPIOåŽŸç†è®²è§£

å…ˆäº†è§£åŽŸç†éƒ¨åˆ†ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ï¼Œå¯ä»¥çœ‹åˆ°GPIOéƒ¨åˆ†çš„ç»“æž„å›¾ï¼š
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0873e64fa3ec1cc63815eb404b238a87.png)

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/511014e4925846c7f660841ff037d393.png)

**ä¿æŠ¤äºŒæžç®¡ï¼š**
- å›¾ä¸­çš„ä¿æŠ¤æ–¹å¼æ˜¯`é’³ä½äºŒæžç®¡ä¿æŠ¤`
	- å½“è¾“å…¥ç”µåŽ‹ä½ŽäºŽVSSçš„æ—¶å€™ï¼Œä¸‹æ–¹äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡ä½Žçš„ç”µåŽ‹æ³„æ”¾åˆ°åœ°
	- å½“è¾“å…¥ç”µåŽ‹é«˜äºŽVDD_FTï¼ˆä¸€èˆ¬æ˜¯ç³»ç»Ÿç”µåŽ‹ï¼‰çš„æ—¶å€™ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€šï¼Œå°†è¿‡é«˜çš„ç”µåŽ‹æ³„æ”¾åˆ°ç”µæºè½¨
- IOå¼•è„šä¸Šä¸‹ä¸¤è¾¹ä¸¤ä¸ªäºŒæžç®¡ç”¨äºŽé˜²æ­¢å¼•è„šå¤–éƒ¨è¿‡é«˜ã€è¿‡ä½Žçš„ç”µåŽ‹è¾“å…¥ï¼Œé˜²æ­¢ä¸æ­£å¸¸ç”µåŽ‹å¼•å…¥èŠ¯ç‰‡çƒ§æ¯
- å½“å¼•è„šç”µåŽ‹é«˜äºŽVDD_FTæ—¶ï¼Œä¸Šæ–¹çš„äºŒæžç®¡å¯¼é€š
- å½“å¼•è„šç”µåŽ‹ä½ŽäºŽVSSæ—¶ï¼Œä¸‹æ–¹çš„äºŒæžç®¡å¯¼é€š

**ä¸Šæ‹‰ã€ä¸‹æ‹‰ç”µé˜»ï¼š**
- æŽ§åˆ¶å¼•è„šé»˜è®¤çŠ¶æ€çš„ç”µåŽ‹ï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼ˆä¸Šæ‹‰ã€ä¸‹æ‹‰ã€æµ®ç©º-æ¨¡æ‹Ÿè¾“å…¥ï¼‰
- å¼€å¯ä¸Šæ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºé«˜ç”µå¹³
- å¼€å¯ä¸‹æ‹‰çš„æ—¶å€™å¼•è„šé»˜è®¤ç”µåŽ‹ä¸ºä½Žç”µå¹³
  ![image.png|200](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/74154a2b944b8dd12ab83c20cfe93375.png)


**è¾“å‡ºæ¨¡å¼ï¼š**
- æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ä¸‹ï¼ŒP-MOSå’ŒN-MOSéƒ½æ­£å¸¸å·¥ä½œ
- å¼€æ¼è¾“å‡ºæ¨¡å¼ä¸‹ï¼Œåªæœ‰ä¸‹é¢çš„N-MOSå·¥ä½œï¼Œå³GPIOæ— æ³•è¾“å‡ºé«˜ç”µå¹³ï¼Œéœ€è¦å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»
- P-MOSå’ŒN-MOSæ˜¯ä¸¤ä¸ªäºŒæžç®¡

**è¾“å‡ºæŽ§åˆ¶ç±»ä¼¼ä¸ºä¸€ä¸ªéžé—¨**

**æŽ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒP-MOSå…³é—­ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒP-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºVDD

**å¼€æ¼è¾“å‡ºæ¨¡å¼ï¼š**
- è¾“å‡ºå¯„å­˜å™¨ä¸º0æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º1ï¼Œæ­¤æ—¶N-MOSæ‰“å¼€ï¼ŒIOè¾“å‡ºä½Ž
- è¾“å‡ºå¯„å­˜å™¨ä¸º1æ—¶ï¼Œç»è¿‡è¾“å‡ºæŽ§åˆ¶æ¨¡å—ï¼Œè½¬ä¸º0ï¼Œæ­¤æ—¶N-MOSå…³é—­ï¼ŒIOä¸ºé«˜é˜»æ€

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/2790b83e2cfed19b250023af6d5e3d3b.png)

### 3.2 GPIOä½¿ç”¨è®²è§£

`GPIO output level:`
- ä¸Šç”µåŽçš„é»˜è®¤è¾“å‡ºç”µå¹³ï¼Œæœ‰lowå’Œhighä¸¤ä¸ªé€‰é¡¹
- å› ä¸ºLEDé˜´æžè¿žæŽ¥å•ç‰‡æœºå¼•è„šï¼Œè®¾ç½®é«˜ç”µå¹³æ—¶ï¼Œä¸Šç”µåŽLEDæ˜¯ç†„ç­çŠ¶æ€çš„

`GPIO mode:`
- æŽ¨æŒ½è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºä¸¤ç§æ¨¡å¼é€‰æ‹©
- åŒºåˆ«ä¸»è¦åœ¨äºŽï¼š
	- æŽ¨æŒ½è¾“å‡º1ä»£è¡¨VCCï¼Œ0ä»£è¡¨GND
	- å¼€æ¼è¾“å‡º1ä»£è¡¨é«˜é˜»æ€ï¼Œ0ä»£è¡¨GND
	- ç®€å•æ€»ç»“--->å¦‚æžœä¸éœ€è¦VCCçš„è¾“å‡ºç”µåŽ‹ï¼Œæˆ–è€…æ˜¯çº¿ä¸ŽåŠŸèƒ½ï¼ˆI2Cã€SMBUSç±»æ€»çº¿å ç”¨åŽŸç†ï¼‰ï¼Œåˆ™é€‰æ‹©å¼€æ¼è¾“å‡ºï¼Œå¦åˆ™é€‰æ‹©æŽ¨æŒ½è¾“å‡º
- åˆ†æžä¸€æ³¢ï¼š
	- å½“å¼€æ¼è¾“å‡º1ï¼ŒIOä¸ºé«˜é˜»æ€ï¼ŒIOç”µåŽ‹ç”±å¤–éƒ¨ä¸Šæ‹‰ç”µé˜»å†³å®šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨æŽ¥ä¸Šæ‹‰ç”µé˜»ï¼Œä¸Šæ‹‰ç”µæºä¸º5Vï¼Œå®žçŽ°IOæŽ§åˆ¶5Vè¾“å‡ºçš„æ•ˆæžœ
	- è‹¥æœ‰å¾ˆå¤šä¸ªå¼€æ¼æ¨¡å¼å¼•è„šè¿žæŽ¥åˆ°ä¸€èµ·æ—¶ï¼Œåªæœ‰æ‰€æœ‰å¼•è„šéƒ½è¾“å‡ºé«˜é˜»æ€ï¼Œæ‰ç”±ä¸Šæ‹‰ç”µé˜»æä¾›é«˜ç”µå¹³
	- è‹¥å…¶ä¸­ä¸€ä¸ªå¼•è„šä¸ºä½Žç”µå¹³ï¼Œé‚£çº¿è·¯ç›¸å½“äºŽæŽ¥åœ°ï¼Œä½¿å¾—æ•´ä¸ªçº¿è·¯éƒ½ä¸ºä½Žç”µå¹³ï¼Œè¿™ä¹Ÿæ˜¯I2Cã€SMBusç­‰æ€»çº¿åˆ¤æ–­æ€»çº¿å ç”¨çŠ¶æ€çš„åŽŸç†ï¼ˆæŸä¸ªä»Žæœºè¦å‘ä¿¡å·æ—¶ï¼Œå…ˆæ£€æµ‹IOçŠ¶æ€ï¼Œé«˜ç”µå¹³å¯ä»¥å‘ï¼Œä½Žç”µå¹³è¯´æ˜Žæœ‰è®¾å¤‡åœ¨å ç”¨æ€»çº¿ï¼Œå°±ä¸èƒ½å‘ï¼‰
- æ‰€ä»¥ï¼Œå¯¹äºŽLEDæ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©æŽ¨å…è¾“å‡ºæ¨¡å¼å³å¯

`GPIO Pull-up / Pull-down:`
- GPIOä¸Šä¸‹æ‹‰è®¾ç½®
- å½“GPIOè¢«é…ç½®ä¸ºæŽ¨æŒ½è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„ç¨³å®šæ€§
- å½“GPIOè¢«é…ç½®ä¸ºå¼€æ¼è¾“å‡ºæ—¶ï¼Œä¸Šä¸‹æ‹‰å¯ä»¥æŽ§åˆ¶è¾“å‡ºç”µå¹³çš„çŠ¶æ€ã€‚åœ¨æ²¡æœ‰ä¸Šä¸‹æ‹‰çš„æƒ…å†µä¸‹ï¼Œå¼€æ¼è¾“å‡ºçš„GPIOä¼šå¤„äºŽé«˜é˜»æ€ï¼Œè¾“å‡ºç”µå¹³ç”±å¤–éƒ¨ä¸Šä¸‹æ‹‰å†³å®šã€‚é€šè¿‡é…ç½®ä¸Šæ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽé«˜ç”µå¹³çŠ¶æ€ï¼Œé€šè¿‡é…ç½®ä¸‹æ‹‰ç”µé˜»å¯ä»¥ä½¿GPIOå¤„äºŽä½Žç”µå¹³çŠ¶æ€
- **å› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯æŽ¨æŒ½è¾“å‡ºï¼Œæ‰€ä»¥è®¾ç½®ä¸Šæ‹‰å³å¯**

`Maxinum output speed:`
- æœ€å¤§çš„è¾“å‡ºé€Ÿåº¦ï¼Œä¸€èˆ¬é€‰æ‹©lowå°±å¯ä»¥å•¦
- é…ç½®é«˜é€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡é«˜ï¼Œå™ªéŸ³å¤§ï¼ŒåŠŸè€—é«˜
	- å¦‚ï¼šé…ç½®SPIã€CANå¼•è„šï¼Œè¦æ±‚é€šä¿¡ç¨³å®šï¼Œé€Ÿåº¦è¿‡ä½Žä¼šé€ æˆè¾“å‡ºå¤±çœŸï¼Œé€šä¿¡å¼‚å¸¸
- é…ç½®ä½Žé€Ÿï¼š
	- è¾“å‡ºé¢‘çŽ‡ä½Žï¼Œå™ªéŸ³å°ï¼ŒåŠŸè€—ä½Žï¼Œæé«˜ç³»ç»ŸEMIï¼ˆç”µç£å¹²æ‰°ï¼‰æ•ˆèƒ½
	- ä½ŽåŠŸè€—äº§å“ä¼šé€‰æ‹©ä½Žï¼Œå®žé™…åº”ç”¨ä¸­ï¼Œæ»¡è¶³è¦æ±‚çš„æƒ…å†µä¸‹é€‰ä½Žä¸é€‰é«˜
- **è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½Žé€Ÿå³å¯**

`User Label:`
- ç”¨æˆ·æ ‡ç­¾ï¼Œç»™å¼•è„šè®¾ç½®åç§°ï¼Œå¦‚æžœé‡åˆ°æ ‡ç­¾æœªç”Ÿæˆï¼Œå¯ä»¥å…³é—­æ‰€æœ‰è½¯ä»¶é‡æ–°ç”Ÿæˆ
- **è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸ºLED1ï¼Œå¯ä»¥æ–¹ä¾¿åŽç»­ç¼–å†™ä»£ç **

ç„¶åŽè®¾ç½®ç¡¬ä»¶å¯¹åº”çš„å‚æ•°

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/0f06a7fa321f1dbde72bc4d3361a2591.png)

## 4 ä»£ç ç”Ÿæˆå’Œç†è§£

ç„¶åŽç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œé‡æ–°æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€main.cï¼Œè¿™é‡Œå°±æ˜¯æ•´ä¸ªå·¥ç¨‹çš„å…¥å£äº†
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/be8df0e7bed4206e99f434960cff0432.png)

`HAL_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–HALåº“ç›¸å…³é…ç½®

`SystemClock_Config();` ï¼šç”¨äºŽåˆå§‹åŒ–èŠ¯ç‰‡æ—¶é’Ÿé…ç½®

`MX_GPIO_Init();` ï¼šç”¨äºŽåˆå§‹åŒ–GPIOé…ç½®

è·³è½¬MX_GPIO_Init(),åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢çš„é…ç½®æ˜¯ç”±CUBEMXä¸­çš„é…ç½®ç”Ÿæˆçš„
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/ce00de0af335e04e9aee25c2f3064cf4.png)
## 5 è®²è§£å’Œç¼–å†™ä»£ç 

### 5.1 æŽ¥å£è®²è§£

ä¸»è¦æ˜¯è®²è§£MX_GPIO_Init()å‡½æ•°ä¸­çš„è°ƒç”¨

- HAL_GPIO_WritePinå‡½æ•°
  ![image.png|500|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/d4065733c4f8163c6247f6cee84ade81.png)
```c
void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState)
/*
GPIOx = GPIOA / LED1_GPIO_Port
GPIO_PIN = GPIO_PIN_6 / LED1_Pin
PinState = GPIO_PIN_SET(å¯¹åº”é«˜ç”µå¹³ï¼ŒRESETä¸ºä½Žç”µå¹³)
å¯¹åº”åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®GPIOA6è¾“å‡ºé«˜ç”µå¹³
*/
```

- ç»“æž„ä½“GPIO_InitTypeDef
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/08fc67137d18c037e2632f56f4790c81.png)![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/00e548b671824bf61a2d7e7b1303ca45.png)
- HAL_GPIO_Initå‡½æ•°
	-  æœ€åŽåˆå§‹åŒ–GPIOA GPIO_PIN_6ä¸ºæŽ¨æŒ½è¾“å‡ºï¼Œä¸Šæ‹‰ï¼Œé€Ÿåº¦ä¸ºä½Žé€Ÿ


**å¦‚ä½•æŽ§åˆ¶è¿™ä¸ªIOå£è¿›è¡Œè¾“å‡ºå‘¢ï¼Ÿ**
- é€‰æ‹©HAL_GPIO_Initå‡½æ•°ï¼Œæ‰¾åˆ°å…¶å®šä¹‰çš„cæ–‡ä»¶
- ç„¶åŽåœ¨cæ–‡ä»¶ä¸­ï¼Œå³é”®è·³è½¬åˆ°hæ–‡ä»¶
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/8450dc28dddc2dfa04da72d9279f6c1d.png)
- å¾€ä¸‹æ‹‰ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰çš„ä¸€äº›å‡½æ•°ï¼ˆå’ŒGPIOæ“ä½œç›¸å…³çš„æ‰€æœ‰å‡½æ•°ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/39d176f6282798fdeb5821d199f8d14e.png)
**æ³¨æ„ï¼š**
- åœ¨gpio.cæ–‡ä»¶ä¸­HAL_GPIO_WritePinä¸­å‚æ•°æ²¡æœ‰æ›´æ¢ä¸ºå¯¹åº”çš„LED1å®å®šä¹‰ï¼ˆåœ¨main.hæ–‡ä»¶ä¸­æœ‰ï¼‰
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/e3b02013be4e680de85416381aaf4e42.png)
### 5.2 ä»£ç ç¼–å†™

**æŽ§åˆ¶GPIOè¾“å‡º**
- ä½¿ç”¨å‡½æ•°HAL_GPIO_WritePinï¼Œæ¥è®¾ç½®Pinè¾“å‡ºé«˜ä½Žç”µå¹³
- `void HAL_GPIO_WritePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_RESET);
		HAL_Delay(500);
		HAL_GPIO_WritePin(LED1_GPIO_Port,LED1_Pin,GPIO_PIN_SET);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

- å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨HAL_GPIO_TogglePinå‡½æ•°æŽ§åˆ¶è¾“å‡ºç”µå¹³ç¿»è½¬
- `void HAL_GPIO_TogglePin(GPIO_TypeDef *GPIOx, uint16_t GPIO_Pin);`
```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```

æœ€åŽç¼–è¯‘ã€çƒ§å½•å’Œè¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦

## 6 å¤šä¸ªLEDæŽ§åˆ¶

å¦‚æžœå¸Œæœ›æ‰€æœ‰ç¯åŒæ—¶é—ªçƒï¼Œåˆ™åŒæ—¶æ·»åŠ å¤šä¸ªIO
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/6a14207ef00eb8871fc1b0b214ca0617.png)

```c
int main(void)
{
  // ....
  while (1)
  {
    /* USER CODE BEGIN 3 */
		HAL_GPIO_TogglePin(LED1_GPIO_Port,LED1_Pin);
		HAL_GPIO_TogglePin(LED2_GPIO_Port,LED2_Pin);
		HAL_GPIO_TogglePin(LED3_GPIO_Port,LED3_Pin);
		HAL_Delay(500);
  }
  /* USER CODE END 3 */
}
```
## 7 è¡¥å……ï¼šå¤ç”¨è¾“å‡ºåŠŸèƒ½

åœ¨gpioçš„hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¾“å…¥ï¼ˆGPIO_MODE_INPUTï¼‰ã€ä¸¤ç§è¾“å‡ºåŠŸèƒ½ï¼ˆGPIO_MODE_OUTPUT_PPã€GPIO_MODE_OUTPUT_ODï¼‰ï¼Œé‚£ä¹ˆè¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/625a70ea851362e0b47c77776d46a10e.png)

- å…¶ä»–çš„æ˜¯å¤ç”¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ï¼Œå¤ç”¨åŠŸèƒ½çš„é…ç½®
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/595d65c660db206d9af493780c6f2c48.png)

å¤ç”¨åŠŸèƒ½è¾“å‡ºï¼šä½¿ç”¨è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œ**ä¸Šé¢è¾“å‡ºå¯¹åº”çš„è¿žæŽ¥ç‚¹å°±ä¼šè¢«æ–­å¼€**

æ¥è‡ªç‰‡ä¸Šå¤–è®¾ï¼šå½“æˆ‘ä»¬æƒ³è¦è¿™ä¸ªå¼•è„šä½œä¸ºI2Cæˆ–è€…SPIçš„æŽ¥å£ï¼Œè¿™æ—¶I2Cæˆ–SPIå°±æ˜¯ç‰‡ä¸Šå¤–è®¾ï¼Œè¿™ä¸ªæ—¶å€™é…ç½®è¯¥IOåŠŸèƒ½çš„æ—¶å€™ï¼Œå°±è¦**å¿…é¡»**ç”¨å¤ç”¨åŠŸèƒ½è¿›è¡Œé…ç½®
- å¯ä»¥ç†è§£ä¸ºGPIOå£è¢«ç”¨ä½œç¬¬äºŒåŠŸèƒ½æ—¶çš„é…ç½®æƒ…å†µï¼Œå³å¹¶éžä½œä¸ºé€šç”¨IOå£ä½¿ç”¨

**ä¸¤ç§æ¨¡å¼è¿›è¡Œå¤ç”¨**
- å¤ç”¨å¼€æ¼è¾“å‡ºï¼ˆI2Cï¼‰
	- å¤ç”¨å¼€æ¼è¾“å‡ºå’Œå¼€æ¼è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨
- å¤ç”¨æŽ¨æŒ½è¾“å‡ºï¼ˆSPIã€UARTã€CANï¼‰
	- å¤ç”¨æŽ¨æŒ½è¾“å‡ºå’ŒæŽ¨æŒ½è¾“å‡ºåŽŸç†ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºŽè¾“å‡ºæŽ§åˆ¶æºä¸åŒï¼Œå‰è€…æ˜¯é€šè¿‡å¤–è®¾ï¼ŒåŽè€…æ˜¯é€šè¿‡CPUå†™å¯„å­˜å™¨

**å¯ä»¥åœ¨èŠ¯ç‰‡æ‰‹å†Œï¼Œçœ‹åˆ°å¤ç”¨åŠŸèƒ½æ—¶ï¼Œå¯¹åº”çš„è¡¨æ ¼**
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/02/c9e37c5c9fb3492d0f1e0317b7ccef22.png)



