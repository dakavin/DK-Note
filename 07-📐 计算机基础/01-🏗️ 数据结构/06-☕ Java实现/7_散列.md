
## 1 æ•£åˆ—è¡¨

### 1.1 ç”±æ¥

- `æ•°ç»„`
	- å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡è¿…é€Ÿè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼ˆæ•ˆç‡é«˜ï¼‰
	- å¢åŠ å’Œåˆ é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼ˆæ•ˆç‡ä½ï¼‰
- `é“¾è¡¨`
	- éœ€è¦ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ä¸€ç›´æ‰¾åˆ°éœ€è¦çš„å…ƒç´ ï¼ˆæ•ˆç‡ä½ï¼‰
	- å¢åŠ å’Œåˆ é™¤ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œåªéœ€è¦æ”¹åŠ¨å…ƒç´ çš„å¼•ç”¨å³å¯ï¼ˆæ•ˆç‡é«˜ï¼‰

- `é—®é¢˜ï¼šæœ‰æ²¡æœ‰ä¸€ç§ç»“æ„å¯ä»¥ç»“åˆä¸¤è€…çš„ä¼˜ç‚¹å‘¢ï¼Ÿ`
- æ•£åˆ—è¡¨å¯ä»¥ç»¼åˆä¸Šé¢çš„ä¼˜ç‚¹ï¼

- `ç®€å•çš„æ•£åˆ—è¡¨`
	- é“¾è¡¨æ•°ç»„ï¼Œå³æ•°ç»„æ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªé“¾è¡¨
	- é€šè¿‡è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰ï¼Œç¡®å®šå…¶åœ¨æ•°ç»„çš„ä½ç½®
	- ç„¶åé€šè¿‡é“¾è¡¨é“¾æ¥æ•°ç»„åŒä¸€ä¸ªä½ç½®çš„å¤šä¸ªå…ƒç´ 

### 1.2 é‡è¦å‚æ•°

- `ä»¥åˆ†ç¦»é“¾è¡¨ä¸ºä¾‹`

- æ•£åˆ—å‡½æ•°
	- é€šè¿‡è®¡ç®—æŸä¸ªå¼•ç”¨ç±»å‹ï¼Œå¾—å‡ºä¸€ä¸ªå€¼ï¼ˆå“ˆå¸Œå€¼ï¼‰
	- hashcode()æ–¹æ³•å°±æ˜¯è¿™æ ·ä¸€ä¸ªå‡½æ•°/æ–¹æ³•
	- å†å°†è¿™ä¸ªå€¼ä¸æ•°ç»„è¿›è¡Œä¸€å®šçš„è¿ç®—ï¼Œå¾—åˆ°å…¶åœ¨æ•°ç»„ä¸­çš„ä½ç½®
	- è¦æ±‚å…¶ä½ç½®æ˜¯å°½é‡å‡åŒ€çš„

- æ•°ç»„å®¹é‡
	- å¦‚æœä¸€å¼€å§‹æ•°ç»„å®¹é‡å¤ªå¤§ï¼Œé‚£ä¹ˆç©ºé—´å®¹æ˜“æµªè´¹
	- æ‰€ä»¥ä¸€èˆ¬å®šä¹‰ä¸€ä¸ªåˆé€‚çš„å¤§å°
	- å½“å¤ªå°çš„æ—¶å€™ï¼Œå°±éœ€è¦æ‰©å®¹

- è´Ÿè½½å› å­ï¼ˆloadfactorï¼‰
	- é’ˆå¯¹äºæ•°ç»„æ‰©å®¹
	- å¦‚æœå®é™…å­˜å‚¨ä¸ªæ•°<æ•°ç»„é•¿åº¦\*è´Ÿè½½å› å­ (size<arr.length*\loadfactor)
	- é‚£ä¹ˆæ•°ç»„å°±å¼€å§‹æ‰©å®¹


### 1.3 åˆ†ç¦»é“¾è¡¨æ³•ï¼ˆä½¿ç”¨æ•°ç»„åŠ é“¾è¡¨ï¼‰

#### 1.3.1 ä»£ç å®ç°

- `èŠ‚ç‚¹ç±»`
```java
public class Unit {  
    int data;  
    Unit nextUnit;  
  
    public Unit(int data) {  
        this.data = data;  
    }  
}
```

- `å®ç°ç±»`
```java
public class HashingTable {  
    Unit[] array;  
    int size;//æ•°ç»„çš„é•¿åº¦  
    double loadFactor = 0.75;  
    int length;//æ•£åˆ—è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°  
  
    public HashingTable(int initialSize) {  
        array = new Unit[initialSize];  
        size = initialSize;  
    }  
  
    void rehash(){  
        length = 0;  
        size *=2;  
        Unit[] temp = array;  
        array = new Unit[size];  
        for (Unit unit:temp){  
            while (unit!=null){  
                insert(unit.data);  
                unit = unit.nextUnit;  
            }  
        }  
    }  
  
    boolean insert(int data) {  
        if (length*1.0f/size>=loadFactor)  
            rehash();  
        if (contains(data))  
            return false;  
//        int i = data % array.length; //åº”è¯¥å†™size  
        int i = data % size;  
        Unit insertUnit = new Unit(data);  
        Unit temp = array[i];  
        array[i] = insertUnit;  
        array[i].nextUnit = temp;  
        length++;  
        return true;  
    }  
  
    boolean contains(int data) {  
//        int i = data % array.length; //åº”è¯¥å†™size  
        int i = data % size;  
        Unit temp = array[i];  
        if (temp==null)  
            return false;  
        //è¿™ä¸ªå¾ªç¯å‡ºæ¥çš„tempï¼Œå…¶dataå°±æ˜¯å½¢å‚ä¼ å…¥çš„data  
        while (temp.nextUnit != null) {  
            if (temp.data == data) {  
                return true;  
            }  
            temp = temp.nextUnit;  
            /**  
             * æ³¨æ„ï¼š  
             * â‘ æ­¤å¥æ”¾åœ¨ifåé¢ï¼Œåˆ™æ²¡æœ‰é“¾è¡¨æœ€åä¸€ä¸ªå€¼çš„æ¯”è¾ƒ  
             * â‘¡æ­¤å¥æ”¾åœ¨ifå‰é¢ï¼Œåˆ™æ²¡æœ‰é“¾è¡¨ç¬¬ä¸€ä¸ªå€¼çš„æ¯”è¾ƒ  
             * æ‰€ä»¥è¦è¡¥å……ä¸€ä¸ªæ¯”è¾ƒ  
             */  
        }  
        //è¡¥å……â‘   
        if (data == temp.data)  
            return true;  
        return false;  
    }  
  
    boolean remove(int data) {  
        if (size == 0 || !contains(data)) {  
            return false;  
        }  
        int i = data % size;  
        if (data == array[i].data) {  
            array[i] = null;  
            size = 0;  
            length = 0;  
        }  
  
        //æ‰¾åˆ°åˆ é™¤çš„å…ƒç´   
        Unit removeUnit = findUnit(data);  
        //æ‰¾åˆ°åˆ é™¤å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´ ï¼ˆå•å‘é“¾è¡¨ï¼‰  
        Unit preUnit = findPreUnit(data);  
        //å‰ä¸€ä¸ªå…ƒç´ æŒ‡å‘å…¶å­èŠ‚ç‚¹  
        if (preUnit==null)  
            array[i] = removeUnit.nextUnit;  
        elsepreUnit.nextUnit = removeUnit.nextUnit;  
        //å¿½ç•¥åˆ é™¤å…ƒç´ ç½®ç©ºï¼ŒJVMä¼šå›æ”¶æ²¡æœ‰å¼•ç”¨çš„å˜é‡  
        length--;  
        return true;  
    }  
  
    Unit findUnit(int data) {  
        int i = data % size;  
        Unit temp = array[i];  
        while (temp.nextUnit != null) {  
            if (data == temp.data) {  
                return temp;  
            }  
            temp = temp.nextUnit;  
            //æ³¨æ„ï¼šè‹¥æ­¤å¥åœ¨ifå‰é¢ï¼Œåˆ™ä¼šæ¼æ‰ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ï¼åœ¨ifåé¢ï¼Œåˆ™ä¼šæ¼æ‰æœ€åä¸€ä¸ªå…ƒç´   
        }  
        if (data == temp.data)  
            return temp;  
        return null;  
    }  
  
    Unit findPreUnit(int data) {  
        int i = data % size;  
        Unit temp = array[i];  
        while (temp.nextUnit != null) {  
            if (data == temp.nextUnit.data) {  
                return temp;  
            }  
            temp = temp.nextUnit;  
        }  
        return null;  
    }  
  
    //ä»å·¦åˆ°å³ï¼Œä¸Šåˆ°ä¸‹è¿›è¡Œéå†  
    void show(){  
        for (Unit unit : array) {  
            if (unit != null && unit.nextUnit == null){  
                System.out.print(unit.data + " ");  
            }else if(unit != null){  
                Unit temp = unit;  
                System.out.print(temp.data + " ");  
                while (temp.nextUnit!=null){  
                    temp = temp.nextUnit;  
                    System.out.print(temp.data + " ");  
                }  
            }  
        }  
        System.out.println();  
    }  
}
```


#### 1.3.2 æ—¶é—´å¤æ‚åº¦

- ä»¥æŸ¥æ‰¾/containsåˆ†ææ—¶é—´å¤æ‚åº¦
	- æœ€åçš„æƒ…å†µï¼šé“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)
	- å¹³å‡æ—¶é—´å¤æ‚åº¦
		- å‡è®¾æ•°ç»„é•¿åº¦ä¸ºMï¼Œæ•£åˆ—è¡¨å…±æœ‰Nä¸ªå…ƒç´ 
		- é‚£ä¹ˆå¹³å‡æ¯ä¸ªé“¾è¡¨æœ‰N/Mä¸ªå…ƒç´ ï¼Œå‡è®¾$â–²=N/M$
		- æ‰€ä»¥å¹³å‡è·å¾—é“¾è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æœŸæœ›ä¸º $(1+2+3+4+...+â–²)/â–²$
		- ç»“æœä¸º$(1+â–²)/2$
		- ä¸€æ¬¡æˆåŠŸçš„æŸ¥æ‰¾éœ€è¦çš„æ¬¡æ•°ä¸º $1+(1+â–²)/2$
		- ä¸€æ¬¡ä¸æˆåŠŸçš„æŸ¥æ‰¾éœ€è¦çš„æ¬¡æ•°ä¸º $1+â–²$

- æ•£åˆ—è¡¨çš„ä¸€æ¬¡æˆåŠŸæŸ¥æ‰¾çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯O(1)çš„ï¼Œåˆ†æå¦‚ä¸‹ï¼š
	- ä¸€æ¬¡æˆåŠŸçš„æŸ¥æ‰¾èŠ±è´¹ $1+(1+â–²)/2 = 1.5 + 0.5 * â–²$
	- å‡å¦‚æ•£åˆ—è¡¨çš„åŠ è½½å› å­ä¸º0.5ï¼Œé‚£ä¹ˆæ— è®ºä½•æ—¶ $â–²<= 0.5$
	- æ‰€ä»¥æŸ¥æ‰¾èŠ±è´¹æ—¶é—´ä¸º $1.5 + 0.5 * â–² <= 1.75$
	- æ‰€ä»¥ç†è§£ä¸ºä¸€ä¸ªå¸¸é‡æŸ¥æ‰¾çš„

## 2 ä¸ç”¨é“¾è¡¨çš„æ•£é“¾è¡¨ 

### 2.1 çº¿æ€§æ¢æµ‹

#### 2.1.1 å®šä¹‰

- æœ‰ä¸€ä¸ªæ•£åˆ—å‡½æ•° hash(x) å’Œä¸€ä¸ªçº¿æ€§è§£å†³å†²çªå‡½æ•° f(i),f(0)=0
- åˆ©ç”¨ hash(x) å’Œ f(i) ç»„åˆæˆä¸€ä¸ª h(x,i) çš„å‡½æ•°

- ç‰¹ç‚¹ï¼šæœ‰å¯èƒ½å‘ç”Ÿèšé›†æƒ…å†µçš„ï¼Œå³å…ƒç´ æ˜¯ä¸€å—ä¸€å—èšé›†çš„

#### 2.1.2 ä¸¾ä¾‹

- hash(x) = x
- f(i) = i
- h(x,i) = (hash(x)+f(i)) % size = index
- ç¬¬ä¸€æ¬¡æ’å…¥ä¸€ä¸ªæ•°çš„æ—¶å€™f(0)=0ï¼Œå¦‚æœindexå¤„æœ‰å…ƒç´ ï¼Œå°±ç»§ç»­è¿ç®—ï¼Œè¿™æ—¶f(1)=1ï¼Œä¾æ¬¡ç±»æ¨

- è¯´æ˜
- å¦‚æœæ²¡æœ‰ç©ºçš„ä½ç½®ï¼Œå¯èƒ½ä¼šæ’å…¥å¤±è´¥
- æŸ¥æ‰¾çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä¾æ¬¡ä¸f(i)ï¼Œæ¯æ¬¡ i++ï¼Œè¿›è¡Œè¿ç®—
	- æƒ…å†µ1ï¼šå¦‚æœæœ‰å…ƒç´ ï¼Œä¸”ä¸æ˜¯æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™ç»§ç»­è¿ç®—
	- æƒ…å†µ2ï¼šå¦‚æœæœ‰å…ƒç´ ï¼Œä¸”æ˜¯æŸ¥æ‰¾çš„å…ƒç´ ï¼Œè¿”å›
	- æƒ…å†µ3ï¼šå¦‚æœæ²¡æœ‰å…ƒç´ ï¼Œè¿”å›

#### 2.1.3 æ—¶é—´å¤æ‚åº¦ï¼ˆè¾ƒéš¾ï¼‰

- å¹³å‡æ—¶é—´å¤æ‚åº¦åˆ†æ---æŠ½è±¡ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„æ¨¡å¼ï¼ˆå†²çªå‡½æ•°æ˜¯éšæœºçš„ï¼‰

- å‡è®¾**è£…å¡«å› å­æ˜¯Î»**ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰1-Î»æ¦‚ç‡çš„ç©ºä½ç½®
- æˆ‘ä»¬å¹³å‡éœ€è¦ 1 / ï¼ˆ1-Î»ï¼‰æ¬¡ æ¥æ‰¾åˆ°ç©ºä½ç½®
- éšç€å…ƒç´ çš„å¢åŠ ï¼ŒÎ»ä¼šè¶Šæ¥è¶Šå°
- æ‰€ä»¥å¯¹aæ±‚å¹³å‡å€¼( f0-Î» 1/(1-Î») dÎ») / Î» = f(Î»)

- **çº¿æ€§æ¢æµ‹æ˜¯ä¸€ä¸ªæ¯”ç®€å•æ¨¡å‹æ›´å·®çš„æ¨¡å‹ï¼Œæ‰€ä»¥æœ€ç»ˆå¾—å‡ºï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨çº¿æ€§æ¢æµ‹ï¼Œæœ€å¥½ä¿è¯Î»ä¸€ç›´å°äº0.5**

#### 2.1.4 ä»£ç å®ç°

- ç•¥

### 2.2 å¹³æ–¹æ¢æµ‹æ³•

- $f(i)=i^2$

- è®©å†²çªå‡½æ•°é‡‡å–2æ¬¡æ–¹çš„æ–¹æ³•ï¼Œå¯ä»¥è§£å†³çº¿æ€§æ¢æµ‹çš„ä¸€æ¬¡èšé›†é—®é¢˜ã€‚ä½†åŒæ ·ä¼šæœ‰äºŒæ¬¡èšé›†çš„é—®é¢˜

### 2.3 åŒæ•£åˆ—

- $f(i)=i*hash2(x);$

## 3 HashMapæºç åˆ†æ

- [[../../../../02-ğŸ’» ç¼–ç¨‹è¯­è¨€/01-â˜• JavaæŠ€æœ¯æ ˆ/05-ğŸ’¡ å®ç”¨æŠ€å·§/2_Mapçš„æºç åˆ†æ]]

