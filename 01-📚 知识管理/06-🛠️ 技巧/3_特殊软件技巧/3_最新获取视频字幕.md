# Whisper-WebUI å®Œæ•´ä½¿ç”¨æµç¨‹

## 1 ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Whisper-WebUI** æ˜¯åŸºäºOpenAI Whisperçš„Webç•Œé¢ç‰ˆæœ¬ï¼Œä½¿ç”¨Gradioæ„å»ºï¼Œæ”¯æŒè§†é¢‘è½¬å­—å¹•åŠŸèƒ½ã€‚

é¡¹ç›®åœ°å€ï¼šhttps://github.com/jhj0517/Whisper-WebUI

## 2 ğŸ› ï¸ å®‰è£…æ­¥éª¤

### 2.1 æ–¹æ³•ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/jhj0517/Whisper-WebUI.git
cd Whisper-WebUI

# 2. ä½¿ç”¨Dockeræ„å»º
docker build -t whisper-webui .

# 3. è¿è¡Œå®¹å™¨
docker run -d -p 7860:7860 --gpus all whisper-webui
```

### 2.2 æ–¹æ³•äºŒï¼šæœ¬åœ°å®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/jhj0517/Whisper-WebUI.git
cd Whisper-WebUI

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ– venv\Scripts\activate  # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. è¿è¡Œåº”ç”¨
python app.py
```

## 3 ğŸ”§ é…ç½®Google Cloud Speech-to-Text API

### 3.1 è·å–APIå¯†é’¥

```bash
# åœ¨Google Cloud Consoleä¸­ï¼š
# 1. åˆ›å»ºé¡¹ç›®
# 2. å¯ç”¨Speech-to-Text API
# 3. åˆ›å»ºæœåŠ¡è´¦æˆ·
# 4. ä¸‹è½½JSONå¯†é’¥æ–‡ä»¶
```

### 3.2 é…ç½®ç¯å¢ƒå˜é‡

```bash
# è®¾ç½®è®¤è¯æ–‡ä»¶è·¯å¾„
export GOOGLE_APPLICATION_CREDENTIALS="path/to/your/credentials.json"
```

### 3.3 ä¿®æ”¹ä»£ç é›†æˆAPI

åœ¨é¡¹ç›®ä¸­åˆ›å»º `config.py`ï¼š

```python
import os
from google.cloud import speech

# Google Cloud Speeché…ç½®
def get_speech_client():
    return speech.SpeechClient()

# APIé…ç½®
SPEECH_CONFIG = {
    "language_code": "zh-CN",  # ä¸­æ–‡
    "sample_rate_hertz": 16000,
    "encoding": speech.RecognitionConfig.AudioEncoding.LINEAR16,
}
```

## 4 ğŸš€ ä½¿ç”¨æµç¨‹

### 4.1 å¯åŠ¨æœåŠ¡

```bash
# è®¿é—®Webç•Œé¢
http://localhost:7860
```

### 4.2 ä¸Šä¼ è§†é¢‘æ–‡ä»¶

- æ”¯æŒæ ¼å¼ï¼šMP4, AVI, MOV, MKVç­‰
- æ–‡ä»¶å¤§å°ï¼šå»ºè®®å°äº500MB
- æ—¶é•¿ï¼šå»ºè®®å°äº2å°æ—¶

### 4.3 é…ç½®å‚æ•°

- **Model**: é€‰æ‹©Whisperæ¨¡å‹ï¼ˆtiny, base, small, medium, largeï¼‰
- **Language**: é€‰æ‹©è¯­è¨€ï¼ˆè‡ªåŠ¨æ£€æµ‹æˆ–æŒ‡å®šï¼‰
- **Task**: é€‰æ‹©ä»»åŠ¡ç±»å‹ï¼ˆtranscribeæˆ–translateï¼‰

### 4.4 å¼€å§‹è½¬æ¢

- ç‚¹å‡»"Submit"æŒ‰é’®
- ç­‰å¾…å¤„ç†å®Œæˆ
- ä¸‹è½½ç”Ÿæˆçš„å­—å¹•æ–‡ä»¶

## 5 ğŸ“ è¾“å‡ºæ–‡ä»¶æ ¼å¼

```
outputs/
â”œâ”€â”€ video_name.srt          # å­—å¹•æ–‡ä»¶
â”œâ”€â”€ video_name.txt          # çº¯æ–‡æœ¬
â”œâ”€â”€ video_name.vtt          # WebVTTæ ¼å¼
â””â”€â”€ video_name_audio.wav    # æå–çš„éŸ³é¢‘
```

## 6 âš¡ æ€§èƒ½ä¼˜åŒ–

### 6.1 GPUåŠ é€Ÿ

```bash
# å®‰è£…CUDAç‰ˆæœ¬çš„PyTorch
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

### 6.2 æ¨¡å‹é€‰æ‹©å»ºè®®

- **tiny**: é€Ÿåº¦æœ€å¿«ï¼Œç²¾åº¦è¾ƒä½
- **base**: å¹³è¡¡é€‰æ‹©
- **small**: æ¨èæ—¥å¸¸ä½¿ç”¨
- **medium**: é«˜ç²¾åº¦è¦æ±‚
- **large**: æœ€é«˜ç²¾åº¦ï¼Œé€Ÿåº¦è¾ƒæ…¢

## 7 ğŸ”„ é›†æˆGoogle Cloud Speech-to-Text

### 7.1 ä¿®æ”¹æ ¸å¿ƒæ–‡ä»¶

ç¼–è¾‘ `modules/whisper_inference.py`ï¼š

```python
def transcribe_with_google_cloud(audio_path, config):
    """ä½¿ç”¨Google Cloud Speech-to-Text API"""
    from google.cloud import speech
    
    client = speech.SpeechClient()
    
    with open(audio_path, "rb") as audio_file:
        content = audio_file.read()
    
    audio = speech.RecognitionAudio(content=content)
    config = speech.RecognitionConfig(
        encoding=speech.RecognitionConfig.AudioEncoding.LINEAR16,
        sample_rate_hertz=16000,
        language_code="zh-CN",
        enable_automatic_punctuation=True,
        enable_word_time_offsets=True,
    )
    
    response = client.recognize(config=config, audio=audio)
    
    return response
```

## 8 ğŸ› å¸¸è§é—®é¢˜

### 8.1 ä¾èµ–å®‰è£…å¤±è´¥

```bash
# å‡çº§pip
pip install --upgrade pip
# å•ç‹¬å®‰è£…ffmpeg
conda install ffmpeg  # æˆ–ä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨
```

### 8.2 GPUæœªè¢«è¯†åˆ«

```bash
# æ£€æŸ¥CUDAå®‰è£…
nvidia-smi
# é‡æ–°å®‰è£…PyTorch GPUç‰ˆæœ¬
```

### 8.3 å†…å­˜ä¸è¶³

- ä½¿ç”¨æ›´å°çš„Whisperæ¨¡å‹
- åˆ†æ®µå¤„ç†é•¿è§†é¢‘
- é™ä½éŸ³é¢‘é‡‡æ ·ç‡

## 9 ğŸ“Š ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šé€‰æ‹©"base"æ¨¡å‹æµ‹è¯•
2. **ä¸­æ–‡è§†é¢‘**ï¼šè¯­è¨€è®¾ç½®ä¸º"Chinese"
3. **é•¿è§†é¢‘**ï¼šè€ƒè™‘åˆ†æ®µå¤„ç†
4. **é«˜ç²¾åº¦éœ€æ±‚**ï¼šä½¿ç”¨"large"æ¨¡å‹ + Google Cloud API
5. **æ‰¹é‡å¤„ç†**ï¼šç¼–å†™è„šæœ¬è°ƒç”¨APIæ¥å£

ç°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼éœ€è¦æˆ‘å¸®ä½ è§£å†³å®‰è£…è¿‡ç¨‹ä¸­çš„ä»»ä½•é—®é¢˜å—ï¼Ÿ