---
文章标题: "[[10_设备树的简介]]"
文章作者: Dakkk
文章概要: |
  介绍设备树的基本概念、文件类型和编写方法，详细说明DTS、DTSI、DTC、DTB、DTBO等文件格式，强调设备树用于描述硬件平台资源的树状结构特点。
tags:
  - 设备树
  - DTS
  - DTSI
  - DTB
  - Linux驱动
  - 硬件描述
  - 嵌入式开发
  - RK3568
相关文章:
  - "[[11_设备树的编译]]"
  - "[[../../../01-❇️ 参考资料/4_常见问题解决/学习问题记录]]"
  - "[[../../../02-💻 开发环境/2_环境、启动和编译烧录相关(迅为)/3_编译与烧写（保留，直接看Lubancat板卡即可）]]"
  - "[[../../../../05-🔧 51&32单片机开发/01-🎯 51单片机/01-📚 基础入门/_常用函数]]"
  - "[[../../../../05-🔧 51&32单片机开发/01-🎯 51单片机/01-📚 基础入门/_逻辑分析仪的安装]]"
文章分类: 🐧 Linux系统
文章路径: 06-🐧 Linux系统/04-🔌 驱动开发/02-💾 Lubancat-RK3568/2_镜像构建与部署/10_设备树的简介.md
文章难度: 初级 💧
目前阶段: ✅ 已完成
重要性: ⭐⭐⭐⭐ 核心能力
创建时间: 2025-05-04 19:11:18
修改时间: 2025-05-28 00:19:51
---

## 1 设备树介绍

设备树的作用就是描述一个硬件平台的硬件资源。这个“设备树”可以被bootloader(uboot)传递到内核， 内核可以从设备树中获取硬件信息。

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/05/25f4e4b6dfb7ee05583472d8d60434c5.png)

设备树描述硬件资源时有两个特点。
- - 第一，以“树状”结构描述硬件资源。例如本地总线为树的“主干”在设备树里面称为“根节点”， 挂载到本地总线的IIC总线、SPI总线、UART总线为树的“枝干”在设备树里称为“根节点的子节点”， IIC 总线下的IIC设备不止一个，这些“枝干”又可以再分。
- 第二，设备树可以像头文件（.h文件）那样，一个设备树文件引用另外一个设备树文件， 这样可以实现“代码”的重用。例如多个硬件平台都使用RK3568作为主控芯片， 那么我们可以将RK3568芯片的硬件资源写到一个单独的设备树文件里面一般使用“.dtsi”后缀， 其他设备树文件直接使用“#include xxx.dtsi”引用即可。

如 arch/arm64/boot/dts/rockchip/rk3568.dtsi，这个文件一般由芯片厂商提供，其中几乎包含了rk3568芯片中所有设备及外设接口。 在我们使用时，我们只需要在我们板卡的设备树源文件中#include “rk3568.dtsi”就可以导入rk3568这可芯片所有的设备， 然后我们再根据板卡上的外设来修改即可。
## 2 常见的几个DT

- **DTS** 是指.dts格式的文件，是一种ASII 文本格式的设备树描述，也是我们要编写的设备树源码，一般一个.dts文件对应一个硬件平台。在Linux源码的“arch/arm64/boot/dts/”目录下又根据芯片厂商进行分类
  ![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/05/2b149cfecfcb2955ccf1586d4f677883.png)
- **DTSI** 是指由芯片厂商提供，是同一芯片平台“共用”的设备树文件。
- **DTC** 是指编译设备树源码的工具，一般情况下我们需要手动安装这个编译工具。
- **DTB** 是设备树源码编译生成的文件，类似于我们C语言中“.C”文件编译生成“.bin”文件。
- **DTBO** 是设备树叠加层编译生成的文件，可以对DTB进行叠加补充。
## 3 设备树的节点编写

具体详细的编写教程可以参考 [8_Linux设备树](../../../07-🚗%20Linux驱动开发核心(重要!!!)/03-📊%20字符设备驱动模型/1_字符设备驱动模型基础(Lubancat)/8_Linux设备树.md)