---
文章标题: "[[2_应用程序代码优化技巧]]"
文章作者: Dakkk
文章概要: |
  介绍应用程序代码优化技巧，重点讲解高速缓存局部性原理，通过二维数组遍历示例说明缓存友好的编程方式，提及代码内联、restrict关键字等优化手段。
tags:
  - 代码优化
  - 缓存局部性
  - 内存访问
  - 性能优化
  - C语言
  - 数组遍历
  - CPU缓存
  - 编程技巧
相关文章:
  - "[[../../../05-🔧 51&32单片机开发/01-🎯 51单片机/01-📚 基础入门/_常用函数]]"
  - "[[0_笔记（重点备忘）]]"
  - "[[../../../05-🔧 51&32单片机开发/0_课程完整内容]]"
  - "[[0_C语言提纲]]"
  - "[[1_📕文章管理模块功能分析、表设计]]"
文章分类: 🐧 Linux系统
文章路径: 06-🐧 Linux系统/04-🔌 驱动开发/01-📝 训练营笔记/2_嵌入式基础能力/4_Linux应用开发/2_应用程序代码优化技巧.md
文章难度: 中级 🌳
目前阶段: ✅ 已完成
重要性: ⭐⭐⭐⭐ 核心能力
创建时间: 2025-05-03 11:05:19
修改时间: 2025-05-03 11:10:49
---
## 1 高速缓存

我们都清楚缓存的重要性，通过将常用数据保存在缓存中，当硬件或软件需要再次访问这些数据时，便能以相对更快的速度进行读取和使用。而在现代计算机体系中，L1、L2、L3（某些体系可能有 L4 缓存，但不普遍）一般分别对应于 CPU 芯片上的三个不同级别的高速缓存，这些缓存的数据读写速度依次降低，但可缓存数据的容量却依次升高。而这些位于 CPU 芯片上的缓存，则主要用于临时存放 CPU 在最近一段时间内经常使用的数据和指令。

在这里，我给出了一段不满足局部性原理的代码，你可以先思考下这段代码有什么问题，有没有可以进一步提升性能的空间。
```C
#define M 128
#define N 64
int sum(int a[M][N]) {
  int i, j, sum = 0;
  for (j = 0; j < N; ++j) {
    for (i = 0; i < M; ++i) {
      sum += a[i][j];
    }
  }
  return sum;
}
```
## 2 代码内联

## 3 restrict 关键字

## 4 消除不必要内存引用