<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/27.0.9 Chrome/134.0.6998.205 Electron/35.4.0 Safari/537.36" version="27.0.9">
  <diagram name="第 1 页" id="9OJkJmYKzkhb6c1DOidc">
    <mxGraphModel dx="2951" dy="1716" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="3F1R7Xci8SPssrJBkS3U-129" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="19" y="780" width="1130" height="930" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-128" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="19" y="30" width="1130" height="740" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-1" value="&lt;h2&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;1、概述&lt;/font&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="222.3199999999999" y="117.5" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-2" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;通过在进入临界代码段时屏蔽中断，防止被中断程序锁抢占&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="397.4899999999999" y="110" width="620.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-237" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="3F1R7Xci8SPssrJBkS3U-3" target="3F1R7Xci8SPssrJBkS3U-132" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-238" value="&lt;font style=&quot;font-size: 16px; color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;在中断上下文（硬中断、软终端、NMI）&lt;br&gt;内核抢占是禁止的&lt;/b&gt;&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="3F1R7Xci8SPssrJBkS3U-237" vertex="1" connectable="0">
          <mxGeometry x="0.0853" y="-3" relative="1" as="geometry">
            <mxPoint x="60" y="-101" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-3" value="&lt;h1&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;中断屏蔽&lt;/span&gt;&lt;/h1&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="29" y="365" width="165.34" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-4" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f5f5f5;strokeColor=#1BA1E2;strokeWidth=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="194.34" y="140" width="29" height="520" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-5" value="&lt;h2&gt;2、相关API&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.8499999999999" y="410" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-6" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="368.49" y="320" width="29" height="220" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-7" value="" style="shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fillColor=none;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="397.33000000000004" y="340" width="741.6299999999992" height="210" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-8" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=#b85450;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=#f8cecc;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-9" value="函数" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-8" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-10" value="参数" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-8" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-11" value="返回值" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-8" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-12" value="描述" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#000000;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-8" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-13" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="30" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-14" value="&lt;b&gt;local_irq_disable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-13" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-15" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-13" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-16" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-13" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-17" value="屏蔽本地（硬）中断" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-13" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-18" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="60" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-19" value="&lt;b&gt;local_irq_enable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-18" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-20" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-18" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-21" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-18" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-22" value="使能本地（硬）中断" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-18" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-23" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="90" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-24" value="&lt;b&gt;local_irq_save&lt;/b&gt;(flags)" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-23" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-25" value="flags: 中断状态" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-23" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-26" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-23" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-27" value="保存CPU中断位信息并禁止中断" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-23" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-28" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="120" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-29" value="&lt;b&gt;local_irq_restore&lt;/b&gt;(flags)" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-28" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-30" value="flags: 中断状态" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-28" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-31" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-28" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-32" value="恢复CPU中断位信息" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-28" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-33" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="150" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-34" value="&lt;b&gt;local_bh_disable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-33" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-35" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-33" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-36" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-33" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-37" value="禁止本地处理器的软中断和tasklet的处理" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-33" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-38" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-7" vertex="1">
          <mxGeometry y="180" width="741.6299999999992" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-39" value="&lt;b&gt;local_bh_enable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-38" vertex="1">
          <mxGeometry width="212" height="30" as="geometry">
            <mxRectangle width="212" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-40" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-38" vertex="1">
          <mxGeometry x="212" width="140" height="30" as="geometry">
            <mxRectangle width="140" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-41" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-38" vertex="1">
          <mxGeometry x="352" width="90" height="30" as="geometry">
            <mxRectangle width="90" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-42" value="激活本地处理器的软中断和tasklet的处理" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-38" vertex="1">
          <mxGeometry x="442" width="300" height="30" as="geometry">
            <mxRectangle width="300" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-48" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;定义在&amp;nbsp;&lt;b&gt;linux/irqflags.h&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp;&lt;/b&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;文件&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.98" y="290" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-49" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;🌻Make By Dakkk&lt;/font&gt;" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#1CA5B8;strokeWidth=1;fillColor=none;fontColor=#1CA5B8;whiteSpace=wrap;align=center;verticalAlign=middle;spacingLeft=0;fontStyle=1;fontSize=16;spacing=5;" parent="1" vertex="1">
          <mxGeometry x="240.14999999999998" y="510" width="111.67" height="70.39" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-50" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;单CPU中解决竟态的一种简单而有效的方法&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="397.64999999999986" y="60" width="620.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-51" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="368.33" y="80" width="29" height="170" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-63" value="&lt;h2&gt;3、使用规则&lt;br&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.8499999999999" y="640" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-64" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;临界区要短&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;屏蔽中断的时间应该尽可能短&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#ffe6cc;strokeColor=#d79b00;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.98" y="570" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-65" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;避免睡眠&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;在中断屏蔽期间不能调用可能导致睡眠的函数&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#ffe6cc;strokeColor=#d79b00;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="616" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-66" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;避免复杂操作&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;不要在中断屏蔽期间执行复杂的计算&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#ffe6cc;strokeColor=#d79b00;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="662" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-67" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;配对使用&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;每个disable都要有对应的enable&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#ffe6cc;strokeColor=#d79b00;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="709" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-68" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#ffe6cc;strokeColor=#d79b00;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="367.63" y="590" width="29" height="140" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-69" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;内核中进程的调度都是依靠中断来实现的，屏蔽中断，可以保证单CPU只执行一个进程&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="398.65" y="160" width="620.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-127" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;‼️由于Linux异步 I/O、进度调度等很多重要操作都依赖与中断，中断对于内核运行十分重要&lt;br&gt;&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent; font-size: 16px;&quot;&gt;‼️&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;所以&lt;b&gt;避免长时间屏蔽中断，否则可能造成数据丢失乃至系统崩溃&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="398.65" y="220" width="661.35" height="50" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-130" value="&lt;h2&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;1、概述&lt;/font&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.33999999999995" y="905" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-131" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;历史：&lt;/b&gt;Linux2.6引入可抢占式内核设计，之前进程一旦进入内核态就不会被抢占&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="397.4899999999999" y="860" width="620.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-132" value="&lt;h1&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;内核抢占&lt;/span&gt;&lt;/h1&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="29" y="1240" width="165.34" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-133" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f5f5f5;strokeColor=#1BA1E2;strokeWidth=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="194.34" y="930" width="29" height="690" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-134" value="&lt;h2&gt;2、相关API&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.8499999999999" y="1160" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-135" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="371.18" y="1070" width="29" height="260" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-136" value="" style="shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fillColor=none;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="398.65000000000003" y="1060" width="659.9799999999991" height="240" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-137" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=#b85450;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=#f8cecc;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-138" value="函数（一般不用使用）" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-137" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-139" value="参数" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-137" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-140" value="返回值" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-137" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-141" value="描述" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#000000;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-137" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-142" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="30" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-143" value="&lt;b&gt;preempt_disable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-142" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-144" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-142" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-145" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-142" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-146" value="禁止内核抢占" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-142" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-147" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="60" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-148" value="&lt;b&gt;preempt_enable&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-147" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-149" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-147" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-150" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-147" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-151" value="启用内核抢占" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-147" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-152" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="90" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-153" value="&lt;b&gt;preempt_enable_no_resched&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-152" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-154" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-152" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-155" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-152" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-156" value="启用抢占但不立即调度" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-152" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-157" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="120" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-158" value="&lt;b&gt;preempt_count&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-157" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-159" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-157" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-160" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-157" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-161" value="获取当前抢占计数值" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-157" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-162" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="150" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-163" value="&lt;b&gt;cond_resched&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-162" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-164" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-162" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-165" value="int" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-162" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-166" value="条件性重新调度" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-162" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-167" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="180" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-168" value="&lt;b&gt;need_resched&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-167" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-169" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-167" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-170" value="int" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-167" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-171" value="检查是否需要调度" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-167" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-184" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-136" vertex="1">
          <mxGeometry y="210" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-185" value="&lt;b&gt;might_resched&lt;/b&gt;()" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-184" vertex="1">
          <mxGeometry width="260" height="30" as="geometry">
            <mxRectangle width="260" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-186" value="——" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-184" vertex="1">
          <mxGeometry x="260" width="70" height="30" as="geometry">
            <mxRectangle width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-187" value="void" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-184" vertex="1">
          <mxGeometry x="330" width="112" height="30" as="geometry">
            <mxRectangle width="112" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-188" value="可能的调度点" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-184" vertex="1">
          <mxGeometry x="442" width="218" height="30" as="geometry">
            <mxRectangle width="218" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-173" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;🌻Make By Dakkk&lt;/font&gt;" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#1CA5B8;strokeWidth=1;fillColor=none;fontColor=#1CA5B8;whiteSpace=wrap;align=center;verticalAlign=middle;spacingLeft=0;fontStyle=1;fontSize=16;spacing=5;" parent="1" vertex="1">
          <mxGeometry x="241.67999999999998" y="1020" width="111.67" height="70.39" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-174" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;当线程在内核空间执行时，如果有更高优先级的任务出现，且当前内核运行抢占，则可以将当前任务挂起，转而执行优先级更高的线程&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="397.64999999999986" y="810" width="620.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-175" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="368.33" y="830" width="29" height="190" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-176" value="&lt;h2&gt;3、抢占检查机制&lt;br&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.8499999999999" y="1430" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-177" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;中断返回时&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;从中断处理程序返回内核空间&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.98" y="1360" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-178" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;抢占重新启用时：&lt;/b&gt;调用preempt_enable()时&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="1406" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-179" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;显式检查时&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;：&lt;/b&gt;调用cond_resched()等函数&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="1452" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-180" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;‼️&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;只有当抢占计数为0且设置了调度标志时，才会触发实际的抢占调度&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="1499" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-181" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="367.63" y="1380" width="29" height="140" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-182" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;分类：&lt;/b&gt;&lt;br&gt;&lt;b&gt;用户态抢占：&lt;/b&gt;用户空间的进程随时可能被时钟中断打断并且重新调度&lt;br&gt;&lt;b&gt;内核态抢占：&lt;/b&gt;内核空间的代码也可能被打断并重新调度&lt;/font&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="398.65" y="910" width="620.33" height="80" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-183" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;每个线程的 &lt;b&gt;thread_info&lt;/b&gt; 结构体中有 &lt;b&gt;preempt_count&lt;/b&gt;字段，&lt;b&gt;详细可以查看软中断机制&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="398.65" y="1000" width="620.35" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-230" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;举例：自旋锁的实现内部会自动控制抢占，使用preempt_disable和preempt_enable&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="400.17999999999995" y="1310" width="620.35" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-231" value="&lt;h2&gt;4、应用场景&lt;br&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="223.8499999999999" y="1595" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-232" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;提高系统响应：&lt;/b&gt;长时间运行的内核函数，定期检查是否需要调度，给其他线程机会&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.98" y="1550" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-233" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;文件系统操作：&lt;/b&gt;对于长时间的文件复制操作，使用cond_resched主动让出CPU&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="1596" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-234" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;网络处理&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;：&lt;/b&gt;处理一定数量网络包后，检查调度&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#fff2cc;strokeColor=#d6b656;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="396.47" y="1642" width="618.34" height="36" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-236" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="367.63" y="1570" width="29" height="90" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-239" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=none;" parent="1" vertex="1">
          <mxGeometry x="29" y="1749.53" width="1130" height="900.47" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-241" value="&lt;h2&gt;&lt;font style=&quot;font-size: 18px;&quot;&gt;1、概述&lt;/font&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="233.33999999999995" y="1805" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-242" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;原因：&lt;/b&gt;编译器优化，CPU流水线、缓存系统、存储系统，都会导致指令乱序&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="409.49" y="1770" width="620.53" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-243" value="&lt;h1&gt;&lt;span style=&quot;font-size: 20px;&quot;&gt;内存屏障&lt;/span&gt;&lt;/h1&gt;" style="ellipse;whiteSpace=wrap;html=1;fillColor=#1ba1e2;strokeColor=#006EAF;fontColor=#ffffff;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="38.33" y="2069.9999999999995" width="165.34" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-244" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f5f5f5;strokeColor=#1BA1E2;strokeWidth=2;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="203.67" y="1830" width="29" height="550" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-245" value="&lt;h2&gt;3、相关API&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="232.66999999999993" y="2359.9999999999995" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-246" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#f8cecc;strokeColor=#b85450;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="380" y="2150" width="29" height="460" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-247" value="" style="shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fillColor=none;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="405.7200000000001" y="2140" width="659.9799999999991" height="430" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-248" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=#b85450;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=#f8cecc;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-249" value="函数" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-248" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-250" value="参数" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-248" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-251" value="返回值" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#b85450;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-248" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-252" value="描述" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=#000000;overflow=hidden;fillColor=#f8cecc;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;fontStyle=1" parent="3F1R7Xci8SPssrJBkS3U-248" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-253" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="30" width="659.9799999999991" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-254" value="&lt;b&gt;barrier()&amp;nbsp;&amp;nbsp;&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-253" vertex="1">
          <mxGeometry width="230" height="70" as="geometry">
            <mxRectangle width="230" height="70" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-255" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-253" vertex="1">
          <mxGeometry x="230" width="40" height="70" as="geometry">
            <mxRectangle width="40" height="70" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-256" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-253" vertex="1">
          <mxGeometry x="270" width="50" height="70" as="geometry">
            <mxRectangle width="50" height="70" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-257" value="编译优化屏障，阻止编译器重排指令&lt;br&gt;只影响编译器，不影响CPU的乱序&lt;br&gt;&lt;b&gt;确保汇编代码和C代码的一致性&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-253" vertex="1">
          <mxGeometry x="320" width="340" height="70" as="geometry">
            <mxRectangle width="340" height="70" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-258" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="100" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-259" value="&lt;b&gt;mb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-258" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-260" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-258" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-261" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-258" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-262" value="内存屏障（包括读和写），用于SMP和UP" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-258" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-263" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="130" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-264" value="&lt;b&gt;rmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-263" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-265" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-263" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-266" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-263" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-267" value="读内存屏障，用于SMP和UP&amp;nbsp;&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-263" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-268" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="160" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-269" value="&lt;b&gt;wmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-268" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-270" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-268" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-271" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-268" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-272" value="写内存屏障，用于SMP和UP&amp;nbsp;&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-268" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-273" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="190" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-274" value="&lt;b&gt;smp_mb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-273" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-275" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-273" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-276" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-273" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-277" value="用于SMP的内存屏障，UP上只是优化屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-273" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-278" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="220" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-279" value="&lt;b&gt;smp_rmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-278" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-280" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-278" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-281" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-278" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-282" value="用于SMP的读内存屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-278" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-283" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="250" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-284" value="&lt;b&gt;smp_wmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-283" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-285" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-283" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-286" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-283" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-287" value="用于SMP的写内存屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-283" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-306" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="280" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-307" value="&lt;b&gt;smp_read_barrier_depends()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-306" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-308" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-306" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-309" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-306" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-310" value="读依赖屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-306" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-311" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="310" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-312" value="&lt;b&gt;dma_rmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-311" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-313" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-311" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-314" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-311" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-315" value="DMA读屏障&amp;nbsp;&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-311" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-316" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="340" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-317" value="&lt;b&gt;dma_wmb()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-316" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-318" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-316" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-319" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-316" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-320" value="DMA写屏障&amp;nbsp;&amp;nbsp;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-316" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-321" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="370" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-322" value="&lt;b&gt;smp_mb__before_atomic()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-321" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-323" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-321" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-324" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-321" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-325" value="原子操作前的内存屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-321" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-326" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;strokeColor=inherit;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="3F1R7Xci8SPssrJBkS3U-247" vertex="1">
          <mxGeometry y="400" width="659.9799999999991" height="30" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-327" value="&lt;b&gt;smp_mb__after_atomic()&lt;/b&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;align=center;" parent="3F1R7Xci8SPssrJBkS3U-326" vertex="1">
          <mxGeometry width="230" height="30" as="geometry">
            <mxRectangle width="230" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-328" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-326" vertex="1">
          <mxGeometry x="230" width="40" height="30" as="geometry">
            <mxRectangle width="40" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-329" value="—" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-326" vertex="1">
          <mxGeometry x="270" width="50" height="30" as="geometry">
            <mxRectangle width="50" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-330" value="原子操作后的内存屏障" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;strokeColor=inherit;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;pointerEvents=1;fontSize=16;" parent="3F1R7Xci8SPssrJBkS3U-326" vertex="1">
          <mxGeometry x="320" width="340" height="30" as="geometry">
            <mxRectangle width="340" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-288" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;🌻Make By Dakkk&lt;/font&gt;" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#1CA5B8;strokeWidth=1;fillColor=none;fontColor=#1CA5B8;whiteSpace=wrap;align=center;verticalAlign=middle;spacingLeft=0;fontStyle=1;fontSize=16;spacing=5;" parent="1" vertex="1">
          <mxGeometry x="251.17" y="1875.1399999999999" width="111.67" height="70.39" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-289" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;所以：&lt;/b&gt;由于上述原因，导致程序的执行顺序和代码的编写顺序不同，这就需要内存屏障来保证关键操作的执行顺序&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#dae8fc;strokeColor=#6c8ebf;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="409.49" y="1830" width="620.33" height="60" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-290" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="377.82" y="1790" width="29" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-291" value="&lt;h2&gt;2、ARM64内存&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;屏障指令&lt;br&gt;&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="233.33999999999992" y="1994.9999999999995" width="147.33" height="40" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-292" value="&lt;b style=&quot;font-size: 16px;&quot;&gt;DMB (Data Memory Barrier) - 数据存储屏障&lt;/b&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;：前面&lt;b&gt;存储器访问操作&lt;/b&gt;OK后，才执行后面指令&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;1. 保证前后内存访问指令的顺序，不保证前面的指令必须完成&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;2. 只影响内存访问指令，不影响其他指令，开销最小&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="406.47" y="1899.53" width="663.53" height="70.47" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-293" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;DSB (Data Synchronization Barrier) - 数据同步屏障：&lt;/b&gt;前面&lt;b&gt;访问指令&lt;/b&gt;OK后，才执行后面指令&lt;br&gt;1. 比DMB更严格，任何指令都要等待DSB前的访问指令完成，包括缓存、分支预测和TLB等&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;2. 开销中等&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="406.82" y="1980" width="663.18" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-294" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;ISB (Instruction Synchronization Barrier) - 指令同步屏障&lt;/b&gt;：&lt;br&gt;1. 最严格，刷新CPU流水线和预取缓冲区，用于上下文切换，如ASID更改、TLB维护&lt;br&gt;2. 开销最大&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#d5e8d4;strokeColor=#82b366;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="406.47" y="2060" width="663.53" height="70" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-296" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;labelPosition=left;verticalLabelPosition=middle;align=right;verticalAlign=middle;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="377.12" y="1919.53" width="29" height="190.47" as="geometry" />
        </mxCell>
        <mxCell id="3F1R7Xci8SPssrJBkS3U-331" value="&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;场景：Linux内核的睡眠和唤醒机制大量使用了内存屏障&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fillColor=#f8cecc;strokeColor=#b85450;dashed=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="406.82000000000005" y="2589.5299999999997" width="618.34" height="36" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
