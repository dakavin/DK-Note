<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/27.0.9 Chrome/134.0.6998.205 Electron/35.4.0 Safari/537.36" version="27.0.9">
  <diagram name="第 1 页" id="K-n1izwVfKy2xKYXhi73">
    <mxGraphModel dx="2066" dy="1201" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="7WYgiVxzPaMcStOFTRAe-1" value="" style="shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=0;strokeColor=#6c8ebf;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;strokeWidth=2;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="160" y="69" width="850" height="489" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-2" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry width="850" height="71" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-3" value="lsmod" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-2" vertex="1">
          <mxGeometry width="126" height="71" as="geometry">
            <mxRectangle width="126" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-4" value="&lt;font style=&quot;&quot;&gt;1. 列出当前内核中加载的模块&lt;br&gt;2. 本质是将 &lt;b&gt;/proc/modules&lt;/b&gt; 中的信息调整格式输出&lt;/font&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-2" vertex="1">
          <mxGeometry x="126" width="724" height="71" as="geometry">
            <mxRectangle width="724" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-27" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry y="71" width="850" height="71" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-28" value="modinfo" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-27" vertex="1">
          <mxGeometry width="126" height="71" as="geometry">
            <mxRectangle width="126" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-29" value="&lt;font style=&quot;&quot;&gt;1. 显示模块的详细信息&lt;br&gt;2. filename(模块文件路径)、desc(模块描述)、author&lt;/font&gt;(模块作者)、license(许可证信息)等" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-27" vertex="1">
          <mxGeometry x="126" width="724" height="71" as="geometry">
            <mxRectangle width="724" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-30" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry y="142" width="850" height="71" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-31" value="insmod" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-30" vertex="1">
          <mxGeometry width="126" height="71" as="geometry">
            <mxRectangle width="126" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-32" value="1. 直接加载模块到内核中&lt;br&gt;2. 一般需要sudo权限，&lt;b&gt;不能自动处理依赖&lt;/b&gt;，需要指定完成的ko文件路径" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-30" vertex="1">
          <mxGeometry x="126" width="724" height="71" as="geometry">
            <mxRectangle width="724" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-33" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry y="213" width="850" height="78" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-34" value="modprobe" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-33" vertex="1">
          <mxGeometry width="126" height="78" as="geometry">
            <mxRectangle width="126" height="78" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-35" value="1. 智能加载模块，&lt;b&gt;自动处理依赖关系&lt;/b&gt;&lt;div&gt;2. 可以无需ko后缀，支持配置参数传递&lt;/div&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-33" vertex="1">
          <mxGeometry x="126" width="724" height="78" as="geometry">
            <mxRectangle width="724" height="78" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-36" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry y="291" width="850" height="127" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-37" value="depmod" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-36" vertex="1">
          <mxGeometry width="126" height="127" as="geometry">
            <mxRectangle width="126" height="127" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-38" value="1. 创建模块关系依赖的文件，供modprobe使用&lt;div&gt;2. &lt;b&gt;/lib/modules&lt;/b&gt; 目录包含了下面几个文件是描述依赖关系的&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- &lt;b&gt;modules.dep&lt;/b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;：记录模块之间的依赖关系&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- &lt;b&gt;modules.alias&lt;/b&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; ：模块别名映射&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;- &lt;b&gt;modules.symbols&lt;/b&gt;：模块导出的符号信息&lt;br&gt;&lt;/div&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-36" vertex="1">
          <mxGeometry x="126" width="724" height="127" as="geometry">
            <mxRectangle width="724" height="127" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-39" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-1" vertex="1">
          <mxGeometry y="418" width="850" height="71" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-40" value="rmmod" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-39" vertex="1">
          <mxGeometry width="126" height="71" as="geometry">
            <mxRectangle width="126" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-41" value="1. 将内核中运行的模块删除&lt;div&gt;2. 一般需要sudo权限，不会自动卸载依赖模块，需要手动卸载&lt;br&gt;3. 可以使用&lt;b&gt;modprobe -r&lt;/b&gt;命令自动卸载依赖&lt;/div&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-39" vertex="1">
          <mxGeometry x="126" width="724" height="71" as="geometry">
            <mxRectangle width="724" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-26" value="&lt;h1&gt;&lt;font style=&quot;font-size: 21px;&quot;&gt;内核模块管理命令&lt;/font&gt;&lt;/h1&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="160" y="30" width="850" height="39" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-42" value="" style="shape=table;startSize=0;container=1;collapsible=0;childLayout=tableLayout;fixedRows=1;rowLines=0;fontStyle=0;strokeColor=#82b366;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;strokeWidth=2;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="160" y="619" width="850" height="221" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-43" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-42" vertex="1">
          <mxGeometry width="850" height="71" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-44" value="1、放置模块文件" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-43" vertex="1">
          <mxGeometry width="170" height="71" as="geometry">
            <mxRectangle width="170" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-45" value="1. uname -r 查询内核版本，假设是&amp;nbsp;&lt;b&gt;4.19.232&lt;/b&gt;&lt;br&gt;2. 将ko文件复制到目录 &lt;b&gt;/lib/modules/4.19.232&lt;/b&gt; 下 （注意设置权限）" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-43" vertex="1">
          <mxGeometry x="170" width="680" height="71" as="geometry">
            <mxRectangle width="680" height="71" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-46" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=#82b366;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-42" vertex="1">
          <mxGeometry y="71" width="850" height="40" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-47" value="2、建立依赖关系" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-46" vertex="1">
          <mxGeometry width="170" height="40" as="geometry">
            <mxRectangle width="170" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-48" value="1. 使用&lt;b&gt;depmod -a&lt;/b&gt;更新全局依赖关系" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-46" vertex="1">
          <mxGeometry x="170" width="680" height="40" as="geometry">
            <mxRectangle width="680" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-49" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeColor=inherit;fontSize=16;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-42" vertex="1">
          <mxGeometry y="111" width="850" height="110" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-50" value="3、配置自动加载" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;strokeColor=inherit;fontSize=19;fontStyle=1;align=left;spacing=4;spacingTop=0;spacingLeft=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-49" vertex="1">
          <mxGeometry width="170" height="110" as="geometry">
            <mxRectangle width="170" height="110" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-51" value="1. 方式一：修改 /etc/modules 文件，最后追加 模块名（不带ko）&lt;br&gt;2. 方式二：创建 /etc/modules-load.d/模块名.conf，文件内容为 模块名（不带ko）&lt;br&gt;3. 不写ko后缀，表示模块与内核松耦合&lt;br&gt;4. 写ko后缀，不推荐，出错时容易导致内核panic" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;align=left;spacingLeft=0;overflow=hidden;strokeColor=inherit;fontSize=18;spacing=4;spacingTop=0;spacingBottom=0;" parent="7WYgiVxzPaMcStOFTRAe-49" vertex="1">
          <mxGeometry x="170" width="680" height="110" as="geometry">
            <mxRectangle width="680" height="110" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-61" value="&lt;h1&gt;&lt;font style=&quot;font-size: 21px;&quot;&gt;系统启动时，自动加载模块配置&lt;/font&gt;&lt;/h1&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="160" y="580" width="850" height="39" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-62" value="&lt;h1&gt;&lt;font style=&quot;font-size: 21px;&quot;&gt;按需自动加载（热插拔），暂时不做说明，有意自行了解&lt;/font&gt;&lt;/h1&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="160" y="860" width="850" height="39" as="geometry" />
        </mxCell>
        <mxCell id="7WYgiVxzPaMcStOFTRAe-63" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;🌻Make By Dakkk&lt;/font&gt;" style="html=1;shadow=0;dashed=0;shape=mxgraph.bootstrap.rrect;rSize=5;strokeColor=#1CA5B8;strokeWidth=1;fillColor=none;fontColor=#1CA5B8;whiteSpace=wrap;align=center;verticalAlign=middle;spacingLeft=0;fontStyle=1;fontSize=16;spacing=5;" parent="1" vertex="1">
          <mxGeometry x="820.0000000000001" y="300" width="160" height="70.39" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
