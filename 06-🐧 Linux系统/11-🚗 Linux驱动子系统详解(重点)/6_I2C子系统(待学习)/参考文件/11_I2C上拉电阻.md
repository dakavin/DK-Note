I2C 的硬件连接如下图所示：

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/06/fe35a43f588b00a27ee5a42e5a8194ba.png)


可以看到在 SDA 数据线和 SCL 时钟线上都需要接一个上拉电阻？

## 接上拉电阻的作用

SDA 数据线和 SCL 时钟线上接一个上拉电阻的作用如下所示：

（**1**） 保证总线空闲时保持高电平

I2C 总线采用开漏/开集电极输出,当没有设备驱动总线时,总线会处于高阻态。 如果不接上拉电阻,总线电平将不确定,很容易受到噪声干扰。 接上拉电阻可以确保总线空闲时保持稳定的高电平。

  

（**2**） 实现线与功能

I2C 总线允许多个设备挂载在同一总线上。 当一个设备拉低总线时,其他设备的输出也会被拉低。 这就是线与功能,实现总线仲裁。 如果不接上拉电阻,当总线空闲时电平不确定,一个设备拉低总线时其他设备无法感知到总线电平变化,无法实现线与功能。

  

而这里的上拉电阻也并不能随意进行取值,需要考虑总线电容的影响。 I2C 总线上存在各种寄生电容,可以等效成一个 RC 充电电路， 如下图所示：
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/06/6ec10039013460ca8b6c8f9ea63b3b8f.png)


当总线从低电平转为高电平时,需要通过上拉电阻为总线供电,充电总线电容,如果上拉电阻取值过大,充电时间过长,会导致上升沿过慢,可能影响通信,如果上拉电阻取值过小， 则无法产生低电平， 所以在 I2C 规范中要求总线电容不能超过 400PF,通常建议在 1k 至 10k 欧姆之间选择,能够既保证上升沿速度,又能够可靠拉低总线电平

  

## I2C 上拉电阻阻值计算

上拉电阻的最小值计算

（**1**） 公式：$Rp(min) = (VDD - VOL(max))/IOL$


（**2**） 各参数解释

- VDD: 通常为 5V 或 3.3V 等常用的供电电压,在 iTOP-RK3568开发板上为 3.3V
    
- VOL(max): 表示器件在低电平时的最大输出电压,具体数值表格如下所示， 由于 VDD 为3.3V， 所以 VOL 的最大值为 0.4. 参考下图
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/06/3725a69f750c3b7c7ac03026a48ca534.png)


- IOL: 器件在低电平时的最大灌入电流,具体数值表格如下所示， 通过 VOL 值为 0.4， 可以得到 IOL 在常规模式下和快速模式下的值为 3ma。参考下图
![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/06/ddc8e989fa9482fe58726f20d58b701c.png)


Rp(min) 为上拉电阻的最小值

（**3**） 计算步骤

确定 VDD、 VOL(max) 和 IOL 的值:

在 RK3568 中 VDD 为 3.3V,所以 VOL(max) =0.4V，

对应的 IOL 为 3mA代入公式 Rp(min) = (VDD - VOL(max)) / IOL 计算得到上拉电阻的最小值。

Rp(min) = (3V - 0.4V) / 3mA = 966Ω