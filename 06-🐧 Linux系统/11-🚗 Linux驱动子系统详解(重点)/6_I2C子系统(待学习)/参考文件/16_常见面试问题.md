## 问：i2c速度最大多少

答： I2C总线数据传输速率在标准模式下可达100kbit/s，快速模式下可达400kbit/s，高速模式下可达3.4Mbit/s

  

## 问：上拉电压一般多大

答：根据模块的电压域决定，我们模块是1.8V的电压域所以是1.8V的上拉电压

  

## 问：从设备地址是怎么来的

答： i2c从设备地址需要查阅从设备硬件手册得到

  

## 问：单个字节读/写和多个字节读区别

![image.png|500](https://my-obsidian-image.oss-cn-guangzhou.aliyuncs.com/2025/06/7e9884c2434f5f0c6b8a8c916b8a6e65.png)


## 问：读写发生错误怎么办？

有的时候读写的时候，从设备的反应时间不见得那么快 ，所以经常会出现i2c读写概率性的超时失败。特别是一次读写很多个byte的时候 struct i2c_adapter中有个retries参数，指定在每次发生错误时重新发送的次数

  

## 问:为什么会有smbus，由来，好处

SMBus: System Management Bus，系统管理总线。SMBus 被用来连接各种设备，包括电源相关设备，系统传感器，EEPROM通讯设备等。使用 SMBus 的系统，设备之间发送和接收消息都是通过 SMBus，而不是使用单独的控制线，这样可以节省设备的管脚数。SMBus 最适用于笔记本电脑上，检测各元件状态并更新硬件设置引脚。与i2c的差异如下：

1）I2C协议中上拉电阻的vdd范围很广，可以打到达12V；SMBus协议中上拉电阻的vdd范围是1.8V~5V

2）I2C协议中SCL时钟频率最小值无限制；SMBus协议中时钟频率最小值是10KHz

3）当i2c控制器发出要访问的i2c设备地址，i2c设备收到它的设备地址后，i2c协议没有强制要求必须发出ack回应信号；当i2c控制器发出要访问的i2c设备地址，i2c设备收到它的设备地址后，SMBus协议要求必须发出ack回应信号，这样i2c控制器才知道该设备的状态是busy、failed、被移除了？

备注：在具体平台的i2c控制器驱动中如果没有提供struct i2c_adapter->algo->smbus_xfer函数，在i2c-core-smbus.c的i2c_smbus_xfer中会使用i2c本身协议模拟smbus

  

## 问：驱动程序框架 与 重要结构体 进行关联细化描述，以及数据收发代码流程。

  

  

  

## 问：平台的I2C控制器为例，讲解I2C控制器驱动的实现。

  

  

  

## 问：如何添加一个i2c设备驱动? 比如DTS修改，以及i2c总线号与GPIO脚对应。